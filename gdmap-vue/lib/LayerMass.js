!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lhp-amap/lib/units/lodash"));else if("function"==typeof define&&define.amd)define(["lhp-amap/lib/units/lodash"],t);else{var n=t("object"==typeof exports?require("lhp-amap/lib/units/lodash"):e["lhp-amap/lib/units/lodash"]);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/lib/",t(t.s=27)}([function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=function(e,t,n,r,i,s){var o,a=e=e||{},u=typeof e.default;"object"!==u&&"function"!==u||(o=e,a=e.default);var l,c="function"==typeof a?a.options:a;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId=i),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):r&&(l=r),l){var f=c.functional,d=f?c.render:c.beforeCreate;f?(c._injectStyles=l,c.render=function(e,t){return l.call(t),d(e,t)}):c.beforeCreate=d?[].concat(d,l):[l]}return{esModule:o,exports:a,options:c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),s=n(3),o=(n.n(s),{default:{all:{cursor:"pointer",strokeColor:"#1791fc",strokeOpacity:.8,strokeWeight:2,fillColor:"#1791fc",fillOpacity:.35},polyline:{lineJoin:"round",lineCap:"round"}},editor:{all:{fillColor:"red",fillOpacity:.3,strokeOpacity:1,strokeWeight:3,strokeColor:"red",strokeStyle:"dashed"}}});t.default={set:function(e,t){return Object(s.set)(o,e,t)},get:function(e,t){return Object(s.get)(o,e,t)},getOptions:function(e){return i()({},this.get("default.all",{}),this.get("default."+e,{}))},getEditor:function(e){return i()({},this.get("editor.all",{}),this.get("editor."+e,{}))}}},function(t,n){t.exports=e},,function(e,t,n){"use strict";var r=n(0),i=n.n(r),s=n(2).default.getOptions("marker");t.a=function(e){var t=e.options,n=void 0===t?{}:t,r=e.map,o=e.position,a=e.content,u=e.icon,l=e.extData,c=e.id,f=e.events,d=void 0===f?[]:f,p=new AMap.Marker(i()({},s,n,{map:r,position:o,content:a,icon:u,extData:l}));for(var h in c&&(p.$$lhpid=c),d)p.on(h,d[h]);return p}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n.n(r),s={name:"LhpAmapCluster",props:{features:{type:Array,default:function(){return[]}},options:Object,map:{required:!0},visible:{type:Boolean,default:!0},gently:Boolean},data:function(){return{hasReload:!1}},watch:{features:function(e){this.debouncedFeatures(e)},visible:function(e){this.$$cluster.setMap(e?this.map:null),e&&this.hasReload&&(this.$$cluster.setMarkers(this.features),this.hasReload=!1,this.debouncedFeatures(void 0,!0))}},methods:{sortCluster:function(e){if(this.$$cluster)if(this.visible)if(e=e.filter(function(e){return e}),this.gently){if(0===e.length)return void this.$$cluster.clearMarkers();var t={};e.forEach(function(e){return t[e._amap_id]=!0});var n=this.$$cluster.getMarkers(),r={};n.forEach(function(e){return r[e._amap_id]=!0});var i=n.filter(function(e){return!t[e._amap_id]}),s=e.filter(function(e){return!r[e._amap_id]});this.$$cluster.removeMarkers(i),this.$$cluster.addMarkers(s)}else this.$$cluster.setMarkers(e);else this.hasReload=!0}},created:function(){var e=this;this.map.plugin(["AMap.MarkerClusterer"],function(){var t=new AMap.MarkerClusterer(e.map,[],e.options);e.$$cluster=t,e.$nextTick(function(){e.$$cluster.setMarkers(e.features),e.visible||e.$$cluster.setMap(null)})}),this.debouncedFeatures=i()(100,function(t,n){void 0===t||n||e.sortCluster(t)})},destroyed:function(){this.$$cluster.setMap(null)}},o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},a=n(1)(s,o,!1,null,null,null).exports;a.install=function(e){e.component(a.name,a)},t.default=a},function(e,t){e.exports=require("throttle-debounce/debounce")},,,,,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),s=n(8);t.a={components:{LhpAmapCluster:s.default},props:{value:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},map:{required:!0},props:{type:Object,default:function(){return{}}},disabled:Boolean,alone:Boolean,gently:Boolean,markerOptions:{type:Object,default:function(){return{}}},clusterOptions:{type:Object,default:function(){return{}}},unvisibleIds:{type:Array,default:function(){return[]}},events:Object},data:function(){return{features:{},visible:this.value,isAlone:!1,aloneList:[]}},watch:{value:function(e){this.visible=e},visible:function(e){this.$emit("input",e)}},computed:{defaultProps:function(){return i()({id:"id",content:"content",position:"position"},this.props)},listObj:function(){var e=this,t={};return this.data.forEach(function(n){t[n[e.defaultProps.id]]=n}),t},unvisibleIdsObj:function(){var e={};return this.unvisibleIds.forEach(function(t){e[t]=!0}),e}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},toggle:function(){this.visible?this.hide():this.show()},setAlone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.alone&&(this.isAlone=!0,this.aloneList=e)},clearAlone:function(){this.alone&&(this.isAlone=!1,this.aloneList=[])}}}},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),i=n(5),s={name:"LhpAmapLayerMass",mixins:[r.a],computed:{clusterFeatures:function(){var e=this;return this.data.filter(function(t){return!e.unvisibleIdsObj[t[e.defaultProps.id]]}).map(function(t){return e.getMarker(t)})},aloneFeatures:function(){var e=this;return this.aloneList.filter(function(t){return!e.unvisibleIdsObj[t[e.defaultProps.id]]}).map(function(t){return e.getMarker(t)})}},methods:{getMarker:function(e){var t=e[this.defaultProps.id];if(this.features[t])return this.features[t];var n=Object(i.a)({options:this.markerOptions,position:e[this.defaultProps.position],content:e[this.defaultProps.content],extData:e,id:t,events:this.events});return this.features[t]=n,n}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("lhp-amap-cluster",{ref:"cluster",attrs:{features:e.clusterFeatures,map:e.map,options:e.clusterOptions,gently:e.gently,visible:!e.disabled&&!e.isAlone&&e.visible}}),e._v(" "),e.alone?n("lhp-amap-cluster",{ref:"clusterAlone",attrs:{features:e.aloneFeatures,map:e.map,options:e.clusterOptions,visible:!e.disabled&&e.isAlone}}):e._e()],1)},staticRenderFns:[]},a=n(1)(s,o,!1,null,null,null).exports;a.install=function(e){e.component(a.name,a)},t.default=a}])});