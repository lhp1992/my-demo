!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lhp-amap/lib/units/lodash"));else if("function"==typeof define&&define.amd)define(["lhp-amap/lib/units/lodash"],t);else{var n=t("object"==typeof exports?require("lhp-amap/lib/units/lodash"):e["lhp-amap/lib/units/lodash"]);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}("undefined"!=typeof self?self:this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/lib/",t(t.s=25)}([function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){e.exports=function(e,t,n,i,r,o){var s,a=e=e||{},u=typeof e.default;"object"!==u&&"function"!==u||(s=e,a=e.default);var l,c="function"==typeof a?a.options:a;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId=r),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=i),l){var f=c.functional,d=f?c.render:c.beforeCreate;f?(c._injectStyles=l,c.render=function(e,t){return l.call(t),d(e,t)}):c.beforeCreate=d?[].concat(d,l):[l]}return{esModule:s,exports:a,options:c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(3),s=(n.n(o),{default:{all:{cursor:"pointer",strokeColor:"#1791fc",strokeOpacity:.8,strokeWeight:2,fillColor:"#1791fc",fillOpacity:.35},polyline:{lineJoin:"round",lineCap:"round"}},editor:{all:{fillColor:"red",fillOpacity:.3,strokeOpacity:1,strokeWeight:3,strokeColor:"red",strokeStyle:"dashed"}}});t.default={set:function(e,t){return Object(o.set)(s,e,t)},get:function(e,t){return Object(o.get)(s,e,t)},getOptions:function(e){return r()({},this.get("default.all",{}),this.get("default."+e,{}))},getEditor:function(e){return r()({},this.get("editor.all",{}),this.get("editor."+e,{}))}}},function(t,n){t.exports=e},,function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2).default.getOptions("marker");t.a=function(e){var t=e.options,n=void 0===t?{}:t,i=e.map,s=e.position,a=e.content,u=e.icon,l=e.extData,c=e.id,f=e.events,d=void 0===f?[]:f,p=new AMap.Marker(r()({},o,n,{map:i,position:s,content:a,icon:u,extData:l}));for(var h in c&&(p.$$lhpid=c),d)p.on(h,d[h]);return p}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r={name:"LhpAmapMarker",props:{id:void 0,position:void 0,content:void 0,icon:void 0,options:{type:Object,default:function(){return{}}},extData:void 0,events:{type:Object,default:function(){return{}}},map:void 0,feature:void 0},watch:{position:function(e,t){this.$$feature.setPosition(e)},content:function(e){this.$$feature.setContent(e)},icon:function(e){this.$$feature.setIcon(e)},extData:function(e){this.$$feature.setExtData(e)},map:function(e){this.$$feature.setMap(e)}},created:function(){if(this.feature)return this.$$feature=this.feature,void this.$emit("onCreated",this.$$feature);var e=Object(i.a)({options:this.options,map:this.map,position:this.position,content:this.content,icon:this.icon,extData:this.extData,id:this.id,events:this.events});this.$$feature=e,this.$emit("onCreated",this.$$feature)},destroyed:function(){this.$$feature.emit("destroyed",this),this.$emit("onDestroyed",this.$$feature),this.$$feature.setMap(null)}},o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},s=n(1)(r,o,!1,null,null,null).exports;s.install=function(e){e.component(s.name,s)},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n.n(i),o={name:"LhpAmapCluster",props:{features:{type:Array,default:function(){return[]}},options:Object,map:{required:!0},visible:{type:Boolean,default:!0},gently:Boolean},data:function(){return{hasReload:!1}},watch:{features:function(e){this.debouncedFeatures(e)},visible:function(e){this.$$cluster.setMap(e?this.map:null),e&&this.hasReload&&(this.$$cluster.setMarkers(this.features),this.hasReload=!1,this.debouncedFeatures(void 0,!0))}},methods:{sortCluster:function(e){if(this.$$cluster)if(this.visible)if(e=e.filter(function(e){return e}),this.gently){if(0===e.length)return void this.$$cluster.clearMarkers();var t={};e.forEach(function(e){return t[e._amap_id]=!0});var n=this.$$cluster.getMarkers(),i={};n.forEach(function(e){return i[e._amap_id]=!0});var r=n.filter(function(e){return!t[e._amap_id]}),o=e.filter(function(e){return!i[e._amap_id]});this.$$cluster.removeMarkers(r),this.$$cluster.addMarkers(o)}else this.$$cluster.setMarkers(e);else this.hasReload=!0}},created:function(){var e=this;this.map.plugin(["AMap.MarkerClusterer"],function(){var t=new AMap.MarkerClusterer(e.map,[],e.options);e.$$cluster=t,e.$nextTick(function(){e.$$cluster.setMarkers(e.features),e.visible||e.$$cluster.setMap(null)})}),this.debouncedFeatures=r()(100,function(t,n){void 0===t||n||e.sortCluster(t)})},destroyed:function(){this.$$cluster.setMap(null)}},s={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},a=n(1)(o,s,!1,null,null,null).exports;a.install=function(e){e.component(a.name,a)},t.default=a},function(e,t){e.exports=require("throttle-debounce/debounce")},,,,,,function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(8);t.a={components:{LhpAmapCluster:o.default},props:{value:{type:Boolean,default:!0},data:{type:Array,default:function(){return[]}},map:{required:!0},props:{type:Object,default:function(){return{}}},disabled:Boolean,alone:Boolean,gently:Boolean,markerOptions:{type:Object,default:function(){return{}}},clusterOptions:{type:Object,default:function(){return{}}},unvisibleIds:{type:Array,default:function(){return[]}},events:Object},data:function(){return{features:{},visible:this.value,isAlone:!1,aloneList:[]}},watch:{value:function(e){this.visible=e},visible:function(e){this.$emit("input",e)}},computed:{defaultProps:function(){return r()({id:"id",content:"content",position:"position"},this.props)},listObj:function(){var e=this,t={};return this.data.forEach(function(n){t[n[e.defaultProps.id]]=n}),t},unvisibleIdsObj:function(){var e={};return this.unvisibleIds.forEach(function(t){e[t]=!0}),e}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},toggle:function(){this.visible?this.hide():this.show()},setAlone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.alone&&(this.isAlone=!0,this.aloneList=e)},clearAlone:function(){this.alone&&(this.isAlone=!1,this.aloneList=[])}}}},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),r=n.n(i),o=n(15),s=n(7),a={name:"LhpAmapLayer",mixins:[o.a],components:{LhpAmapMarker:s.default},data:function(){return{cacheFeatures:{}}},computed:{clusterFeatures:function(){var e=this;return r()(this.features).filter(function(t){return!e.unvisibleIdsObj[t.$$lhpid]})},aloneFilterList:function(){var e=this;return this.aloneList.filter(function(t){return!e.listObj[t[e.defaultProps.id]]})},aloneFeatures:function(){var e=this;return this.aloneList.filter(function(t){return!e.unvisibleIdsObj[t[e.defaultProps.id]]}).map(function(t){return e.cacheFeatures[t[e.defaultProps.id]]})}},methods:{onCreated:function(e,t){this.$set(this.features,t,e),this.cacheFeatures[t]||this.$set(this.cacheFeatures,t,e)},onCreatedAlone:function(e,t){this.cacheFeatures[t]||this.$set(this.cacheFeatures,t,e)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("lhp-amap-cluster",{ref:"cluster",attrs:{features:e.clusterFeatures,map:e.map,options:e.clusterOptions,gently:e.gently,visible:!e.disabled&&!e.isAlone&&e.visible}}),e._v(" "),e._l(e.data,function(t){return n("lhp-amap-marker",{key:t[e.defaultProps.id],attrs:{feature:e.cacheFeatures[t[e.defaultProps.id]],id:t[e.defaultProps.id],position:t[e.defaultProps.position],content:t[e.defaultProps.content],"ext-data":t,options:e.markerOptions,events:e.events},on:{onCreated:function(n){return e.onCreated(n,t[e.defaultProps.id])},onDestroyed:function(){return e.$delete(e.features,t[e.defaultProps.id])}}})})],2),e._v(" "),e.alone?n("div",[n("lhp-amap-cluster",{ref:"clusterAlone",attrs:{features:e.aloneFeatures,map:e.map,options:e.clusterOptions,visible:!e.disabled&&e.isAlone}}),e._v(" "),e._l(e.aloneFilterList,function(t){return n("lhp-amap-marker",{key:t[e.defaultProps.id],attrs:{id:t[e.defaultProps.id],feature:e.cacheFeatures[t[e.defaultProps.id]],position:t[e.defaultProps.position],content:t[e.defaultProps.content],"ext-data":t,options:e.markerOptions,events:e.events},on:{onCreated:function(n){return e.onCreatedAlone(n,t[e.defaultProps.id])},onDestroyed:function(){return e.$delete(e.aloneFeatures,t[e.defaultProps.id])}}})})],2):e._e()])},staticRenderFns:[]},l=n(1)(a,u,!1,null,null,null).exports;l.install=function(e){e.component(l.name,l)},t.default=l},function(e,t){e.exports=require("babel-runtime/core-js/object/values")}])});