_jsload_('AMap.CitySearch', 'g.G9=g.aa.extend({ja:[g.sa],r:function(a){this.CLASS_NAME="AMap.CitySearch";g.c.va(this,a);this.M=a||{};this.url=g.A.Rd+"/v3/ip"},getLocalCity:function(a){g.c.add(this,"getLocalCity");var b=["key="+g.A.key,"s=rsv3"],b=this.url+(0<b.length?"?"+b.join("&"):""),b=new g.fb.vb(b,{callback:"callback"});b.g("complete",function(b){this.Fc(b,a)},this);b.g("error",function(b){this.ec(b,a)},this)},getCityByIp:function(a,b){g.c.add(this,"getCityByIp");if(a){var c=["ip="+a,"key="+g.A.key,"s=rsv3"],c=this.url+ (0<c.length?"?"+c.join("&"):""),c=new g.fb.vb(c,{callback:"callback"});c.g("complete",function(a){this.Fc(a,b)},this);c.g("error",function(a){this.ec(a,b)},this)}else b&&"function"===typeof b&&b("error","NO_PARAMS")},ec:function(a,b){z.event.O(this,"error",a);b&&"function"===typeof b&&b("error",a.info)},Fc:function(a,b){var c;parseInt(a.status,10)?a.city&&"string"===typeof a.city&&a.rectangle&&"string"===typeof a.rectangle?(c=a.rectangle.split(";"),c=c[0].split(",").concat(c[1].split(",")),c=g.extend({}, a,{bounds:new g.me(c[0],c[1],c[2],c[3])}),z.event.O(this,"complete",c),b&&"function"===typeof b&&b("complete",c)):(c={info:"ok"===a.info.toLowerCase()?"NO_DATA":a.info},z.event.O(this,"complete",c),b&&"function"===typeof b&&b("no_data",{})):(c={info:a.info},z.event.O(this,"error",c),b&&"function"===typeof b&&b("error",a.info))}});window.AMap.CitySearch=g.G9; ')