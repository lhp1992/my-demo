_jsload_('vectorlayer', 'g.Tj={J8:function(){0===g.Da.xe&&g.Tj.K3()},kGa:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].jk===b)return!0},Yla:function(a,b){var c="limg-"+a.key+"-"+b.h.dc;g.Da.rj[c]&&delete g.Da.rj[c]},K2:function(a){return g.Da.rj[a.jk?a.jk:a]},am:function(a,b){var c=null,d=null,e=!1,f=g.Da.rj;a.jk?(c=a,d=c.jk,(a=c.url)&&(e=!0)):d=a;var h=f[d];e&&h&&h.src!==a&&(h=f[d]=null);if(!h){var e=function(a){this.zI(a);g.a.Eh(b)&&b(!0,{FI:a.target})},k=function(a){this.J3(a);g.a.Eh(b)&&b(!1, {FI:a.target})};if(a){var l="data:"===a.substr(0,5),h=document.createElement("img");l||(h.crossOrigin="Anonymous");f[d]=h;h.loaded=!1;g.Da.xe+=1;g.F.oj(h,"load",e,this);g.F.oj(h,"error",k,this);var m=this;h.xq=g.a.wf();l||void 0!==this.mP||(this.mP=setInterval(function(){if(0===g.Da.xe||0===g.Da.Cq.length)clearInterval(m.mP),m.mP=void 0;else{var a=g.a.wf(),b=g.Da.rj,c=!1,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];!e.loaded&&!e.timeout&&300<=a-e.xq&&(c=e.timeout=!0)}c&&m.K3()}},100));h.src=a; c&&(h.LAa=d)}}},K3:function(){for(var a=0;a<g.Da.Cq.length;a+=1)g.Da.Cq[a].set("display")},x1:function(a){g.F.G(a,"load",this.zI,this);g.F.G(a,"error",this.J3,this)},zI:function(a){a=a.target;a.loaded=!0;g.Da.xe-=1;this.x1(a);this.J8()},J3:function(a){a=a.target;a.loaded=!1;g.Da.xe-=1;this.x1(a);this.J8()}};g.o.Uh=g.o.Tb.extend({r:function(a,b,c){this.Dl=c;g.Da.Cq.push(this);this.dc=g.a.X2("layer");this.Za=2;a.get("textRatio");this.hV=25;this.W("tiles",a);this.Vxa=a.get("vdataUrl")||b.D.get("vdataUrl")||g.A.EK;this.pi=!0;this.U=a;this.rk=g.l.Z?!1:!0;this.e=b;this.Mi=this.Li=!0;this.Qe("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.Qe("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.W("lang", b,!0);this.get("watermark")&&(this.KK=new Image,this.KK.src=this.get("watermark"));this.CK="v4";this.ta={};this.Ll={};this.zd=256;this.ev=[];this.mf=this.Yf=0;this.ia=g.l.ia&&this.get("detectRetina");this.zd=256*(this.ia?2:1);this.W("mapStyle",b);this.W("style",b);this.Bp=0;this.W("features",b);this.We=18;this.W("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.ke=!!this.e.get("showBuildingBlock");this.featuresChanged()},featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload"); this.U.ys()},Zja:function(){var a=!1,b=this.$X();if(b){if(this.Ji){var c="active"===this.Ji.JA;b.nA(this.Ji);c&&(b.qt(this.Ji,"active"),a=!0)}g.l.Sla&&!a&&b.NG()}},fA:function(){this.Zja()},lE:function(a,b){var c=!0;if("hotspotout"===a)this.e.D.set("optimalCursor",null);else if("hotspotover"===a)this.e.D.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.$X();if(d)switch(a){case "hotspotout":d.SG(b);break;case "hotspotover":d.qt(b,"hover");break;case "mouseup":d.qt(b, "hoverup");break;case "mousedown":d.qt(b,"active")}c&&(c=b.wa,c=new g.H(c[0],c[1]),c=this.e.Qd(c,3),this.e.D.q(a,{name:b.name,lnglat:c,id:b.qs,isIndoorPOI:b.v4}))},$X:function(){if(!g.l.W3){var a=this.N||this.$f;if(!a)return null;var b=this.e?this.e.D.get("hotspotOptions"):{},b=g.extend({},b);if(b.disableHighlight)return null;this.xB||(this.xB=new g.o.Uh.T$(a));return this.xB}},Wq:function(a){(a=this.g3(a))&&this.lE("hotspotclick",a)},ex:function(a){var b="mousemove"===a.type;if(!this.e.Xg||!b){var c= this.g3(a);c&&c.$l||(c=null);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.Ji!==c&&(this.Ji&&this.lE("hotspotout",this.Ji),this.lE("hotspotover",c)),!c&&this.Ji&&this.lE("hotspotout",this.Ji),c&&!b&&this.lE(a.type,c)}this.Ji=c}},textIndexChanged:function(){this.set("display")},cta:function(){this.e.g("click",this.Wq,this);this.e.g("mousemove",this.ex,this);this.e.g("mousedown",this.ex,this);this.e.g("mouseup",this.ex,this)},qP:function(){this.e.G("click",this.Wq,this);this.e.G("mousemove", this.ex,this);this.e.G("mousedown",this.ex,this);this.e.G("mouseup",this.ex,this)},qo:function(){return null},te:function(){var a=this.Qu?null:this.e.D.get("forceZooms");return{pi:!0,zd:256,visible:this.get("visible"),lb:a||this.get("zooms"),mH:this.rk&&this.Ja,Li:!this.e.sK,Mi:!this.e.sK,opacity:this.get("opacity"),Mc:!1,hd:this.mo()}},Gl:function(a){if(g.N.canvas.Uh)return new g.N.canvas.Uh(this,a)},UB:function(a){0===a.indexOf("amap://styles/")&&(a="normal");var b=this.get("forceBig")||g.l.Z&& !this.ia?"6":"5";this.url=g.A.Cc+"://"+this.Vxa+"/tiles?mapType="+a+"&v="+(g.Je?3:2)+"&style="+b;this.url+=this.ia?"&rd=2":"&rd=1";this.url+="&flds="+this.ha;this.url+="&t="},styleChanged:function(){this.e.od||this.featuresChanged()}}); g.o.md=g.o.Uh.extend({Gl:function(a){var b=this;if(!b.KK&&g.l.xf&&"vw"===b.e.get("baseRender")){var c=["wgl"];this.e.od&&c.push("wgl2");if(g.qb.WC(c))return new g.N.Ne.md(b,a)}else if(c=["cgl"],this.e.od&&c.push("cgl2"),g.qb.WC(c))return new g.N.canvas.md(b,a);g.qb.Lg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.Dl:a&&(-1!==g.a.indexOf(a,"bg")&&-1!==g.a.indexOf(this.Dl,"region")&&b.push("region"),-1!==g.a.indexOf(a,"building")&&-1!== g.a.indexOf(this.Dl,"building")&&b.push("building"),-1!==g.a.indexOf(a,"road")&&-1!==g.a.indexOf(this.Dl,"road")&&b.push("road"));this.ha=b;this.UB(this.get("mapStyle")||"normal");this.set("reload")}});g.o.gaa=g.o.md.extend({r:function(){this.ph(arguments);this.We=this.Ao=17;this.ha=["building"];this.ke=!0;this.UB(this.get("mapStyle")||"normal");this.Qu=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); g.o.Bj=g.o.Uh.extend({Gl:function(a){this.Jg=!0;var b=this;if(this.xR()){if(this.zz=!0,g.N.canvas.uL)return this.f1(),a=new g.N.canvas.uL(this,a),a.g("afterLabelRender",this.fA,this),a}else{b.zz=!1;if(g.N.canvas.tL)return a=new g.N.canvas.tL(this,a),a.g("afterLabelRender",this.fA,this),a;g.qb.Lg(["labelcanvas"],function(){b.set("display")})}},xR:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")?!1:g.l.zz?!0:!1},nqa:function(){var a=this.get("mapStyle"); return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")||g.l.Mc||g.l.Z?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==g.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==g.a.indexOf(a,"point")&&c.push("poilabel"));a=this.xR();c.length&&(a||this.nqa())&&c.unshift("limg");this.ha=c;this.UB(b);this.set("reload");(b=this.N||this.$f)&&a^this.zz&&(this.xB&&(this.xB=this.xB.N=null),b.G("afterLabelRender",this.fA, this),b.Lj(),this.$f=this.N=null)},f1:function(){this.Wu=g.A.Cc+"://"+(this.U.get("vdataUrl")||this.e.D.get("vdataUrl")||g.A.EK)+"/limg?";var a=this.ia?2:1;this.Wu+="&font="+(g.l.Z&&!this.ia?"big":"small");this.Wu+="&scl="+a;this.Wu+="&t="},g3:function(a){return a.Uf?(a=this.S2(this.e.hc(a.Uf,20),!0))?a[0]:null:null},S2:function(a,b){var c=this.e.nI();if(c&&(c=c.Du(this)))return c.ko(a,b)}});g.o.Uh.T$=g.aa.extend({r:function(a){this.Eja(a)},Eja:function(a){this.N=a},SG:function(a){if(a.JA){a.JA=!1;var b=this.N;b&&b.SG.apply(b,arguments)}},nA:function(a){a.JA=!1;var b=this.N;b&&b.nA.apply(b,arguments)},qt:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.JA!==b){a.JA=b;var c=this.N;c&&c.qt.apply(c,arguments)}},NG:function(){var a=this.N;a&&a.NG()}});g.o.xw=g.aa.extend({r:function(){this.Za=2;this.hV=g.l.El?16:12;this.uva={road:0,region:0,building:1,poilabel:1,roadlabel:1};this.Hv=[new g.dg,new g.dg,new g.dg,new g.dg,new g.dg,new g.dg,new g.dg];this.Xxa=[{type:"roadlabel",show:!0,oi:1},{type:"poilabel",show:!0,oi:1},null,{type:"region",show:!0,oi:0},{type:"road",show:!0,oi:0},{type:"building",show:!0,oi:0},null];this.Bp=0},Nx:function(a,b,c,d,e){if("first"!==b){c&&(c.Ed=d);var f;switch(e){case "roadlabel":f=0;break;case "poilabel":f=1;break;case "labels":f= 2;break;case "region":f=3;break;case "road":f=4;break;case "building":f=5;break;case "allbase":f=6}d=this.Hv[f].Fxa;c&&c.we&&(d=this.Hv[f].push);"groupcomplete"===b?d.call(this.Hv[f],["groupcomplete",f,c,a]):"tileComplete"===b?d.call(this.Hv[f],["co",7,c,a]):(d.call(this.Hv[f],["co",f,c,a]),""!==b&&d.call(this.Hv[f],[b,f,c,a]));this.Bp>f&&(this.Bp=f);this.mwa()}},k6:function(){var a=new Date,b=!1;do if(b=this.parse(),new Date-a>=this.hV)break;while(!b);this.c6=b?null:g.a.Qc(this.k6,this)},mwa:function(){this.c6|| (this.c6=g.a.Qc(this.k6,this))},Lma:function(){return document.createElement("canvas")},parse:function(){var a,b=!1,c=this.Bp,d=this.Hv[this.Bp];if(d.Qk())6===c&&(b=!0),this.Bp=(this.Bp+1)%7;else{a=d.Asa();var e=a[3],f=e.ia?512:256;if("groupcomplete"===a[0])e.set("display",0);else{var h=a[2];if(e.ta.Wc(h.key))if("co"===a[0])if(3===a[1])this.QS(e,h,f),h.qa.region&&e.Xa.SJ(h.qa.region,0,h.ra.z);else if(4===a[1])this.QS(e,h,f),h.qa.road&&e.Xa.a7(h.qa.road,h.ra.z);else if(5===a[1]&&h.qa&&h.qa.building)a= g.yj&&g.yj.u4(e.e.D),e.ke?h.ff=h.qa.building:(this.QS(e,h,f),e.Xa.SJ(h.qa.building,1,h.ra.z,void 0,a));else{if(7===a[1]){h.Ke&&(e.KK&&0===(h.ra.x+h.ra.y)%2&&h.Ke.getContext("2d").drawImage(e.KK,0,0),h.Wka=!0,g.l.SC&&(f=new Image,f.src=h.Ke.toDataURL(),h.Ke=f));if(h.gn){h.gn.Re=null;h.yi=null;f=e.e.Bc;if(e.$f&&f.$f){c=f.$f.oH(f.$f.ga,h.gn);c.dc=f.$f.dc;f={Qi:c,tagName:"CANVAS",width:h.gn.width,height:h.gn.height};c=0;for(a=h.ha.length;c<a;c+=1)for(var k=h.ha[c],l=0,m=k.Da.length;l<m;l+=1)k.Da[l]== h.gn&&(k.Da[l]=f);h.ha.Jwa=!0}h.gn=null}h.Bsa||(h.Ja=h.xa=!0);e.set("display")}}else g.p$.Dta(h,a[0],this.Xxa[a[1]].type,e)}d.Qk()&&(6===c&&(b=!0),this.Bp=(this.Bp+1)%7)}return b},QS:function(a,b,c){a.Xa||(a.Xa=new g.N.canvas.md.$c(a),a.Xa.J=a.e.J);var d=1;18==b.ra.z&&(d=a.U.get("map",null,!0).get("zooms")[1],d=Math.pow(2,18-d));b.Ke||(b.Ke=this.Lma(),b.Ke.width=b.Ke.height=c/d,b.Wka=!1);b.Ke&&(a.Xa.Qa=b.Ke,a.Xa.sg=d,a.Xa.Kc=1/d)}});g.o.xw.ni=new g.o.xw;g.ww={RB:function(a,b){this.e.D.Qp&&(this.gg={},this.gg.bDa=g.a.ub(this.gg),b.Dc||(b.Dc=g.HV()),this.Dc=b.Dc,this.Dc.g("tiles",this.rD,this),this.Dc.g("ack",this.qD,this),this.Dc.g("disable",this.oD,this))},Exa:function(){this.e.D.Qp&&(this.gg=null,this.Dc&&(this.Dc.G("tiles",this.rD,this),this.Dc.G("ack",this.qD,this),this.Dc.G("disable",this.oD,this),this.Dc=null))},ux:function(){if(!1===this.e.D.get("workerMode"))return!1;g.pk.j4||this.vY(g.pk);g.zc.j4||(this.vY(g.zc),g.zc.CR&&z.event.yx(this.e.D, "complete",function(){g.zc.CR()}));if(this.Jg&&!this.vo&&g.pk.Zxa||this.vo&&g.pk.qra||!this.vo&&!this.Jg&&this.pi&&g.zc.f4)return!0},vY:function(a){a.jf(null,{Je:g.Je});a.j4=!0},Bfa:function(a){g.a.Rb(a,function(a){g.Tj.am(a)})},Ry:function(a){if(this.h&&a.VR===this.h.dc){this.Ze||this.Mg?this.iB([this.h,"groupcomplete",null,null,"allbase"]):(this.Nj(),this.Sn.Nx(this.h,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Ic.length;b<c;b+=1)this.sD(a.Ic[b],a.Ey,a.gq,a.Z)}},sD:function(a,b){var c= a.vd,d=this.ta.get(a.Ai);if(d){var e=this.h.ha,f="";(this.e.gm&&!this.e.od||this.Lqa&&this.e.od)&&this.mQ(c,a.Ma,a.tg.z);"poilabel"===c||"roadlabel"===c?(a.qd||(f=a.Ma,a.qd=null),d.ha||(d.ha=[]),d.ha.push.apply(d.ha,a.Ma),c===this.h.ha[this.h.ha.length-1]&&(d.qd=null)):d.qa[c]=a.Ma;"building"!==c&&"poilabel"!==c||!a.dn||d.ae||(d.ae={},d.ae.ff=a.dn,g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:d}));if("roadlabel"!==c&&"poilabel"!==c||this.o4||!g.l.g2&&!this.e.od)this.Ze||this.Mg?this.iB([this.h,f,d,b, c]):(this.Nj(),this.Sn.Nx(this.h,f,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.Ze||this.Mg?this.iB([this.h,"tileComplete",d,b,c]):(this.Nj(),this.Sn.Nx(this.h,"tileComplete",d,b,c)))}},qF:function(){if(this.e){var a=this.e.D.getMapStyle();this.gs=a;this.ffa(a);this.Dc&&this.Dc.D4()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:g.l.Z&&!this.h.ia?"6":"5",rd:this.h.ia?2:1}},this.ux()?(g.zc.Cla(a,g.a.ns),this.Dc.lDa()|| this.Dc.close()):this.Dc.send(a))}},mapStyleChanged:function(){this.qF()},styleChanged:function(){this.qF()},oD:function(){for(var a in this.gg)this.gg.hasOwnProperty(a)&&this.gg[a].Eb&&(this.tl(this.gg[a].Eb,this.gg[a].Ed),delete this.gg[a]);this.Dc=null;this.hl("mapStyle");this.set("display",1)},qD:function(a){var b=a.reqId;this.gg[b]&&(!a.content.status&&this.gg[b]&&this.tl(this.gg[b].Eb,this.gg[b].Ed),delete this.gg[b])},rD:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.uB())&&this.gg[b]){var c= a.content.opt,d=this.gg[b].Eb[0];c!==this.bb&&!d.we||d.we&&2<(this.uB()||Math.abs(c-this.bb))?this.tl(this.gg[b].Eb,this.gg[b].Ed):this.ps(a.content.data,c)}},C0:function(a,b){if(g.Aj){var c=a.uf,c={"x-vd-v":c.Se,tv:c.Dh,bgc:this.e.pe,vdataVersion:c.Df,url:this.fy(a.Ed,[]),o:this.h,ke:this.e.D.get("showBuildingBlock")};b?a.Eb.length&&(c.qd=!0,c.data=g.a.map(a.Eb,function(a){return{key:a.key,data:JSON.stringify({key:a.key,qd:a.qd,ha:a.ha,ae:a.ae})}})):this.HU||(c.xf=!!this.mj,c.Ic=this.mj||this.pi? a.cu:a.data.Ic);g.Aj.set(c)}},bS:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(this.Jg&&"zh_cn"!==this.lang)for(var d=0;d<a.length;d+=1)a[d].status="loaded",a[d].xa=!0;else{var e=[],f=this;this.Gia(a,b,g.a.bind(function(a,d){var f=this;if(d.length){for(var m=0,n=d.length;m<n;m++){var p=d[m].ra,q=p.x,r=p.y,p=p.z;if(10>p){var s=Math.pow(2,p);if(q>=s||0>q)q=(q+s)%s}q=g.a.OH(q,r,p).join(",");g.a.ja(e,q)||e.push(q)}if(this.ux())if(m=this.rda({Qwa:d,we:c,Ed:b,xq:e}),m.IAa= (new Date).getTime(),this.Jg)g.pk.kh(m,function(a,c){if(f.e)if(c.C4){var d=c.Eb.map(function(a){return f.ta.get(a.key)}).filter(function(a){return a});f.tl(d,b)}else c.Rk&&f.EG(),f.vo?(g.a.Rb(c.Eb,function(a){this.ta.set(a.key,a);a.qd&&!a.qd.loaded&&(g.Tj.am(a.qd),a.qd.loaded=!0);a.ae&&a.ae.ff&&g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:a})},f),f.set("display"),f.C0(c,!0)):(g.a.Rb(c.Eb,function(a){var b=this.ta.get(a.key);b&&(b.status=a.status,a.L&&a.L.Da&&this.Bfa(a.L.Da))},f),c.data&&f.Ry(c.data))}); else{var u=g.zc.c5;this.e.D.Ja&&!g.zc.lna&&this.e.D.Qp||(u=g.zc.kh);this.qF();u(m,function(a,c){if(f.e){if(c.C4){var d=c.Eb.map(function(a){return f.ta.get(a.key)}).filter(function(a){return a});f.tl(d,b)}if(u===g.zc.c5){if(c.disabled){g.zc.lna=!0;f.set("display");return}if(c.oka)return}c.Rk&&f.EG();c.data&&(f.e.pe!==c.$t&&(f.e.pe=c.$t),g.a.Rb(c.Eb,function(a){var b=this.ta.get(a.key);b&&(b.status=a.status)},f),f.C0(c),c.data&&f.Ry(c.data))}})}else!this.Jg&&this.Dc&&this.Dc.D4()?this.e.D.get("workerMode")? this.eG(d,b,e,c):(1>this.Dc.wa.length||3<this.Lt?this.eG(d,b,e,c):((2===this.Dc.wa.length||this.Dc.MI())&&this.qF(),this.Dfa(d,b,e,c)),this.Dc.xFa(this.Dc.wa.length+1),this.Dc.Q4&&this.Dc.OAa(Math.ceil((new Date-this.Dc.Q4)/1E3)),this.Dc.Q4=new Date):this.eG(d,b,e,c)}},this));window.renderDelay&&(this.QJ=setTimeout(function(){f.jJ&&f.set("display",!1);f.jJ=!1;f.QJ=null},window.renderDelay))}},ffa:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.HU=!0:this.HU=!1},Gia:function(a,b, c){var d=g.Aj;if(d&&!this.HU&&18>=b){var e=this,f=this.e,h=f.D;f.ZC||void 0!==f.WI||("dv"===h.get("baseRender")?f.WI=1:f.WI=2);d.get({type:h.Ja?"NFS":"FS",ke:this.h.Qu||this.h.ke,Lwa:a,xf:!!this.mj,o:this.h,url:this.fy(b,[]),timeout:1E3},function(d,h){if(e.h){if(d)return c(null,a);h.t5.length&&c(null,h.t5);if(h.qR.length)if(h.qR.length===a.length&&(f.ZC&&(f.WI--,e.EG()),e.e.D.Ja||e.Jg||e.TC||e.e.iT()),h.Ic){e.Se=h.uf["x-vd-v"];e.Dh=h.uf.tv;var m=h.uf.bgc;e.e.pe!==m&&(e.e.pe=m);g.a.forEach(h.qR,function(a){a.status= "loaded"});e.g6(h.Ic,b)}else h.Y4&&(g.a.forEach(h.Y4,function(a){var b=e.ta.get(a.key);if(b){b.status="loaded";b.ae=a.ae;if(a.qd){b.qd=a.qd;b.ha=a.ha;var c="limg-"+a.key+"-"+e.h.dc;b.qd.jk=c;b.ha&&(g.a.forEach(b.ha,function(a){a.Da&&g.a.forEach(a.Da,function(b,d){b&&0===b.indexOf("limg-")&&(a.Da[d]=c)})}),g.Tj.am(b.qd),b.qd.loaded=!0)}b.ae&&b.ae.ff&&g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:b});b.xa=b.Ja=!0;e.ta.set(a.key,b)}}),e.set("display"))}})}else c(null,a)},Dfa:function(a,b,c,d){if(!d||!this.uB()){var e= [(new Date).getTime(),this.Dc.wa.length+1&65535,d?1:0].join("-"),f={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.h.ha.join(","),v:g.Je?"3":"2"}}},h;if(!this.Dc.MI()){var k=this;setTimeout(function(){k.Dc&&!k.Dc.MI()&&(k.Lt?k.Lt++:k.Lt=1,k.Dc.Mna(h)&&(delete k.gg[e],k.eG(a,b,c,d)))},300)}h=this.Dc.send(f);this.gg[e]={Eb:a,Ed:b}}},tS:function(a){if(!a.Ja||a.we)a.status="",a.Ja=void 0,a.xa=null,a.Ke=null,this.ta.Sv(a.key)},rda:function(a){var b=a.Qwa,c=a.Ed,d=a.xq;a=a.we;var e=+new Date+ "_"+Math.random();return{dc:e,$t:this.e.pe,od:this.e.od,Jg:this.Jg,vo:this.vo,ke:this.h.ke,Mqa:!!g.Je,Bi:this.J.type,xf:this.mj,UR:this.h.dc,ha:this.h.ha,Mc:this.h.ia,Za:this.h.Za,dR:Math.ceil(this.Yj.oy),Eb:g.a.filter(b,function(a){return"loaded"!==a.status}),Ed:c,xq:d,we:a,url:this.fy(c,d,b)+"&_id="+e,nh:this.UX(c,[]),PDa:this.e.D.Ja}},UX:function(a,b){return{FR:"3D"===this.J.type,bP:this.h.ke,or:g.A.or||null,eBa:this.h.get("businessIconsID"),Se:this.Se,od:this.e.od,Dh:this.Dh,aDa:this.h.get("iconsID"), VR:this.h.dc,Ey:a,ry:this.h.ry,Vf:!this.h.mo()&&this.h.U.get("merge"),Ic:b,Z:this.h.get("forceBig")||g.l.Z,Bi:this.J.type,mode:this.h.get("mode"),mua:g.A.Cc,e7:this.h.get("forceBig")?1:this.h.Za,gq:this.h.get("forceBig")?!1:this.h.ia,Bx:this.h.get("forceBig")||g.l.Z&&!this.h.ia?1:0}},tA:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},g6:function(a,b){if(a.length){var c=this,d=null;this.mj?(d= g.zc,d=d.parseDataToWebGL):d=this.Jg?g.pk.parseLabel:g.zc.parseDataToVector;var e=c.UX(b,a);e.Je=g.Je;d(e,function(a,b){if(c.h&&!a){var d=b.icons;if(d)for(var e=0;e<d.length;e+=1)g.Tj.am(d[e]);b.data&&c.Ry(b.data)}})}},ps:function(a,b,c){if(this.h){for(var d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.Se=h["x-vd-v"],this.Dh=h.tv,this.Df=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.e.pe!==h&&(this.e.pe=h))):this.pD(h,b,d))}this.g6(d,b)}},pD:function(a, b,c){function d(d,e,f){e=[f,d,e].join("/");18<b&&!l.mj&&(e+="/"+b);if((d=l.ta.get(e))&&"loaded"!==d.status)if(l.w8(d,p)||d.we){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.qd=e,"string"===typeof e.b&&(e.b=l.tA(e.b)),f="",f="object"===typeof e.u?e.u.url:e.u)d={url:f,jk:"limg-"+d.key+"-"+l.h.dc},e.u=d,g.Tj.am(d)}else{e={tg:d.ra,Ai:e,Ma:a,vd:m,ry:l.h.ry,Ex:l.e.pe,TC:"building"===m,oi:"poilabel"===m||"roadlabel"===m||"building"===m&&l.h.ke};if("poilabel"===m||"roadlabel"===m)e.qd=d.qd;m===n[n.length- 1]&&(d.status="loaded");c.push(e)}}else l.LT(b,d,p,g.a.bind(l.tS,l))}var e=a[0].split("-"),f=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.h.ha,p=18<b?Math.pow(2,b-18):1,e=l.Yj.oy,q=Math.pow(2,k);10>k&&(f<=e&&d(f+q,h,k),f>=q-e&&d(f-q,h,k));d(f,h,k)},iB:function(a){this.Rt||(this.Rt=[]);this.Rt.push(a)},Nj:function(){if(this.Rt&&this.Rt.length){for(var a=0,b=this.Rt.length;a<b;a+=1)this.Sn.Nx.apply(this.Sn,this.Rt[a]);this.Rt=[]}},tl:function(a,b){for(var c=18<b?Math.pow(2, b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.LT(b,e,c,g.a.bind(this.tS,this));18<b&&this.ta.Sv(e.key+"/"+b)}g.Aj&&g.Aj.Sv({Eb:a,url:this.fy(b,[]),o:this.h,xf:!!this.mj,ke:this.h.ke})},fy:function(a,b,c){return this.h.url+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].we?1:0)},Yda:function(){var a=this.h.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},EG:function(){this.e.ZC||g.oe.$e.end({key:this.Yda(),index:0,id:this.e.D.id})},eG:function(a,b,c){function d(a,c){var d= a.split("|");d[0]=c+d[0];var e=d,f="";d[d.length-1]&&(f=d[d.length-1],e=d.splice(0,d.length-1));k.ps(e,b,!0);return f}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=new XMLHttpRequest;f.OD=[(new Date).getTime(),e?1:0].join("-");var e=this.fy(b,c,a),h=0,k=this;f.dq="";f.onreadystatechange=function(){if(k.h&&!(2>f.readyState)){var c=4===f.readyState&&0===f.status;b!==k.bb&&c&&!f.it?(f.it=!0,k.tl(a,b),f.onreadystatechange="",c||f.abort()):f.it||(3===f.readyState?(c=f.responseText.substring(h), f.dq=d(c,f.dq),h=f.responseText.length):4===f.readyState&&(k.EG(),c=f.responseText.substring(h),k.Jg&&(c+="|"),d(c,f.dq),f.dq="",k.e.D.Ja||g.oe.$e.push({id:k.e.D.id,key:"ds",rf:f.responseText.length/2})))}};f.onerror=function(){};this.Xpa||(this.Xpa=1);f.open("GET",e,!0);f.send()},w8:function(a,b){var c=this.aw||this.Yj,d=a.ra.x,e=a.ra.y;return d>Math.floor(c.Hc/b)||d<Math.floor(c.Jc/b)||e>Math.floor(c.vc/b)||e<Math.floor(c.fc/b)?!1:!0},LT:function(a,b,c,d){d(b)}};g.N.canvas.Bj=g.N.Gi.extend({ja:[g.ww],r:function(a,b){arguments.callee.ka.apply(this,arguments);this.dc=g.a.ub(this);this.Cn=300;this.We=a.We;this.Jg=this.pi=!0;this.W("mapStyle",a.e);this.W("style",a.e);this.vo=!0;this.ox=1;var c=this;this.nY=function(){c.D5=!0;c.set("display",0)};this.Gg();this.YR(a)},YR:function(a){a=g.l.Z||a.ia?"big":"small";var b=g.A.Cc+"://localhost:8888/style_icon/icon-biz-"+a+".png";g.Tj.am(g.A.Cc+"://localhost:8888/style_icon/icon-normal-"+a+".png");g.Tj.am(b)},uA:function(a){g.Tj.Yla(a, this);var b=g.N.canvas.Bj.Sc.uA;b&&b.apply(this,arguments)},Gg:function(){this.Cm=document.createElement("canvas");this.Cm.className="amap-labels";this.Cm.draggable=!1;this.Cm.y4=!0;this.wk=this.Cm.getContext("2d",{alpha:!0});this.R4=[];this.Rr=10},sv:function(a){var b=Math.pow(2,a.R.zoom-this.ze),c=this.h.ia?this.h.Za:1,d=a.R.nb.$a(this.as).dd(this.sg);this.transform={translate:this.transform.translate.add(d.Gd(c)),scale:b/c,rotate:0};this.nb=a.R.nb},$y:function(a,b){this.Ka=this.J.Ka;this.he=!1; this.currentTime=+new Date;this.JU=b.JU;this.Yd=[this.Ga.Zb.x,this.Ga.Zb.y];this.rk=b.mH;var c=this.Tg;this.Ze=this.zoom<<0!==this.zoom;var d=this.nb.$a(this.Ka);d.x<-g.a.Ca/2&&(d.x+=g.a.Ca);d.x>g.a.Ca/2&&(d.x-=g.a.Ca);this.hP=d.dd(this.sg);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var f=e[0].ra.z,h=!1;if(e.ig&&!g.Da.xe&&("stable"==this.Ff||f<=this.zoom&&"zoomIn"===this.Ff||f>=this.zoom&&"zoomOut"===this.Ff)&&(!this.labels||!this.labels.length||this.TI||a.Tk||!this.FD(this.labels.el,this.Yj)|| this.GI(a)||this.Qf!==a.Qf)){h=!0;h=[];a.Qf&&(h.push.apply(h,a.Qf),this.Qf=a.Qf);a.wb.length?(h.push.apply(h,a.wb),this.st=a.wb.dP):this.st=null;for(var k=e.length-1;0<=k;k-=1){var l=e[k],m=!1,n=l.ha;!n&&l.Sb&&l.Sb.ha&&(n=l.Sb.ha,m=!0);if(n)for(var p=0,l=n.length;p<l;p+=1){n[p].reverse=m;var q=!1,r=n[p].wa;this.st&&g.a.Rb(this.st,function(a){!q&&g.wd.Nd(r,a.zf[0].wa)&&(q=!0)});q||h.push(n[p])}}e=[];k={};if(h.length)for(m=0,l=h.length;m<l;m++)h[m].id in k||(k[h[m].id]=1,e.push(h[m]));e.zoom=f;this.hS(e); e.sort(function(a,b){return a.zIndex!==b.zIndex?a.zIndex>b.zIndex?-1:1:!a.Be^!b.Be?a.Be?1:-1:a.Be==b.Be?a.id==b.id?a.Le==b.Le?a.name<b.name?-1:1:a.Le>b.Le?-1:1:a.id<b.id?-1:1:a.Be>b.Be?-1:1});this.labels=e;this.labels.el=this.Yj;this.TI=!1}}}if(this.kP(a)){this.Md();if(!this.e.D.Ja)return;this.oT(a);this.hh=this.labels}this.D5=!1;this.De(a)},hS:function(a){this.labels&&this.labels.opacity||(this.labels=[],this.labels.opacity={});for(var b={},c=0;c<a.length;c+=1){var d=a[c].id;d&&(d in this.labels.opacity? (b[d]=this.labels.opacity[d],delete this.labels.opacity[d]):b[d]=0,a[c].jj=!0)}for(var c=0,e=this.labels.length;c<e;c+=1)d=this.labels[c].id,this.labels.opacity[d]&&(a.push(this.labels[c]),b[d]=this.labels.opacity[d],this.labels[c].jj=!1);a.opacity=b},Md:function(){if(this.ig&&!this.h.Ja){var a=this.h;g.oe.$e.end({id:this.e.D.id,key:"rl",index:2});a.Ja=!0;a.Dd?a.na("renderComplete"):(a.Dd=!0,a.na("complete"))}},kc:function(a,b){this.lang=a.lang;this.gs=a.gs;this.Zs=a.Zs;this.Ho(a,b);this.Ze||this.Nj(); this.as&&(a.D8||a.lU&&g.l.El||a.Mg&&!a.Ze&&a.cla)?this.sv(a,b):this.$y(a,b);this.as=this.nb;this.he&&this.set("display",0);this.TR=this.Ff},De:function(a){var b=this.nb.$a(this.Ka);b.x<-g.a.Ca/2&&(b.x+=g.a.Ca);b.x>g.a.Ca/2&&(b.x-=g.a.Ca);this.transform={translate:new g.H(a.R.Ga.tc.x*(this.h.ia?this.h.Za:1),a.R.Ga.tc.y*(this.h.ia?this.h.Za:1)),scale:1/(this.h.ia?this.h.Za:1),rotate:0}},FD:function(a,b){return a.fc===b.fc&&a.Jc===b.Jc&&a.vc===b.vc&&a.Hc===b.Hc},ko:function(a,b){var c;if(this.zoom){var d= a.dd(Math.pow(2,20-this.zoom));this.labels&&(c=this.Zoa(d,b))&&(c.v4=!1);!c&&this.wb&&(c=this.Yoa(d))&&(c.v4=!0)}return c?[c]:[]},Zoa:function(a,b){for(var c=a.x,d=a.y,e=this.labels.DDa||this.labels,f=e.length-1;0<=f;f-=1){var h=e[f],k=h.wa[0]/this.S,l=h.wa[1]/this.S;if((h.qs||!b)&&this.r4(h,c,d,k,l))return h}},Yoa:function(a){var b=a.x;a=a.y;for(var c=this.wb.length-1;0<=c;c-=1){var d=this.wb[c],e=d.wa[0]/this.S,f=d.wa[1]/this.S;if(d.qs&&this.r4(d,b,a,e,f))return d}},r4:function(a,b,c,d,e){for(var f= 0;f<a.Ta.length;f+=1){var h=a.Ta[f][2],k=a.Ta[f][3],l=a.Ta[f][0],m=a.Ta[f][1];this.h.ia&&(h/=this.h.Za,k/=this.h.Za,l/=this.h.Za,m/=this.h.Za);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.h&&(this.h.Ja=!1);this.ta.count&&(this.ta.clear(),g.Aj&&g.Aj.clear());this.labels=[];this.R4=[];this.Lb&&this.Lb.parentNode&&this.Lb.parentNode.removeChild(this.Lb);this.Cm&&this.Cm.parentNode&&this.Cm.parentNode.removeChild(this.Cm);this.set("display")},hj:function(){return this.Cm}, mQ:function(a,b,c){if("roadlabel"===a||"poilabel"===a)for(a=0;a<b.length;a+=1){var d=b[a];if(d.sc){var e="",f="",h="";d.ld&&(h=d.ld[0],e=h[3],f=h[4],h=d.lj?"":h[7]);if(e=this.J.hy&&this.J.hy(e,f,h,d.sc,d.ou,c))d.visible=e[4],d.ek=e[3];if(d.ld)for(f=0;f<d.ld.length;f+=1)h=d.ld[f],h[3]=e[0],h[4]=e[1],d.$l&&(h[7]=e[2])}}}});g.vL={fy:function(a,b,c){return this.h.Wu+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].we?1:0)},ps:function(a,b){if(this.h){for(var c=[],d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.Se=h["x-vd-v"],this.Df=[h.tv||"",h.vdv].join("-"),this.Dh=h.tv,this.e.pe="#"+h.bgc.substring(2)):(h=this.pD(h,b,c,this.Se||"v4"))&&d.push(h))}this.set("display")}},Wy:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.S;return[(c+a[0])*e,(d+a[1])*e]},pD:function(a,b,c,d,e){function f(c, f,m){c=[m,c,f].join("/");if(c=q.ta.get(c)){f=c.ra;var n="3D"==q.J.type?0:-3;if(c&&"loaded"!==c.status)if(q.w8(c,u)||c.we){if(-1!==s.indexOf(r))if("limg"===r)a[1]&&(c.qd={url:"data:image/png;base64,"+a[1],jk:"limg-"+c.key+"-"+q.h.dc},g.Tj.am(c.qd));else{if("roadlabel"===r)for(var p=1;p<a.length;p+=1){var x=a[p],A=g.a.Rv(x[1],d);if(!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){var B=q.Wy(A,f),A={margin:0,z:m,zIndex:9E3,wa:B,name:x[0],lj:!0,Na:A,Da:[],Ta:[],visible:!0,ek:!0};A.id="roadlabel_"+g.a.ub(A);A.jq= 15>x[2]%90||75<x[2]%90?90*Math.floor((x[2]+15)/90):x[2];B=x[3];0<=x[8]&&(A.yG={name:x[6],q8:x[7],dir:x[8]});var G=B[2],H=B[3],n=-Math.floor(H/2);if(x[4]){A.Tu=!0;var I=x[5].split(":"),M=I[1],M=parseInt(M)-1,I=g.A.Cc+"://localhost:8888/style_icon/icon-normal-"+(k||l?"big":"small")+".png";A.Da.push(I);var I=Math.floor(M/10),L=M%10,O=0,K=0,D=0;l?(O=48,D=K=40):k?(O=K=40,D=36):(O=K=24,D=20);var Q=O*Math.max(G+2,D)/D,I=[-Q/2,-O/2,Q,O,K*L,K*I,K,K];A.Le=7;A.Ta.push(I)}A.Da.push(c.qd.jk);A.Le=11;A.Ta.push([-Math.floor(G/ 2),n,G,H,B[0],B[1],B[2],B[3]]);c.ha||(c.ha=[]);c.ha.push(A)}}else if("poilabel"===r){for(var P=[],p=1;p<a.length;p+=1)if(x=a[p],A=g.a.Rv(x[1],d),!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){B=q.Wy(A,f);A={id:x[4],margin:n,zIndex:9001,wa:B,name:x[0].replace("^",""),$l:!0,Na:A,Da:[],Ta:[],visible:!0,ek:!0};A.id||(A.id="poilabel_"+g.a.ub(A));M=0;A.Be=x[8];x[6]&&(I=x[6].split(":"),M=I[1],H=Math.floor((parseInt(I[0].split("_")[1])-28)/2));if(M&&x[3]){I=g.A.Cc+"://localhost:8888/style_icon/icon-"+(1===H?"biz-": "normal-")+(k||l?"big":"small")+".png";A.Da.push(I);M=parseInt(M)-1;I=Math.floor(M/10);L=M%10;l?(O=48,K=40,D=28):k?(O=K=40,D=28):(O=K=24,D=20);Q=O;if(151===M||152===M||153===M)D-=4,G=x[7][0][2],Q=O*Math.max(G+2,D)/D;I=[-Q/2,-O/2,Q,O,K*L,K*I,K,K];A.Ta.push(I)}if(x[2]&&x[7])for(G=x[2],I=0;I<x[2].length;I+=1)A.Da.push(c.qd.jk),B=x[7][I],l&&!e&&(G[I][0]=Math.round(G[I][0]*v),G[I][1]=Math.round(G[I][1]*v),G[I][2]=Math.round(G[I][2]*v),G[I][3]=Math.round(G[I][3]*v)),L=G[I][0],O=G[I][1]-(l?4:2),K=B[3],D= B[2],L<-D&&M&&x[3]&&(L=-D+A.Ta[0][0]),L-=2,A.Le=K-4,4===m&&"\\u5317\\u4eac"===A.name&&(O=l?-50:-26),A.Ta.push([L,O,D,B[3],B[0],B[1],B[2],B[3]]);A.Wr=x[5];A.Wr&&P.push(A.Wr);A.qs=x[4];A.si=x[9];A.o5=x[10];A.Rf=M;A.Ku=H;c.ha||(c.ha=[]);c.ha.push(A)}c.ae||(c.ae={},c.ae.ff=P,g.wj&&g.wj.q("vecTileParsed.buildings",{Qo:c}))}r===s[s.length-1]&&(c.status="loaded",h=c,c.Ja=c.xa=!0)}}else q.LT(b,c,u,g.a.bind(q.tS,q))}}var h=null,k=g.l.Z,l=this.h.ia,m=a[0].split("-");1===m.length&&(m=a[0].split("_"));c=parseInt(m[1]); var n=parseInt(m[2]),p=parseInt(m[0]),q=this,r=m[3],s=this.h.ha,u=18<b?Math.pow(2,b-18):1,m=Math.ceil(q.Yj.oy),v=this.h.ia?this.h.Za:1,x=Math.pow(2,p);10>p&&(c<=m&&f(c+x,n,p),c>=x-m&&f(c-x,n,p));f(c,n,p);return h}};g.N.canvas.uL=g.N.canvas.Bj.extend({ja:[g.vL]});g.N.canvas.Bj.zb({oT:function(a){this.ox++;var b=this.Cm,c=this.wk;this.ny={};var d=this.h.ia?this.h.Za:1;this.ah=d;var e;0!==a.R.rotation?(e=2*Math.floor(a.R.Ga.tc.x)*d,d*=2*Math.floor(a.R.Ga.tc.y)):(e=a.size.width*d,d*=a.size.height);g.j.dm(b,e,d,!0);g.l.Tla&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.Qj=0;this.labels&&this.NS(this.labels);this.labels&&this.Vua(this.labels,c,g.yj.hpa(this.e.D),this.ad,e,d);this.O4=[];this.labels&&(this.labels.Oo=this.zoom,this.labels.No= this.nb,this.labels.fq=this.rotation,this.labels.TJ=this.h.ia,this.labels.size=a.size);a.wb&&(this.wb=a.wb);this.wb&&(this.wb.Oo=this.zoom,this.wb.No=this.nb,this.wb.fq=this.rotation,this.wb.size=a.size);this.q("afterLabelRender")},Uua:function(a,b,c){var d=void 0===b.ek?!0:b.ek,e=1,f=void 0===b.visible?!0:b.visible,h=null;if(b.sc&&this.e.od){var k=h="",l="";b.ld&&b.ld.length&&this.QP&&(l=b.ld[0],h=l[3],k=l[4],l=b.lj?"":l[7]);if(h=this.J.hy&&this.J.hy(h,k,l,b.sc,b.ou))f=h[4],d=h[3],e=h[5]}if(f){if(this.wk.globalAlpha!== c||e)this.wk.globalAlpha=c||e;f=0;for(k=b.Da.length;f<k;f+=1)(d||"CANVAS"===b.Da[f].tagName)&&this.xna(a,b.Da[f],b.Ta[f],b.jq,c||e);this.wk.globalAlpha!==c&&(this.wk.globalAlpha=c);b.ld&&this.QP&&(b.dj?this.zna(a,b,h):b.ld.length&&this.QP(a,b,h))}},xna:function(a,b,c,d){var e=this.wk;b=this.lo(b);if(!b)return 1;var f=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length? b.loaded&&e.drawImage(b,k,a,f,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,f,h);0!==d&&e.setTransform(1,0,0,1,0,0)},lo:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=g.Tj.K2(a))&&a.loaded)return a},tI:function(a,b){var c=a[0];b&&(c>g.a.Ca/2?c-=g.a.Ca:c<-g.a.Ca/2&&(c+=g.a.Ca));return this.gu(c,a[1])},gu:function(a,b){var c=this.h.ia?this.h.Za:1,d=this.S,e=0,f=0,e=(a-this.Yd[0])/d,f=(b-this.Yd[1])/d;return[Math.round(e*c),Math.round(f*c)]},W2:function(a,b){var c=a[0];b&&(c> g.a.Ca/2?c-=g.a.Ca:c<g.a.Ca/2&&(c+=g.a.Ca));return[c/this.S,a[1]/this.S]},kra:function(a,b){var c=a.wa;return c[0]>b.Fd.x||c[1]>b.Fd.y||c[0]<b.Zb.x||c[1]<b.Zb.y?!1:!0},yCa:function(a){var b=this.O4;if(this.O4.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.$l&&this.kra(e,a.R.Ga)&&(this.R4.push(e),e.zoom=b.zoom,e.$Ca=new Date)}},Np:function(a,b){var c=this.W2(a.wa,a.reverse);if(a.$l)return this.a4(c,a,b);if(a.lj){var d=!1,e=a.wa;if(a.dj){var f=Math.pow(2,20-this.zoom),h=20*f, c=[],k=[],l=[],m=!0;for(g.Ev.font=a.tq+"px "+a.font;m;){for(var n=[],p=[],q=!0,r=0;r<a.name.length;r+=1){var s=g.Ev.measureText(a.name[r]).width/this.ah*f,u=g.zj.JO(e,s/2+h),h=h+s;if(!u){m=q=!1;break}if(s=this.wR(this.W2(u),5,b))p.push(s),n.push(u);else{q=!1;break}}h+=256*f;q&&(k.push.apply(k,n),c.push.apply(c,p))}if(k.length){d=!0;for(r=0;r<k.length;r+=1)f=k[r][2],f=(new g.H(e[f+1][0]-e[f][0],e[f+1][1]-e[f][1])).direction(),l.push(360-f);a.WR=k;a.pra=l}return d?c:!1}return a.Ym?this.a4(c,a,b):this.zoom< a.z?!1:!0}},NS:function(a){function b(b){a.opacity[b]<1-e?(a.opacity[b]+=e,d.he=1,d.Qj=1):a.opacity[b]=1}function c(b){a.opacity[b]>e?(a.opacity[b]-=e,d.he=1,d.Qj=1):a.opacity[b]=0}var d=this,e=0.34;if(!a.CE||"stable"==this.Ff&&"stable"!=this.TR){for(var f=0,h=a.length;f<h;f+=1){var k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id;if(k.jj){var m=this.Np(k);m?(this.Po(m),k.Fg=!0,b(l)):(k.Fg=!1,c(l))}else l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l])}a.CE=!0}else if("zoomIn"== this.Ff){f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj?k.Fg&&(m=this.Np(k,!0),this.Po(m),b(l)):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l]);f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj&&!k.Fg&&((m=this.Np(k))?(this.Po(m),k.Fg=!0,b(l)):(k.Fg=!1,c(l)))}else if("zoomOut"==this.Ff||a.zoom>this.zoom)for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj?k.Fg?(m=this.Np(k))?(this.Po(m),k.Fg=!0,b(l)):(k.Fg= !1,c(l)):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l]);else for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.Ym||g.l.Z?1:0.34,l=k.id,k.jj?k.Fg?b(l):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Qj=this.he=1):delete a.opacity[l]);return!1},Vua:function(a,b,c,d,e,f){d=!1;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.lj||k.ap&&c&&0<=c.indexOf(k.ap))){var l=this.tI(k.wa,k.reverse);-256>l[0]||l[0]> e+256||-256>l[1]||l[1]>f+256||a.opacity[k.id]&&this.Uua(l,k,a.opacity[k.id])}}},GI:function(a){if(a.wb&&a.wb.length)if(this.wb&&this.wb.length){if(this.wb!==a.wb||this.wb.Oo!==this.zoom||this.wb.No!==this.nb||this.wb.fq!==this.rotation||!this.wb.size.cb(a.size))return!0}else return!0;else if(this.wb&&this.wb.length)return!0},kP:function(a){this.hh&&this.hh.TJ!==this.h.ia&&this.h.set("reload");return this.Qj||this.GI(a)||this.labels&&(this.e.sQ||this.labels!==this.hh||!this.hh||this.hh.Oo!==this.zoom|| this.hh.No!==this.nb||a.Tk||this.hh.fq!==this.rotation||this.hh.TJ!==this.h.ia||!this.hh.size.cb(a.size))?!0:!1},a4:function(a,b,c){var d,e=b.Ta.length,f=[];if(b.si>this.zoom)d=!0;else for(var h=0;h<e;h+=1){var k=b.Ta[h];if(!k[8]){var l=k[2],m=k[3],n=k[0],k=k[1];this.h.ia&&(l/=2,m/=2,n/=2,k/=2);var p=b.margin,n=n-p,k=k-p,l=l+2*p,m=m+2*p,n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Rr),m=Math.ceil((k+m)/this.Rr),n=Math.floor(n/this.Rr),k=Math.floor(k/this.Rr);(m=c?[n,l,k,m]:this.b4(n,k,l,m))?f.push(m): d=!0}}return d?!1:f},wR:function(a,b,c){var d=a[0]-b/2;a=a[1]-b/2;var e=Math.ceil((d+b)/this.Rr);b=Math.ceil((a+b)/this.Rr);d=Math.floor(d/this.Rr);a=Math.floor(a/this.Rr);return c?[d,e,a,b]:this.b4(d,a,e,b)},Po:function(a){for(var b=0;b<a.length;b+=1)for(var c=a[b][0],d=a[b][2],e=a[b][3],f=0,h=a[b][1]-c;f<=h;f+=1)for(var k=0,l=e-d;k<=l;k+=1)this.ny[c+f]||(this.ny[c+f]={}),this.ny[c+f][d+k]=1},b4:function(a,b,c,d){for(var e=0,f=c-a;e<=f;e+=1)if(this.ny[a+e])for(var h=0,k=d-b;h<=k;h+=1){if(1===this.ny[a+ e][b+h])return!1}else this.ny[a+e]={};return[a,c,b,d]}});g.N.canvas.Bj.e$=g.aa.extend({r:function(a){this.N=a},Dja:function(a){this.gs=a;return this.jO([0,0,0])?!0:this.gs=!1},HY:function(){return this.N.Ze?!1:!0},xea:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.Aea.apply(this,b);case "label":return this.Bea.apply(this,b);default:console.error("Unknown type",a)}}},QX:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},Yja:function(a){return 0>a?0:255< a?255:Math.round(a)},p0:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.Yja(a[b+c]);return a},iO:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},tja:function(a){return[255-a[0],255-a[1],255-a[2]]},jO:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.gs){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},Cea:function(a,b){var c=20,d=10;switch(b.ro){case "active":c+=20,d+=20}return this.iO(this.jO(a,c),d)},lY:function(a,b){var c=-110;switch(b.ro){case "active":c+=30}return this.iO(this.jO(this.tja(a),c),50)},zea:function(a){return this.iO(a,20)},kY:function(a, b,c,d,e,f){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],f),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.p0(c,d)},Ida:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,f=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.IM(k,l,c,a);if(!(76.5>b[m+3])){e++;k<f[0]&&(f[0]=k);l<f[1]&&(f[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{kya:0<e? d/e:0,oma:[f[0],f[1],h[0]-f[0]+1,h[1]-f[1]+1]}},IM:function(a,b,c){return b*c+a},LG:function(a,b,c,d,e,f,h){var k=this.IM(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.r5||h.l8&&!h.l8.call(this,d,e,l,a))return!1;f.push([b,c]);return!0},tia:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},gx:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},Nja:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var f=a[d];this.tia(f, c[c.length-1])<=b&&c.push(f)}return this.gx(c[c.length-1],a[a.length-1])?c:null},DAa:function(){},Kba:function(a,b,c,d){d=g.extend({r5:0.2,m5:4},d);var e,f,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(f=0;f<b&&!this.LG(a,f,e,b,c,h,d);f++);for(f=b-1;0<=f&&!this.LG(a,f,e,b,c,k,d);f--);}if(!h.length||!k.length)return null;for(f=0;f<b;f++){var n;e=h[0][0];n=k[0][0];if(f>=e&&f<=n)for(e=0;e<c&&!this.LG(a,f,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(f>=e&&f<=n)for(e=c-1;0<=e&&!this.LG(a,f,e,b, c,m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.gx(l[l.length-1],k[0])&&this.gx(k[k.length-1],m[0])&&this.gx(m[m.length-1],h[0])&&this.gx(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.Nja(b[e],d.m5),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},jda:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var f=a[d][0], h=a[d][1];b[0]>f&&(b[0]=f);b[1]>h&&(b[1]=h);c[0]<f&&(c[0]=f);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},bY:function(a,b){this.g0||(this.g0=document.createElement("canvas"));var c=this.g0;c.width=a;c.height=b;return c},Pda:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},uX:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},zW:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.uX(e))):a[this.Pda(e)].apply(a,this.uX(e))}},sda:function(a){a=this.lY([255,255,255],{ro:a.ro});this.p0(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},yea:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=g.extend({ro:"hover",L0:!0,padding:[1.5,1.5]},c);var e=a.width,f=a.height,h=this.bY(2*e+10,f),k=h.getContext("2d"), l=this.jda(b),m=c.padding;g.l.Mc&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.zW(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,f,0,0,e,f);a=c.L0&&10<b.length;var u=c.strokeStyle||this.sda(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=g.l.Mc?2:1.2;k.stroke();k.restore();return{xa:h,ci:[0,0,e,f],Md:a?function(a,c){this.Pja(a,c,b,u)}:null}},Pja:function(a,b,c,d){this.Oba();var e=this.N.ox;this.pW(a,c,{duration:200,HS:0,startTime:Date.now(),Iva:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=g.l.Mc?2:1;a.translate(b[0],b[1])},lya:function(){return this.N.ox!==e}})},Oba:function(){this.JL&&g.a.fi(this.JL)},pW:function(a,b,c,d){this.HY()?this.JL= g.a.Qc(function(){this.JL=null;if(c.lya.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var f=Math.round(b.length*e);if(c.HS<f){var h=1===e?b:b.slice(c.HS,f+1);h.length&&(a.save(),c.Iva.call(this,a,e),this.zW(a,h),a.stroke(),a.restore());c.HS=f}1>e?this.pW(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},Zba:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,f=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n= 4*this.IM(c,m,e,f),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},vfa:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},Xea:function(a,b,c){for(var d=1/c,e=[],f=1;f<c;f++){var h=this.vfa(a,b,d*f);e.length&&this.gx(h,e[e.length-1])||e.push(h)}return e},Yea:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],f=a[c];2===f.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.Xea(e,f,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},Tda:function(a, b,c,d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.Yea(a,5);return a},Aea:function(a,b,c,d,e,f){b=a.ci;var h=c?c.zR:this.QX(d,e,b);if(h){var k=c?c.O3:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.Zba(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.N.e)&&c.D?c.D.get("hotspotOptions"): {};c=g.extend({borderAnimation:!0},c);l=this.Ida(l);a=!a.Wqa&&0.46<=l.kya;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.lY:this.zea,u=0,v=d.length;u<v;u+=4)this.kY(d,u,e,u,s,{ro:f});if(m&&(e=a&&!g.l.Mc?this.Kba(d,b,q,{l8:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,r5:0.2,m5:4}):null,e||(e=l.oma,e=this.Tda(e[0],e[1],e[2],e[3],0.2)),e)){var x=this.yea(r,e,{ro:f,fillStyle:"active"!==f?null:"#ddd",oJ:h,L0:c.borderAnimation&&"hover"===f&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{oJ:h, Zy:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(x.xa,x.ci[0],x.ci[1],x.ci[2],x.ci[3],b[0],b[1],b[2],b[3]);x.Md&&(x.Md.call(this,a,b),x.Md=null)}}}return{oJ:h,Zy:function(a,b){if(m){var c=this.bY(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},Bea:function(a,b,c,d,e,f){a=a.ci;if(c=c?c.zR:this.QX(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.kY(d,a,e,a,this.Cea,{ro:f});return{oJ:c,Zy:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},dY:function(a,b,c){var d=c[2],e=c[3],f=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.BY){if((b=this.N.lo(b))&&b.loaded)return c=[4,4],g.l.Mc&&(c[0]*=2,c[1]*=2),{type:"icon",Wqa:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,ci:[f-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",ci:[f,a,d,e]}}}); g.N.canvas.Bj.zb({OX:function(){this.RM||(this.RM=new g.N.canvas.Bj.e$(this));return!1===this.RM.Dja(this.gs)?null:this.RM},qt:function(a,b){var c=this.OX();if(c&&c.HY()&&a&&a.Da&&a.Ta&&0===this.rotation){var d=this.ox,e=this.tI(a.wa),f=[],h;a.Zq||(a.Zq=[]);var k=a.Zq;for(h=a.Ta.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].O3===b)continue}var l=c.dY(e,a.Da[h],a.Ta[h]);if(l){var m=c.xea(l,a,k[h],this.Cm,this.wk,b);m&&(k[h]={O3:b,rev:d,zR:m.oJ},f.push({Zy:m.Zy,ci:l.ci,CD:"icon"===l.type? 2:1}))}}f.sort(function(a,b){return a.CD-b.CD});h=0;for(d=f.length;h<d;h++)f[h].Zy.call(c,this.wk,f[h].ci),f[h].Zy=null}},nA:function(a){a.Zq&&(a.Zq.length=0,a.Zq=null)},NG:function(){var a=this.wk;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},SG:function(a){if(a&&a.Da&&a.Ta&&a.Zq){var b=this.wk,c=this.OX();if(c){for(var d=this.ox,e=this.tI(a.wa),f=a.Zq,h=0,k=a.Ta.length;h<k;h++){var l=f[h];if(l&&(f[h]=null,d===l.rev)){var m=c.dY(e,a.Da[h],a.Ta[h]);m&&m.ci&&b.putImageData(l.zR,m.ci[0], m.ci[1])}}a.Zq=null;this.ox++}}}});g.jw={g:function(a,b,c,d,e){if(this.ee(a,b,c||this))return this;var f=this.af=this.af||{};f[a]=f[a]||[];e?f[a].unshift({sb:b,Re:c||this,oj:d}):f[a].push({sb:b,Re:c||this,oj:d});"complete"===a&&this.Ja&&this.q(a);return this},ee:function(a,b,c){var d=this.af;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].sb===b&&d[a][e].Re===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},G:function(a,b,c){if(!this.ee(a))return this;var d=this.af;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].sb!==b&&"mv"!==b||c&&d[a][e].Re!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},nJ:function(a,b){if(!this.ee(a))return this;var c=this.af;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].Re===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},q:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,f;d=0;for(e=b.length;d<e;d+=1)for(c in f=b[d]||{},f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c]);return a}if(!this.ee(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.af[a]),f=0;f<e.length;f+=1)e[f].sb&&(e[f].sb.call(e[f].Re||this,d),e[f]&&e[f].oj&&this.af[a]&&this.af[a].splice(f,1));return this},hi:function(a){a?this.af&&this.af[a]&&(this.af[a]=null):this.af=null;return this}};(function(){if(!g.pk){g.pk=g.QK();var a=g.a.EC({Wy:"posToCoord",tA:"_decodeBoundsList"});g.pk.jf(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+g.vL.Wy.toString()+",\\n      "+a._decodeBoundsList+": "+g.ww.tA.toString()+"\\n  }"));g.pk.jf(null,function(){return{ub:function(){var a=0;return function(c){c._amap_label_id_||(a+=1,c._amap_label_id_=a);return c._amap_label_id_}}(),ps:function(a,c){a.nh.Je||(a.nh.Je=this.Je);a.vo?this.Rsa.call(this,a,c):this.Ssa.call(this,a,c)},Ssa:function(a, c){for(var d=a.sE,e=a.Rk,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.GR&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Se=a.nh.Se=l["x-vd-v"],this.Df=a.nh.Df=[l.tv||"",l.vdv].join("-"),this.Dh=a.nh.Dh=l.tv):this.Qsa(this.extend({},a,{gC:l,Ic:f})))}f.length?this.parseLabel(this.extend({},a.nh,{Ic:f}),function(d,f){var h=f.data,k=f.hqa;c(d,{dc:a.dc,Eb:a.Eb.filter(function(a){return"loaded"===a.status}),data:h,hqa:k,Rk:e,uf:{Se:a.nh.Se,Df:a.nh.Df,Dh:a.nh.Dh,Ed:a.Ed}},{Zp:!e,Jk:e})}):c(null,{dc:a.dc,data:null, Rk:e},{Zp:!e,Jk:e})},Qsa:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key===n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=f[1],a.qd=b,"string"===typeof b.b&&(b.b=u.tA(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,jk:"limg-"+a.key+"-"+e});else{b={tg:a.ra,Ai:n,Ma:f,vd:v,TC:"building"===v,oi:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.qd=a.qd;v===l[l.length- 1]&&(a.status="loaded");k.push(b)}}var d=a.Eb,e=a.UR,f=a.gC,h=a.Ed,k=a.Ic,l=a.ha,m=a.xf,n=a.dR,p=a.ke,q=f[0].split("-");a=parseInt(q[1]);var r=parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},Rsa:function(a,c){for(var d=a.sE,e=a.Rk,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.GR&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Se=a.nh.Se=l["x-vd-v"],this.Df=a.nh.Df=[l.tv||"",l.vdv].join("-"),this.Dh=a.nh.Dh=l.tv):this.Psa(this.extend({},a,{gC:l, Ic:f,Se:this.Se||"v4"})))}d=a.Eb.filter(function(a){return"loaded"===a.status});if(d.length)for(f=a.Eb.length-1;0<=f;f--)"loaded"===a.Eb[f].status&&a.Eb.splice(f,1);c(null,{dc:a.dc,yBa:[],Eb:d,Rk:e,uf:{Se:a.nh.Se,Df:a.nh.Df,Dh:a.nh.Dh,Ed:a.Ed}},{Zp:!e,Jk:e})},Psa:function(a){function c(a,b,c,f){var l=[f,b,c].join("/");if(a=a.filter(function(a){return a.key===l})[0])if(b=a.ra,a&&"loaded"!==a.status&&-1!==k.indexOf(w))if("limg"===w)p[1]&&(a.qd={url:"data:image/png;base64,"+p[1],jk:"limg-"+a.key+"-"+ n});else{if("roadlabel"===w)for(c=1;c<p.length;c+=1){var m=p[c],v=d.Rv(m[1],q);if(!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){var u=t.Wy(v,b),v={margin:0,z:f,zIndex:9E3,wa:u,name:m[0],lj:!0,Na:v,Da:[],Ta:[],visible:!0,ek:!0};v.id="roadlabel_"+d.ub(v);v.jq=15>m[2]%90||75<m[2]%90?90*Math.floor((m[2]+15)/90):m[2];u=m[3];0<=m[8]&&(v.yG={name:m[6],q8:m[7],dir:m[8]});var x=u[2],L=u[3],O=-Math.floor(L/2);if(m[4]){v.Tu=!0;var K=m[5].split(":"),D=K[1],D=parseInt(D)-1,K=r.Cc+"://localhost:8888/style_icon/icon-normal-"+ (s||h?"big":"small")+".png";v.Da.push(K);var K=Math.floor(D/10),Q=D%10,P=0,J=0,N=0;h?(P=48,N=J=40):s?(P=J=40,N=36):(P=J=24,N=20);var V=P*Math.max(x+2,N)/N,K=[-V/2,-P/2,V,P,J*Q,J*K,J,J];v.Le=7;v.Ta.push(K)}v.Da.push(a.qd.jk);v.Le=11;v.Ta.push([-Math.floor(x/2),O,x,L,u[0],u[1],u[2],u[3]]);a.ha||(a.ha=[]);a.ha.push(v)}}else if("poilabel"===w){O=[];for(c=1;c<p.length;c+=1)if(m=p[c],v=d.Rv(m[1],q),!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){u=t.Wy(v,b);v={id:m[4],margin:e,zIndex:9001,wa:u,name:m[0].replace("^", ""),$l:!0,Na:v,Da:[],Ta:[],visible:!0,ek:!0};v.id||(v.id="poilabel_"+d.ub(v));D=0;v.Be=m[8];m[6]&&(K=m[6].split(":"),D=K[1],L=Math.floor((parseInt(K[0].split("_")[1])-28)/2));if(D&&m[3]){K=r.Cc+"://localhost:8888/style_icon/icon-"+(1===L?"biz-":"normal-")+(s||h?"big":"small")+".png";v.Da.push(K);D=parseInt(D)-1;K=Math.floor(D/10);Q=D%10;N=J=P=0;h?(P=48,J=40,N=28):s?(P=J=40,N=28):(P=J=24,N=20);V=P;if(151===D||152===D||153===D)N-=4,x=m[7][0][2],V=P*Math.max(x+2,N)/N;K=[-V/2,-P/2,V,P,J*Q,J*K,J,J];2<= D&&5>=D&&(K[8]=!0);v.Ta.push(K)}if(m[2]&&m[7])for(x=m[2],K=0;K<m[2].length;K+=1)v.Da.push(a.qd.jk),u=m[7][K],h&&(x[K][0]=Math.round(x[K][0]*y),x[K][1]=Math.round(x[K][1]*y),x[K][2]=Math.round(x[K][2]*y),x[K][3]=Math.round(x[K][3]*y)),Q=x[K][0],P=x[K][1]-(h?4:2),J=u[3],N=u[2],Q<-N&&D&&m[3]&&(Q=-N+v.Ta[0][0]),Q-=2,v.Le=J-4,4===f&&"\\u5317\\u4eac"===v.name&&(P=h?-50:-26),v.Ta.push([Q,P,N,u[3],u[0],u[1],u[2],u[3]]);v.Wr=m[5];v.Wr&&O.push(v.Wr);v.qs=m[4];v.si=m[9];v.o5=m[10];v.Rf=D;v.Ku=L;a.ha||(a.ha=[]); a.ha.push(v)}a.ae||(a.ae={},a.ae.ff=O)}w===k[k.length-1]&&(a.status="loaded",a.Ja=a.xa=!0)}}var d=this,e="3D"==a.Bi?0:-3,f=a.Eb,h=a.Mc,k=a.ha,l=a.dR,m=a.Za,n=a.UR,p=a.gC,q=a.Se,r=this.A,s=this.l.Z,u=p[0].split("-");1===u.length&&(u=p[0].split("_"));a=parseInt(u[1]);var v=parseInt(u[2]),x=parseInt(u[0]),t=this,w=u[3],y=h?m:1,m=Math.pow(2,x);10>x&&(a<=l&&c(f,a+m,v,x),a>=m-l&&c(f,a-m,v,x));c(f,a,v,x)}}},function(a){a||(g.pk.qra=!0)})}})();(function(){if(!g.zc){g.zc=g.QK();var a=g.a.EC({g:"on",ee:"hasEvents",G:"off",nJ:"offByContext",q:"emit",hi:"clearEvents"});g.zc.jf(null,function(){return{zqa:function(){var a=this;this.sr=[];this.tr={};if("undefined"!==typeof worker)for(var c=0;10>c;c++){var d=new Worker(this.Pla);d.status={index:c,V3:!0,IJ:!1,oK:0};d.addEventListener("message",function(c){var d=c.data;c=c.target;d.ping&&200===d.status?(c.status.IJ=!0,a.sr.filter(function(a){return a.status.IJ}).length===a.sr.length&&(a.sr.IJ=!0)): d.result&&a.lua(c,d)});this.sr.push(d);d.postMessage({cmd:"ping",ts:(new Date).getTime()})}},lua:function(a,c){var d=c.parentTaskId,e=c.taskId,f=this.tr[d],h=!1;f[e].data=c;f[e].index=a.status.index;for(var k=0,l=f.length;k<l;k++){var m=f[k];if(m&&m.Gc)if(m.data){var n=m.data;m.Gc(n.err,n.result,m.MK);m.MK.Jk&&(h=!0);m.data=null;m.ru=!0;m.Gc=null;m.MK=null;f[k]=null}else if(!m.ru)break}h&&e===f.length-1&&!f[e]&&delete this.tr[d];0===--a.status.oK&&(a.status.V3=!0)},Nka:function(a,c,d){var e=a.parentTaskId; this.sr.sort(function(a,b){return a.status.oK-b.status.oK});void 0===this.tr[e]&&(this.tr[e]=[]);this.tr[e].push({MK:c,Gc:d});c=this.sr[0];c.status.V3=!1;c.status.oK++;a.taskId=this.tr[e].length-1;a.ts=(new Date).getTime();a.workerIndex=c.status.index;c.postMessage(a)},c5:function(a,c){var d=this;if(3<this.Lt||this.disabled)return this.kh(a,c);var e=a.Eb,f=a.Ed,h=a.we,k=a.xq,l=a.Mqa,m=a.ha;if(h&&this.uB())this.tl(e,c);else if(!this.N3(a,function(a,b){var c=a.Eb,d=a.xq;b.reverse().forEach(function(a){a= c.indexOf(a);-1!==a&&d.splice(a,1)})},c)){var n=[(new Date).getTime(),this.wa.length+1&65535,h?1:0,(""+Math.random()).slice(2,7)].join("-");this.np[n]={Eb:e,Ed:f,B:a,Gc:c,we:h};h||(this.yk[n]=1);var e={command:"tiles",reqId:n,payload:{t:k,opt:f,cs:{level:f,flds:m.join(","),v:l?"3":"2"}}},p=this.send(e);this.MI()||setTimeout(function(){d.MI()||(d.Lt?d.Lt++:d.Lt=1,d.Mna(p)&&(delete d.np[n],delete d.yk[n],d.kh(a,c)))},300);this.g("tiles",this.rD,this);this.g("ack",this.qD,this);this.g("disable",this.oD, this)}},Cla:function(a){this.D4()&&this.send(a)},oD:function(){this.disabled=!0;this.close();for(var a in this.np)this.np.hasOwnProperty(a)&&this.oX(a)},oX:function(a){var c=this.np[a];c&&(this.tl(c.Eb,c.Gc),delete this.np[a],delete this.yk[a])},qD:function(a){var c=a.reqId,d=this.np[c];d&&(a.content.status?d.Gc&&(d.Gc(null,{dc:d.B.dc,oka:!0,pDa:!0},{Zp:!1,Jk:!0}),delete this.np[c],delete this.yk[c]):this.oX(c))},rD:function(a){var c=this.np[a.reqId];if(c)if(c.we){a=a.content.data;for(var d=0,e=a.length;d< e;d++)if(a[d]){var f=a[d];if(f.length){var h=f[0].split("-").slice(0,-1).join("/");this.Gj[h]?this.Gj[h].push(f):(this.Gj[h]=[f],this.nt++);this.Gj[h].length===c.B.ha.length&&(this.Gj[h].TY=!0)}}}else this.ps(this.extend({Rk:!1},c.B,{sE:a.content.data,Ed:a.content.opt}),c.Gc)},Ita:function(a,c,d){var e=c.Rk,f=c.nh;c.cu||(c.cu=[]);if(a.length){for(var h=function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:p;a||(q.Eb=c.Eb.filter(function(a){return"loaded"===a.status}).map(function(a){return{key:a.key, status:a.status}}),q.data=b.data,q.Rk=e.Jk,q.Rk&&(q.cu=c.cu,c.cu=null));d(a,q,e)},k=this.extend({},f),l=0,m=a.length;l<m;l++){var n=a[l];n&&c.cu.push({Ai:n.Ai,vd:n.vd,Ma:JSON.stringify(n)})}var p={Zp:!e,Jk:!!e},q={dc:c.dc,$t:c.$t,cu:[],uf:{Se:f.Se,Dh:f.Dh,Df:f.Df,Ed:c.Ed}},e=c.xf?"parseDataToWebGL":"parseDataToVector";if(c.xf&&this.sr&&this.sr.IJ)for(f=0,l=Math.ceil(a.length/15);f<l;f++)m=null,m=f===l-1?p:{Zp:!0,Jk:!1},k.Ic=a.slice(15*f,15*(f+1)),this.Nka({cmd:e,args:[k],parentTaskId:c.dc},m,h);else k.Ic= a,k.Je=this.Je,this[e](k,h)}else e&&(this.tr?(a=this.tr[c.dc])&&a.length&&a[a.length-1]&&(a[a.length-1].MK={Zp:!1,Jk:!0}):d(null,{dc:c.dc,Eb:[],data:null,Rk:e},{Zp:!e,Jk:!!e}))},ps:function(a,c){for(var d=a.sE,e=[],f=0,h=d.length;f<h;f++){var k=d[f];k&&(a.GR&&(k=JSON.parse(k)),k["x-vd-v"]?(this.Se=a.nh.Se=k["x-vd-v"],this.Dh=a.nh.Dh=k.tv,this.Df=a.Df=[k.tv||"",k.vdv].join("-"),k.bgc&&(k="#"+k.bgc.substring(2),a.$t!==k&&(a.$t=k))):this.pD(this.extend({},a,{gC:k,Ic:e})))}this.Ita(e,a,c)},MEa:function(a){for(var c= 0,d=a.length;c<d;c++){var e=a[c];e.op&&(self.Ut(e.op),delete e.op)}}}});g.zc.jf(null,new Function("\\n    return {\\n      "+a.on+": "+g.jw.g.toString()+",\\n      "+a.hasEvents+": "+g.jw.ee.toString()+",\\n      "+a.off+": "+g.jw.G.toString()+",\\n      "+a.offByContext+": "+g.jw.nJ.toString()+",\\n      "+a.emit+": "+g.jw.q.toString()+",\\n      "+a.clearEvents+": "+g.jw.hi.toString()+"\\n    }\\n  "));g.HV?g.zc.jf(null,g.HV,function(a){a||(g.zc.f4=!0)}):g.zc.f4=!0}})(); ')