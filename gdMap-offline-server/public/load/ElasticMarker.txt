_jsload_('ElasticMarker', 'z.w.O9=z.w.rb.extend({r:function(a){this.CLASS_NAME="AMap.ElasticMarker";g.c.va(this,a);this.iua(a);this.ph(arguments)},iua:function(a){this.Ira(a);this.aP(a);this.Cya=a.zoomStyleMapping},aP:function(a){a=a.styles;for(var b=0;b<a.length;b+=1){var c=a[b].icon,d=a[b].xa;d.style.position="relative";var e=document.createElement("div");e.appendChild(d);e.style.overflow="hidden";a[b].AP=e;d=c.ancher;a[b].gqa=[-d[0],-d[1]];a[b].dsa=c.maxScale||Infinity;a[b].osa=c.minScale||0;a[b].yC=c.fitZoom||18;a[b].T3= c.size;a[b].d4=c.imageOffset||[0,0];a[b].EI=c.imageSize||a[b].T3;a[b].kq=c.scaleFactor||2;if(c=a[b].label)a[b].I4=c.content,a[b].mra=c.position||"BM",a[b].ih=c.offset||[0,0],a[b].lra=c.minZoom||0}this.le=a},zoomChanged:function(){this.ph(arguments);this.Rs()},Rs:function(){this.C=!0;var a=this.get("zoom"),b=Math.round(a);if(b=this.le[this.Cya[b]]){var c=Math.pow(b.kq||2,a-b.yC),c=Math.min(b.dsa,Math.max(b.osa,c)),d=b.EI,e=b.T3,f=b.gqa,h=f[0]*c,f=f[1]*c,k=e[0]*c,e=e[1]*c,l=d[1]*c;b.xa.style.width= d[0]*c+"px";b.AP.style.width=k+"px";b.xa.style.height=l+"px";b.AP.style.height=e+"px";b.xa.style.top=-b.d4[1]*c+"px";b.xa.style.left=-b.d4[0]*c+"px";this.setContent(b.AP);this.setOffset(new g.H(h,f));if(b.I4&&b.lra<=a){c=a=0;switch(b.mra){case "BL":a=0+b.ih[0];c=e+b.ih[1];break;case "BM":a=k/2+b.ih[0];c=e+b.ih[1];break;case "BR":a=k+b.ih[0];c=e+b.ih[1];break;case "ML":a=0+b.ih[0];c=e+b.ih[1];break;case "MR":a=k+b.ih[0];c=e/2+b.ih[1];break;case "TL":a=0+b.ih[0];c=0+b.ih[1];break;case "TM":a=k/2+b.ih[0]; c=0+b.ih[1];break;case "TR":a=k+b.ih[0];c=0+b.ih[1];break;default:a=-h+b.ih[0],c=-f+b.ih[1]}this.setLabel({content:b.I4,offset:new g.H(a,c)})}else this.setLabel(null)}else this.setLabel(null),this.setContent(" ");this.C=!1},Ira:function(a){function b(){c-=1;0==c&&d.q("allLoaded",{target:d})}a=a.styles;for(var c=0,d=this,e=0;e<a.length;e+=1){var f=a[e].icon.img,c=c+1,h=document.createElement("img");a[e].xa=h;h.onload=b;h.onerror=b;h.src=f}}});window.AMap.ElasticMarker=z.w.O9; ')