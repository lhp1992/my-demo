_jsload_('AMap.Geocoder', 'g.kV=g.aa.extend({ja:[g.sa],r:function(a){this.CLASS_NAME="AMap.Geocoder";g.c.va(this,a);this.M=a||{};this.url=g.A.Rd+"/v3/geocode"},getLocation:function(a,b){g.c.add(this,"getLocation");if(a){var c=["key="+g.A.key,"s=rsv3"];a instanceof Array&&(a=a.join("|"),c.push("batch=true"));a instanceof Array&&(a=a.join("|"),c.push("batch=true"));this.Vq(this.M,{city:"city"},c);c=new g.fb.vb(this.url+"/geo"+(0<c.length?"?"+c.join("&"):""),{callback:"callback",PH:{address:a}});c.g("complete",function(a){this.eda(a, b)},this);c.g("error",function(a){this.ec(a,b)},this)}else g.event.O(this,"error",{info:"NO_PARAMS"}),b&&"function"===typeof b&&b("error","NO_PARAMS")},setCity:function(a){g.c.add(this,"setCity");this.M.city=a},setLang:function(a){g.c.add(this,"setLang");this.M.lang=a||"zh_cn"},getLang:function(){return this.M.lang},getAddress:function(a,b){g.c.add(this,"getAddress");a=g.a.Ha(a);var c=[],d=["key="+g.A.key,"s=rsv3","language="+(this.M.lang||"zh_cn")];if(a instanceof Array){for(var e=0,f=a.length;e< f;e+=1)c.push(a[e]+"");c=c.join("|");d.push("batch=true")}else c=a+"";d.push("location="+c);this.Vq(this.M,{radius:"radius",extensions:"extensions"},d);c=new g.fb.vb(this.url+"/regeo"+(0<d.length?"?"+d.join("&"):""),{callback:"callback",Cx:!0,vd:"REGEO"});c.g("complete",function(a){this.uja(a,b)},this);c.g("error",function(a){this.ec(a,b)},this)},Vq:function(a,b,c){for(var d in a)"undefined"!==typeof a[d]&&"undefined"!==typeof b[d]&&c.push(b[d]+"="+a[d])},Bd:function(a){a=a.split(",");return new g.T(a[0], a[1])},fa:function(a){return"object"===typeof a||"undefined"===typeof a?"":a},Jb:function(a){a=parseInt(a,10);return isNaN(a)?0:a},eda:function(a,b){var c;if(parseInt(a.status,10))if(c={info:a.info,resultNum:a.count,geocodes:[]},a.geocodes.length){for(var d=0,e=a.geocodes.length;d<e;d+=1){var f=a.geocodes[d],f=0==f.location.length?null:{location:this.Bd(f.location),formattedAddress:this.fa(f.formatted_address),adcode:this.fa(f.adcode),level:this.fa(f.level),addressComponent:{neighborhood:this.fa(f.neighborhood.name), neighborhoodType:this.fa(f.neighborhood.type),building:this.fa(f.building.name),buildingType:this.fa(f.building.type),province:this.fa(f.province),city:this.fa(f.city),district:this.fa(f.district),township:this.fa(f.township),citycode:this.fa(f.citycode),street:this.fa(f.street),streetNumber:this.fa(f.number)}};c.geocodes.push(f)}g.event.O(this,"complete",c);b&&"function"===typeof b&&b("complete",c)}else c.info="NO_DATA",g.event.O(this,"complete",c),b&&"function"===typeof b&&b("no_data",{});else c= {info:a.info},g.event.O(this,"error",c),b&&"function"===typeof b&&b("error",a.info)},Cta:function(a){var b=[];if(a)for(var c=0;c<a.length;c+=1)a[c].id&&b.push({name:this.fa(a[c].name),id:this.fa(a[c].id),location:this.Bd(a[c].location)});return b},Dba:function(a){var b=[];if(a)for(var c=0,d=a.length;c<d;c+=1)b.push(this.FW(a[c]));return b},FW:function(a){var b={addressComponent:{citycode:this.fa(a.addressComponent.citycode),adcode:this.fa(a.addressComponent.adcode),businessAreas:this.Cta(a.addressComponent.businessAreas), neighborhoodType:this.fa(a.addressComponent.neighborhood.type),neighborhood:this.fa(a.addressComponent.neighborhood.name),building:this.fa(a.addressComponent.building.name),buildingType:this.fa(a.addressComponent.building.type),street:this.fa(a.addressComponent.streetNumber.street),streetNumber:this.fa(a.addressComponent.streetNumber.number),province:this.fa(a.addressComponent.province),city:this.fa(a.addressComponent.city),district:this.fa(a.addressComponent.district),township:this.fa(a.addressComponent.township)}, formattedAddress:this.fa(a.formatted_address),roads:[],crosses:[],pois:[]};a.roads&&(b.roads=this.aia(a.roads));if(a.roadinters){var c=a.roadinters;this.be(c)||(c=[a.roadinters.roadinter]);b.crosses=this.Rha(c)}a.pois&&(b.pois=this.PN(a.pois));a.aois&&(b.aois=this.Mha(a.aois));return b},uja:function(a,b){var c;if(parseInt(a.status,10)){c={info:a.info};if(a.regeocode){if(""===this.fa(a.regeocode.formatted_address)){c.info="NO_DATA";g.event.O(this,"complete",c);b&&"function"===typeof b&&b("no_data", {});return}c.regeocode=this.FW(a.regeocode)}else a.regeocodes&&(c.regeocodes=this.Dba(a.regeocodes));g.event.O(this,"complete",c);b&&"function"===typeof b&&b("complete",c)}else c={info:a.info},g.event.O(this,"error",c),b&&"function"===typeof b&&b("error",a.info)},PN:function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];b[c]={id:d.id,name:d.name,type:d.type,address:this.fa(d.address),distance:this.Jb(d.distance),tel:this.fa(d.tel),location:this.Bd(d.location),direction:this.fa(d.direction),businessArea:this.fa(d.businessarea)}}return b}, Mha:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.push({adcode:this.fa(e.adcode),area:this.fa(e.area),id:this.fa(e.id),location:this.Bd(e.location),name:this.fa(e.name),type:this.fa(e.type)})}return b},be:function(a){return"[object Array]"===Object.prototype.toString.call(a)},Rha:function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];b[c]={distance:this.Jb(d.distance),direction:this.fa(d.direction),first_id:this.fa(d.first_id),first_name:this.fa(d.first_name),second_name:this.fa(d.second_name), second_id:this.fa(d.second_id),location:this.Bd(d.location)}}return b},aia:function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];b[c]={id:d.id,name:d.name,distance:this.Jb(d.distance),direction:this.fa(d.direction),location:this.Bd(d.location)}}return b},ec:function(a,b){z.event.O(this,"error",a);b&&"function"===typeof b&&b("error",a.info)}});window.AMap.Geocoder=g.kV; ')