_jsload_('AMap.EllipseEditor', 'g.P9=g.aa.extend({xi:".amap-ellipse-drag{width:15px;height:15px;background:url(../../../images/dd-via.png) 50% 50% no-repeat;cursor:pointer}.amap-ellipse-drag.mobile{width:25px;height:25px;background-color:rgba(0,0,0,.15);border-radius:13px}",ja:[g.sa],r:function(a,b){this.CLASS_NAME="AMap.EllipseEditor";g.c.va(this);this.e=a;this.qe=b;this.yb=g.A.yb},open:function(){var a=this;g.c.add(this,"open");this.Td&&this.Ub||this.ut();this.Td&&this.Td.setMap(this.e);this.Ub&&this.Ub.forEach(function(b){b.set("map", a.e)});this.cB=this.qe.getOptions.draggable;this.qe.setOptions({draggable:!1});this.qe.g("setCenter",this.WB,this);this.qe.g("setPath",this.ED,this)},v0:function(){var a=this,b=this.qe.getCenter(),c=this.HA(b);this.Ub.forEach(function(b,e){var f=0===e?"\\u6a2a\\u8f74\\u534a\\u5f84":"\\u7eb5\\u8f74\\u534a\\u5f84";b.set("position",c[e]);b.set("label",{content:f+":"+a.qe.get("radius")[e]+"\\u7c73",offset:g.l.Z?new g.H(27,0):new g.H(15,-6)});b.set("title","\\u62d6\\u62fd\\u4fee\\u6539"+f)})},WB:function(){var a=this.qe.getCenter(); this.Td.setPosition(a);this.Td.setLabel({content:"\\u5706\\u5fc3\\u5750\\u6807: "+parseFloat(a.Q.toFixed(6))+", "+parseFloat(a.P.toFixed(6))});this.v0()},ED:function(){this.v0()},close:function(){g.c.add(this,"close");this.Td&&(this.Td.setMap(null),delete this.Td);if(this.Ub){for(var a=0,b=this.Ub.length;a<b;a+=1)this.Ub[a].setMap(null);delete this.Ub}this.qe.G("setCenter",this.WB,this);this.qe.G("setRadius",this.ED,this);this.qe.setOptions({draggable:this.cB});this.q("end",{type:"end",target:this.qe})}, ut:function(){this.aM();this.cM()},aM:function(){var a=this.qe.getCenter();this.Td=this.Xh(a)},cM:function(){var a=this.qe.getCenter(),a=this.HA(a);this.Ub=[];this.Ub.push(this.Xh(a[0],!0));this.Ub.push(this.Xh(a[1],!0))},HA:function(a){var b=this.qe.get("radius"),c=b[1];return[a.offset(b[0],0),a.offset(0,c)]},VX:function(a){var b=this.qe.get("center");return a.P===b.P?0:1},Xh:function(a,b){var c=new z.w.rb({position:a,draggable:!0,content:"<div class=\'amap-ellipse-drag"+(g.l.Z?" mobile":"")+"\'></div>", offset:g.l.Z?new g.H(-13,-13):new g.H(-8,-7),zIndex:this.qe.get("zIndex")+1E3,innerOverlay:!0});c.za=!0;if(b){var d=this.VX(a),e=0===d?"\\u6a2a\\u8f74\\u534a\\u5f84":"\\u7eb5\\u8f74\\u534a\\u5f84";c.setLabel({content:e+":"+this.qe.getRadius()[d]+"\\u7c73",offset:g.l.Z?new g.H(27,0):new g.H(15,-6)});c.setTitle("\\u62d6\\u62fd\\u4fee\\u6539"+e)}else d=this.qe.get("center"),c.setLabel({content:"\\u5706\\u5fc3\\u5750\\u6807: "+parseFloat(d.Q.toFixed(6))+", "+parseFloat(d.P.toFixed(6)),offset:g.l.Z?new g.H(-22,27):new g.H(-22, 15)});this.kA(c);return c},kA:function(a){a.g("dragging",this.Fm,this).g("dragend",this.Xq,this)},r0:function(a){a.G("dragging",this.Fm,this).G("dragend",this.Xq,this)},Gn:function(){this.qe.q("edit")},Fm:function(a){a=a.target;var b=a.getPosition();a===this.Td?this.yN(b):this.qB(b,a)},Xq:function(){this.Gn();this.q("dragend",{type:"dragend",target:this.qe})},yN:function(a){this.qe.setCenter(a);this.q("move",{type:"move",lnglat:a,target:this.qe})},qB:function(a,b){var c=this.qe.get("center"),d=this.qe.get("radius"), e=void 0,f=void 0,f=void 0;b===this.Ub[0]?(f=new g.T(a.Q,c.P),e=0):(f=new g.T(c.Q,a.P),e=1);f=c.re(f);d[e]=parseFloat(f.toFixed(2));this.qe.setRadius(d);this.q("adjust",{type:"adjust",radius:d,target:this.qe})}});window.AMap.EllipseEditor=g.P9; ')