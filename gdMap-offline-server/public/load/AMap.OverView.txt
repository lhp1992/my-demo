_jsload_('AMap.OverView', 'g.C$=g.aa.extend({ja:[g.sa],xi:".amap-overviewcontrol{z-index:150;width:120px;height:120px;background:#fff;position:absolute;right:0;bottom:0}.amap-overview-main{width:115px;height:115px;position:absolute;left:5px;top:5px;overflow:hidden}.amap-overviewcontrol,.amap-overview-main{border-top:solid 1px #ccc;border-left:solid 1px #ccc}.amap-overview-map{position:absolute}.amap-overview-button{width:17px;height:17px;position:absolute;right:0;bottom:0;background:url(../../theme/v1.3/mapcontrols.png);background-position:-40px -386px;cursor:pointer}.amap-overview-win{width:62px;height:35px;background:#91a3d8;opacity:.25;border:solid 2px #44b;filter:alpha(opacity=25);position:absolute;top:40px;left:26px;cursor:move}", r:function(a){this.CLASS_NAME="AMap.OverView";g.c.va(this,a);this.Cqa();this.f={};this.f.K=g.j.create("div",null,"amap-overviewcontrol");this.f.Wj=g.j.create("div",this.f.K,"amap-overview-main");this.f.map=g.j.create("div",this.f.Wj,"amap-overview-map");this.f.TU=g.j.create("div",this.f.Wj,"amap-overview-win");this.f.Ys=g.j.create("div",this.f.Wj,"amap-overview-win");this.f.button=g.j.create("div",this.f.K,"amap-overview-button");this.Db(a||{})},Cqa:function(){this.Ri="overview";this.visible=!0;this.fn= !1;this.lb=[3,18];this.height=this.width=120;this.Gv=null},Tt:function(a,b){this.map=a;b.appendChild(this.f.K);this.gf=b;this.Im();this.Dn&&(this.fn?g.j.Va(this.Dn,{right:this.width+"px"}):g.j.Va(this.Dn,{right:"17px"}))},qv:function(){this.Om();this.gf.removeChild(this.f.K);this.map=this.gf=null},Db:function(a){for(var b in a)"_"!==b.substr(0,1)&&void 0!==this[b]&&(this[b]=a[b]);b=this.fn;this.Gv=void 0!==a.tileLayer?a.tileLayer:this.Gv;this.fn=void 0!==a.isOpen?a.isOpen:this.fn;this.visible=void 0!== a.visible?a.visible:this.visible;this.width&&this.height&&g.j.Va(this.f.K,{width:this.width+"px",height:this.height+"px"}).Va(this.f.Wj,{width:this.width-5+"px",height:this.height-5+"px"}).Va(this.f.map,{width:this.width-5+"px",height:this.height-5+"px"});this.fn||g.j.Va(this.f.K,{width:"17px",height:"17px"}).Va(this.f.button,{backgroundPosition:"-40px -405px"});!b&&this.fn&&this.open();this.visible?g.j.Va(this.f.K,{visibility:"visible"}):g.j.Va(this.f.K,{visibility:"hidden"})},PQ:function(a){return this[a]}, Im:function(){this.BB();this.Pa={button:g.event.X(this.f.button,"click",this.fga,this),rGa:g.event.X(this.f.Ys,"mousedown",this.Dt,this),sGa:g.event.X(document,"mousemove",this.Bt,this),wGa:g.event.X(document,"mouseup",this.Ct,this),vGa:g.event.X(this.f.Ys,"touchstart",this.Dt,this),uGa:g.event.X(document,"touchmove",this.Bt,this),tGa:g.event.X(document,"touchend",this.Ct,this),QDa:g.event.addListener(this.map,"moveend",this.BB,this),SDa:g.event.addListener(this.map,"zoomend",this.BB,this),RDa:g.event.addListener(this.map, "resize",this.BB,this)}},Om:function(){if(this.Pa)for(var a in this.Pa)this.Pa.hasOwnProperty(a)&&g.event.removeListener(this.Pa[a])},fga:function(){this.fn?this.close():this.open()},Dt:function(a){g.F.stopPropagation(a).preventDefault(a);a=g.F.Sl("touchstart"===a.type?a.touches[0]:a,this.f.map);this.x=a.hf();this.y=a.de();this.zy=+g.j.Vc(this.f.Ys,"left").replace("px","");this.qc=+g.j.Vc(this.f.Ys,"top").replace("px","");this.su=!0},Bt:function(a){if(this.su){this.M4="touchmove"===a.type?a.touches[0]: a;var b=g.F.Sl(this.M4,this.f.map);a=b.hf()-this.x;var b=b.de()-this.y,c=this.zy+a,d=this.qc+b;this.tC=a;this.uC=b;g.j.Va(this.f.Ys,{left:c+"px",top:d+"px"})}},Ct:function(){if(this.su){var a=g.F.Sl(this.M4,this.f.map),b=a.hf()-this.x,c=a.de()-this.y,d=this.zy,e=this.qc,f=this;g.l.Cf&&(b=this.tC,c=this.uC);var h=this.zy+b,k=this.qc+c,l=Math.round(b/10),m=Math.round(c/10),n=setInterval(function(){g.j.Va(f.f.TU,{left:d+"px",top:e+"px"});if(Math.abs(h-d)<Math.abs(l)||Math.abs(k-e)<Math.abs(m))window.clearInterval(n), g.j.Va(f.f.TU,{left:h+"px",top:k+"px"}),f.map.panBy(Math.round(-b/Math.pow(2,f.Y1)),Math.round(-c/Math.pow(2,f.Y1)));d+=l;e+=m},15);this.su=!1}},open:function(){g.c.add(this,"open");var a=17,b=17,c=Math.round((this.width-17)/10),d=Math.round((this.height-17)/10),e,f=this;e=setInterval(function(){a+=c;b+=d;g.j.Va(f.f.K,{width:a+"px",height:b+"px"});f.Dn&&g.j.Va(f.Dn,{right:a+"px"});if(a>=f.width||b>=f.height)window.clearInterval(e),g.j.Va(f.f.K,{width:f.width+"px",height:f.height+"px"}).Va(f.f.button, {backgroundPosition:"-40px -386px"}),f.Dn&&g.j.Va(f.Dn,{right:f.width+"px"}),f.fn=!0,f.f.K.removeChild(f.f.Wj),f.f.K.insertBefore(f.f.Wj,f.f.button)},15);g.event.O(this,"open")},close:function(){g.c.add(this,"close");var a=this.width,b=this.width,c=Math.round((this.width-17)/10),d=Math.round((this.height-17)/10),e,f=this;e=setInterval(function(){a-=c;b-=d;g.j.Va(f.f.K,{width:a+"px",height:b+"px"});f.Dn&&g.j.Va(f.Dn,{right:a+"px"});if(17>=a||17>=b)window.clearInterval(e),g.j.Va(f.f.K,{width:"17px", height:"17px"}).Va(f.f.button,{backgroundPosition:"-40px -405px"}),f.Dn&&g.j.Va(f.Dn,{right:"17px"}),f.fn=!1,f.f.K.removeChild(f.f.Wj),f.f.K.insertBefore(f.f.Wj,f.f.button)},15);g.event.O(this,"close")},getTileLayer:function(){g.c.add(this,"getTileLayer");return this.Gv},setTileLayer:function(a){g.c.add(this,"setTileLayer");this.Gv=a;this.map&&this.BB()},show:function(){g.c.add(this,"show");this.Db({visible:!0});g.event.O(this,"show")},hide:function(){g.c.add(this,"hide");this.Db({visible:!1});g.event.O(this, "hide")},BB:function(){var a=this.map.getSize(),b=this.map.getCenter(),c=this.lb,d=this.Lda(a.width,a.height,this.width-5,this.height-5);a.width*a.height*Math.pow(2,2*d)*4>this.width*this.height&&(d-=1);var e=this.map.getZoom()+d;this.Y1=d;var f=0,h=0;e>=c[0]&&e<=c[1]?(f=Math.round(Math.pow(2,d)*a.width),h=Math.round(Math.pow(2,d)*a.height)):e=c[0];this.qja(f,h);this.gja(b,e)},gja:function(a,b){this.Ck||(this.Ck=[]);for(var c=this.map.hc(a,b),d=this.width-5,e=this.height-5,f=Math.floor((c.y-e/2)/ 256),h=Math.floor((c.x+d/2)/256),k=Math.floor((c.y+e/2)/256),l=0,m=Math.floor((c.x-d/2)/256);m<=h;m+=1)for(var n=f;n<=k;n+=1){this.Ck.length<=l&&this.Ck.push(g.j.create("img",this.f.map));var p=this.Ck[l];g.j.Va(p,{visibility:"inherit",position:"absolute",left:256*m-c.x+d/2+"px",top:256*n-c.y+e/2+"px"});p.src=this.Rq(m,n,b);l+=1}for(;l<this.Ck.length;)g.j.Va(this.Ck[l],{visibility:"hidden"}),l+=1},Lda:function(a,b,c,d){a=Math.log(c/a)/Math.LN2;b=Math.log(d/b)/Math.LN2;return Math.floor(Math.min(a, b))},qja:function(a,b){var c={};0<a&&0<b?(c.width=a+"px",c.height=b+"px",c.left=Math.round((this.width-5-a)/2)+"px",c.top=Math.round((this.height-5-b)/2)+"px",c.display="block"):c.display="none";g.j.Va([this.f.TU,this.f.Ys],c);this.f.Wj.removeChild(this.f.Ys);this.f.Wj.appendChild(this.f.Ys)},Rq:function(a,b,c){this.Gv||(this.Gv=new z.o.ob({innerLayer:!0,getTileUrl:g.A.Cc+"://webrd01.is.autonavi.com/appmaptile?lang="+this.map.get("lang")+"&size=1&scale=1&style=7&x=[x]&y=[y]&z=[z]"}));return this.Gv.getTileUrl(a, b,c)},ky:function(){return[0,this.fn?this.width+5:22,this.fn?this.height+5:22,0]}});window.AMap.OverView||(window.AMap.OverView=g.C$); ')