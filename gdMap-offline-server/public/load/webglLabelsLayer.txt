_jsload_('webglLabelsLayer', 'g.Ba&&g.Ba.Tb&&(g.Ba.cV=g.Ba.Tb.extend({ja:[g.P$],type:"label_layer",Zd:{C9:"bufferChanged",V9:"frameBufferChanged",Lya:"combineFrameBufferChanged",O$:"_AMap_sdf_com_words",Yz:"http://localhost:8888",OK:4,sza:6,sL:4,nV:5,Yya:8,HE:4,XE:1,daa:10,Q9:10,f$:"__id__",fw:{vw:"top",Nq:"right",So:"bottom",rm:"left",PE:"middle",wn:"center",w9:"alphabetic"},Pc:{W$:"\\u7eb9\\u7406\\u52a0\\u8f7d\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5",CV:"\\u8d44\\u6e90\\u52a0\\u8f7d\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5"}},Nh:"precision mediump float;\\nattribute vec2 a_vertex;\\nattribute vec2 a_texcoord;\\nattribute float a_type;\\nattribute vec2 a_origin;\\nattribute float a_texIndex;\\nattribute vec4 a_color;\\nattribute vec2 a_zooms;\\nuniform vec2 u_gl_size;\\nuniform highp mat4 u_matrix;\\nuniform float u_texsize[_TotalTextureLenTwice];\\nuniform lowp int u_event;\\nuniform lowp float u_zoom;\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_zooms;\\nvec2 getSizeFromArray(float u_texsize[_TotalTextureLenTwice], int ndx) {\\n   vec2 texsize;\\n   if (ndx == 0) {\\n       texsize = vec2(u_texsize[0], u_texsize[1]);\\n   } else if (ndx == 1) {\\n       texsize = vec2(u_texsize[2], u_texsize[3]);\\n   } else if (ndx == 2) {\\n       texsize = vec2(u_texsize[4], u_texsize[5]);\\n   } else if (ndx == 3) {\\n       texsize = vec2(u_texsize[6], u_texsize[7]);\\n   } else if (ndx == 4) {\\n       texsize = vec2(u_texsize[8], u_texsize[9]);\\n   } else if (ndx == 5) {\\n       texsize = vec2(u_texsize[10], u_texsize[11]);\\n   } \\n   return texsize;\\n}\\nvoid main() {\\n   if(a_type == 4.0){       gl_Position=vec4((a_vertex.x - u_gl_size.x/2.0)/u_gl_size.x * 2.0, -(a_vertex.y -           u_gl_size.y/2.0)/u_gl_size.y * 2.0, 0, 1);       gl_PointSize = 10.0;\\n       v_type = a_type;\\n       return;   }   if(a_type == 5.0){\\n       vec4 pos = u_matrix * vec4(a_vertex.xy, 0, 1);\\n       gl_Position = vec4(pos.xy/u_gl_size * 2.0, 0, 1);\\n       v_type = a_type;\\n       v_texIndex = a_texIndex;\\n       v_texcoord = a_texcoord;\\n       return;   }   v_zooms = a_zooms;\\n   if(u_zoom < a_zooms.x || u_zoom > a_zooms.y){\\n       return;   }   if(a_type == 1.0){\\n       gl_Position = u_matrix * vec4(a_vertex.xy, 0, 1);\\n   }else{\\n       vec4 cur_position = u_matrix * vec4(a_origin.xy, 0, 1);\\n       gl_Position =            cur_position/cur_position.w +            vec4(a_vertex.x/u_gl_size.x * 2.0, -a_vertex.y/u_gl_size.y * 2.0,0, 0);\\n   }\\n   if(u_event == 1){\\n       v_color = a_color;\\n       return;\\n   }\\n   v_texcoord = a_texcoord / getSizeFromArray(u_texsize, int(a_texIndex));\\n   v_texIndex = a_texIndex;\\n   v_type = a_type;\\n}", Wd:"precision mediump float;\\nuniform sampler2D u_texture[_TotalTextureLen];\\nuniform vec4 u_color;\\nuniform vec4 u_borderColor;\\nuniform float u_borderBuffer;\\nuniform float u_buffer;\\nuniform float u_gamma;\\nuniform lowp int u_event;\\nuniform lowp float u_zoom;\\nuniform lowp float u_opacity;\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_zooms;\\nvoid main() {\\n   if(v_type == 4.0){\\n       gl_FragColor = vec4(1, 0, 0, 1);\\n       return;\\n   }\\n\\tint texIdx = int(floor(v_texIndex+0.1));    vec4 distColor;\\n   if(v_type == 5.0){\\n       __SmpColorLoop__       gl_FragColor = distColor;\\n       return;\\n   }\\n   if(u_zoom < v_zooms.x || u_zoom > v_zooms.y){\\n       discard;   }   if(u_event == 1){\\n       gl_FragColor = v_color;\\n       return;\\n   }\\n   if(v_type == 0.0){\\n       vec4 color = texture2D(u_texture[5], v_texcoord);\\n       gl_FragColor = vec4(color.rgb, u_opacity * color.a);\\n       return;\\n   }\\n__SmpColorLoop__   float dist = distColor.r;\\n   float alpha;\\n   if(u_borderBuffer == 0.0){\\n       alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n       gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\\n   }else{\\n       if(dist <= u_buffer - u_gamma){\\n           alpha = smoothstep(u_borderBuffer - u_gamma, u_borderBuffer, dist);\\n           gl_FragColor = vec4(u_borderColor.rgb, alpha * u_borderColor.a * u_opacity);\\n       }else if(dist < u_buffer){\\n           alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n           gl_FragColor = vec4(alpha * u_color.rgb + (1.0 - alpha) * u_borderColor.rgb, 1.0 * u_color.a * alpha * u_opacity + (1.0 - alpha) * u_borderColor.a * u_opacity);\\n       }else{\\n           alpha = 1.0;\\n           gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\\n       }\\n   }\\n}", mka:"a_origin a_texIndex a_vertex a_type a_color a_texcoord a_zooms".split(" "),fGa:"u_matrix u_texture u_texsize u_color u_buffer u_gamma u_borderColor u_borderBuffer u_gl_size u_event u_zoom u_opacity".split(" "),r:function(a,b,c){this.dc=g.a.ub(this);var d=this.ga=b.ga;this.ay=Math.max(1,Math.min(Math.floor((d.getParameter(d.MAX_VERTEX_UNIFORM_VECTORS)-20)/4/4),128));this.tn=Math.min(this.ay,d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS),16);for(var e=[],f=0;f<this.tn;f++)e.push((0<f?"else ":" ")+"if(texIdx=="+ f+"){ distColor = texture2D(u_texture["+f+"], v_texcoord); }");this.Nh=this.Nh.replace(/_TotalTextureLenTwice/g,2*this.tn).replace(/_TotalTextureLen/g,this.tn);this.Wd=this.Wd.replace(/_TotalTextureLen/g,this.tn).replace(/__SmpColorLoop__/g,e.join("\\n"));this.o=a;arguments.callee.ka.apply(this,arguments);e=this.pa;this.pg();this.pB();this.fca(d,e);this.Cra();this.o.Ja=!0},pB:function(){this.ks={buffer:3,YBa:"ios9",size:24,gi:{}};this.hH=[];this.Yu={};this.Zu={};this.t8=this.tR=null;this.fP=!1;this.gi= {};this.hn={};this.vP={};this.KJ={Y:[],NB:[]};this.wC=[];this.cI=null;this.IP="";this.Hu={kd:[],dU:[]};this.Is=0},Ch:function(a,b){b.HB=a.getAttribLocation(b,"a_origin");b.IB=a.getAttribLocation(b,"a_texIndex");b.ir=a.getAttribLocation(b,"a_vertex");b.St=a.getAttribLocation(b,"a_type");b.GB=a.getAttribLocation(b,"a_color");b.JB=a.getAttribLocation(b,"a_texcoord");b.KB=a.getAttribLocation(b,"a_zooms");b.sU=a.getUniformLocation(b,"u_matrix");b.uz=a.getUniformLocation(b,"u_texture");b.yxa=a.getUniformLocation(b, "u_texsize");b.Nv=a.getUniformLocation(b,"u_color");b.ixa=a.getUniformLocation(b,"u_buffer");b.nxa=a.getUniformLocation(b,"u_gamma");b.hxa=a.getUniformLocation(b,"u_borderColor");b.gxa=a.getUniformLocation(b,"u_borderBuffer");b.yK=a.getUniformLocation(b,"u_gl_size");b.pU=a.getUniformLocation(b,"u_event");b.R8=a.getUniformLocation(b,"u_zoom");b.uU=a.getUniformLocation(b,"u_opacity")},bAa:function(a){var b=a.width;a=a.height;var c=document.createElement("canvas");c.width=b;c.height=a;return c},fca:function(a){var b= a.createBuffer(),c=a.createBuffer();a=a.createBuffer();g.extend(this.Hu,{$xa:b,qma:c,o2:a})},ZL:function(a,b){var c=this.ga,d=c.createFramebuffer();this.te();var e=c.createTexture();this.bindTexture(e,null,a,b);d.Ua=e;c.bindFramebuffer(c.FRAMEBUFFER,d);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,e,0);return d},dAa:function(a,b){for(var c=this.mka||[],d=0;d<c.length;d++)a.enableVertexAttribArray(b[c[d]])},tM:function(a,b){for(var c in b)b.hasOwnProperty(c)&&"number"==typeof b[c]&& a.disableVertexAttribArray(b[c])},gW:function(a,b){var c=this.ga,d=this.pa,e=this.tn,f=a.length,h=Math.floor(e/2),k="icon"==b?h:0,e=b&&"icon"!=b?h:e,h=0,l=[];for(k;k<e;k++)h<f&&a[h]?(c.activeTexture(c.TEXTURE0+k),c.bindTexture(c.TEXTURE_2D,a[h]),l[h]=k):l[h]=0,h++;c.uniform1iv(d.uz,l)},uca:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,e=this.ga,f=this.pa,h=this.Zd,k=h.HE,l=h.daa,h=h.C9;e.bindBuffer(e.ARRAY_BUFFER, a);this.IP||(this.IP=h,h=new Float32Array(b),e.bufferData(e.ARRAY_BUFFER,h,e.STATIC_DRAW),new Float32Array(0));a.os=(d-c)/l;e.uniform1i(f.pU,0);e.vertexAttribPointer(f.ir,2,e.FLOAT,!1,l*k,c*k);e.enableVertexAttribArray(f.ir);e.vertexAttribPointer(f.JB,2,e.FLOAT,!1,l*k,c*k+2*k);e.enableVertexAttribArray(f.JB);e.vertexAttribPointer(f.HB,2,e.FLOAT,!1,l*k,c*k+4*k);e.enableVertexAttribArray(f.HB);e.vertexAttribPointer(f.IB,1,e.FLOAT,!1,l*k,c*k+6*k);e.enableVertexAttribArray(f.IB);e.vertexAttribPointer(f.St, 1,e.FLOAT,!1,l*k,c*k+7*k);e.enableVertexAttribArray(f.St);e.vertexAttribPointer(f.KB,2,e.FLOAT,!1,l*k,c*k+8*k);e.enableVertexAttribArray(f.KB);e.disableVertexAttribArray(f.GB)},wca:function(a,b){var c=this.ga,d=this.pa,e=this.Zd,f=e.HE,h=e.Q9,e=e.V9;c.bindBuffer(c.ARRAY_BUFFER,a);this.D2||(this.D2=e,e=new Float32Array(b),c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW),a.os=b.length/h,new Float32Array(0));c.uniform1i(d.pU,1);c.vertexAttribPointer(d.ir,2,c.FLOAT,!1,h*f,0);c.enableVertexAttribArray(d.ir); c.vertexAttribPointer(d.HB,2,c.FLOAT,!1,h*f,2*f);c.enableVertexAttribArray(d.HB);c.vertexAttribPointer(d.GB,4,c.FLOAT,!1,h*f,4*f);c.enableVertexAttribArray(d.GB);c.vertexAttribPointer(d.KB,2,c.FLOAT,!1,h*f,8*f);c.enableVertexAttribArray(d.KB);c.disableVertexAttribArray(d.JB);c.disableVertexAttribArray(d.IB);c.disableVertexAttribArray(d.St)},vca:function(a,b){var c=this.ga,d=this.pa,e=this.Zd.HE;c.bindBuffer(c.ARRAY_BUFFER,a);c.bufferData(c.ARRAY_BUFFER,new Float32Array(b),c.STATIC_DRAW);a.os=b.length/ 6;c.vertexAttribPointer(d.ir,2,c.FLOAT,!1,6*e,0);c.enableVertexAttribArray(d.ir);c.vertexAttribPointer(d.JB,2,c.FLOAT,!1,6*e,2*e);c.enableVertexAttribArray(d.JB);c.vertexAttribPointer(d.IB,1,c.FLOAT,!1,6*e,4*e);c.enableVertexAttribArray(d.IB);c.vertexAttribPointer(d.St,1,c.FLOAT,!1,6*e,5*e);c.enableVertexAttribArray(d.St);c.disableVertexAttribArray(d.HB);c.disableVertexAttribArray(d.GB);c.disableVertexAttribArray(d.KB)},oB:function(){this.Is=0;this.eT=!0;this.fU=this.sR=!1;this.gi=[]},QM:function(a){var b= {},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c],e=d.opts||{},f=(d.data||{}).rank,d=this.o.tf(e.opacity)?1:e.opacity,e=e.zIndex||f||1,f=(this.hn[c]||{}).text,f=void 0===f?{}:f;b[e]||(b[e]={});var h=(f=f&&f.style||"")?f.fontSize+"-"+f.fillColor+"-"+f.strokeColor+"-"+f.jz+"-"+d:-1,h=f?f.fontSize+"-"+f.fillColor+"-"+f.strokeColor+"-"+f.jz+"-"+d:"-1-"+d;b[e][h]||(b[e][h]="");b[e][h]+="-"+c}a=Object.keys(b);c=[];for(d=0;d<a.length;d++){var e=b[a[d]],k;for(k in e)e.hasOwnProperty(k)&&c.push(e[k].substr(1))}return c}, Rba:function(a){var b=this.ks.gi,c;for(c in b)if(b.hasOwnProperty(c)){var d=b[c];if(d&&d[a])return c}return!1},qBa:function(a){var b=a[0],c=a[1],d=a[2];a=a[3];this.o.tf(a)&&(a=1);return"rgba("+b+", "+c+", "+d+", "+a+")"},sqa:function(a){return[((a&16711680)>>16)/255,((a&65280)>>8)/255,(a&255)/255,1]},N2:function(a){if(!a)return"";var b=this.vP;if(b[a])return b[a];this.vP[a]=this.sqa(a);return this.vP[a]},gpa:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return((a[0]|| 0)<<16)+((a[1]||0)<<8)+(a[2]||0)},XB:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=b[0],b=b[1];this.h.tf(c)&&(c=3);this.h.tf(b)&&(b=20);return a>=c&&a<=b?!0:!1},Bca:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b={},c;for(c in a)a.hasOwnProperty(c)&&(this.Rba(c)||(b[c]=1));return b},YL:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length&& void 0!==arguments[2]?arguments[2]:{},d=arguments[3],e=this.tn,f=-Infinity,h=0,k=Object.keys(c),l=0;a&&(k.unshift("__origin__"),c.__origin__=a);for(a=0;a<k.length;a++){var m=k[a];b[m]||(b[m]={});var n=c[m];if(n){var p=b[m].width=n.width,n=b[m].height=n.height;b[m].bla=l;l+=n;p&&n&&(f=p>f?p:f,h+=n)}}var a=this.ga,m=this.pa,l=this.ZL(f,h),p=this.Hu.qma,n=k.reverse(),k=k.length,e=e/2,q=Math.ceil(k/e),r=0,s=0;a.useProgram(m);a.bindFramebuffer(a.FRAMEBUFFER,l);a.viewport(0,0,f,h);a.clearColor(0,0,0,0); a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.clear(a.COLOR_BUFFER_BIT);for(a.uniform2fv(m.yK,[f,h]);r<q;){for(var u=e*(r+1)>k?k%e:e,v=[],x=[],t=0;t<u;t++){var w=n[r*e+t],y=c[w],E=b[w],C=E.width,E=E.height;if(C&&E){var F=t;v.push(0,-(s+0),0,1,F,5,C,-(s+0),1,1,F,5,0,-(s+E),0,0,F,5,0,-(s+E),0,0,F,5,C,-(s+0),1,1,F,5,C,-(s+E),1,0,F,5);y.tagName?(C=a.createTexture(),this.bindTexture(C,y),x.push(C)):x.push(y);b[w].T7=0;b[w].U7=b[w].bla;s+=E}}u=(new g.Ec).translate(-f/2,h/2,0);a.uniformMatrix4fv(m.sU,!1, u.elements);this.gW(x,4===d?"text":"icon");this.vca(p,v);p.os&&a.drawArrays(a.TRIANGLES,0,p.os);r++}this.tM(a,m);a.bindFramebuffer(a.FRAMEBUFFER,null);c=this.Hu;b=c.kd;c=c.dU;l=l.Ua;l.width=f;l.height=h;b[d]=l;c[2*d]=f;c[2*d+1]=h;return l},dG:function(a,b,c){var d=new Image;d.crossOrigin="anonymous";d.onload=function(){b(d,c)};d.onerror=function(){b(null,c)};d.src=a},Ora:function(){var a=this,b=arguments[1],c=this.Zd,d=c.sL,c=c.Yz+("/getsdfdata?chars="+(0<arguments.length&&void 0!==arguments[0]?arguments[0]: []).join(",").split(",").join("|"));g.a.IO({url:c,dataType:"json",method:"get",YT:function(c){if(c&&c.info){var f=a.WX(c.info),h={};h[f]=c.info;h[f].index=d;Object.assign(a.ks.gi,h);b&&b(f,c)}else b&&b(null)},error:function(){b&&b(null)}})},Cra:function(){var a=this,b=this.Zd,c=b.OK,d=b.Pc;this.getData(function(b){if(b){var f=0,h=0,k;for(k in b)if(b.hasOwnProperty(k)){var l=b[k],m={};m[k]=l.info;m[k].index=h++;Object.assign(a.ks.gi,m);a.dG(l.Uta,function(b,d){if(b){var e=d.key,e=void 0===e?"":e;a.hH[a.ks.gi[e]&& a.ks.gi[e].index||0]=b;++f==c&&(a.U_(a.hH),a.fP&&(a.fP=!1,a.e5(a.gi)))}},{key:k})}}else a.o.warn(d.CV)})},LDa:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=arguments[2];this.dG(a,function(a){a&&(b.hH.push(a),b.U_([a],c));d&&d()})},Lla:function(){return this.hH.length>=this.Zd.OK},bindTexture:function(a,b,c,d){var e=this.ga;e.bindTexture(e.TEXTURE_2D,a);e.texImage2D.apply(e,c&&d?[e.TEXTURE_2D,0,e.RGBA,c,d,0,e.RGBA,e.UNSIGNED_BYTE,b]:[e.TEXTURE_2D,0,e.RGBA,e.RGBA, e.UNSIGNED_BYTE,b]);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},U_:function(a){for(var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=this.ga,d=this.Hu,e=d.kd,d=d.dU,f=0;f<a.length;f++){var h=a[f],k=c.createTexture();this.bindTexture(k,h);var l=2*(b+f);d[l]=parseFloat(h.width);d[l+1]= parseFloat(h.height);e[b+f]=k}},te:function(){return this.o.Qw()||{}},WX:function(){var a=(Object.keys(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})||[]).sort(),b=a.length,c=void 0;return c=2<=b?a[0]+"-"+a[b-1]:1==b?a[0]:""},QW:function(a){var b=this.Zu||{};return a?b[a]&&b[a].status:"complete"},OW:function(){var a=this.Zu||{},b=void 0,c;for(c in a)if(a.hasOwnProperty(c)&&"__origin__"!==c&&(b=this.QW(c),"complete"!==b))return!1;return!0},measureText:function(a,b){for(var c=this.Zd.XE, d={advance:0},e=this.ks,f=b/e.size,e=e.gi,h=0;h<a.length;h++){var k=a[h],l;for(l in e)if(e.hasOwnProperty(l)){var m=e[l];if(m[k]){d.advance+=(m[k][4]+c)*f;break}}}return d},Ioa:function(a){var b=this.ks.gi||[],c;for(c in b)if(b.hasOwnProperty(c)){var d=b[c],e=d.index||0;if(d[a])return{key:c,index:e,r1:d[a]}}return{r1:null}},Pma:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=arguments[2],c=arguments[3],d=this.Zd,e=d.XE,f=d.sL,h=c.size,d=c.mU,k=c.type,l=void 0===k?2:k, m=c.id,n=c.lb,p=this.ks,c=this.Ioa(arguments[1]),q=c.index,r=c.r1,c=c.key,s=void 0===c?"":c,c=d[0],d=d[1],k=n[0],n=n[1];if(r){var h=h/p.size,u=r[0],v=r[1],x=r[2],t=r[3],w=r[4],y=r[5],E=r[6],r=p.buffer;if(0<u&&0<v){var u=u+2*r,v=v+2*r,C=b.x,F=b.y,p=1*(C+(x-r)*h),r=1*(C+(x-r+u)*h),x=1*(F-t*h),t=1*(F+(v-t)*h),F=C=0;q>=f&&(s=this.Zu[s]||{},f=s.T7,s=s.U7,C+=void 0===f?0:f,F+=void 0===s?0:s);f=C+y;s=F+E;a.push(p,x,f,s,c,d,q,l,k,n,r,x,f+u,s,c,d,q,l,k,n,p,t,f,s+v,c,d,q,l,k,n,p,t,f,s+v,c,d,q,l,k,n,r,x,f+u, s,c,d,q,l,k,n,r,t,f+u,s+v,c,d,q,l,k,n);m&&(q=this.N2(m),a=q[0],l=q[1],m=q[2],q=q[3],this.wC.push(p,x,c,d,a,l,m,q,k,n,r,x,c,d,a,l,m,q,k,n,p,t,c,d,a,l,m,q,k,n,p,t,c,d,a,l,m,q,k,n,r,x,c,d,a,l,m,q,k,n,r,t,c,d,a,l,m,q,k,n))}b.x+=(w+e)*h}},t3:function(a,b){var c=g.a.ac;return[a-c.x,b-c.y]},Ipa:function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b=this.Zd.fw,c=a.direction,d=a.size,a=a.Sr,a=void 0===a?!1:a,d=this.measureText(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[], void 0===d?24:d),e=0,f=0;switch(void 0===c?b.rm:c){case b.rm:e=a?-d.advance:0;f=0;break;case b.Nq:e=a?0:-d.advance;f=0;break;case b.vw:case b.So:e=a?-d.advance/2:0;f=0;break;case b.wn:e=-d.advance/2;f=0;break;default:f=e=0}return[e,f]},Qca:function(a,b,c,d,e){if(b&&c){b=b.text;var f=b.origin,h=b.offset;b=c.text||{};var k=b.style,l=b.direction,l=void 0===l?"left":l;b=b.lb;var m=f[0],n=f[1];if(!g.a.Qk(c.text))for(f=k.fontSize,k=this.Ipa(e,{direction:l,size:f,Sr:!g.a.Qk(c.og)}),c=this.t3(m,n),h=g.Oq.add(h, k),h={x:h[0],y:-f+h[1]},k=0;k<e.length;k++)this.Pma(d.Y,e[k],h,{size:f,mU:c,id:a,lb:b})}},e5:function(a){var b=this,c=this.Zd.sL,d=[],e=[];if(!this.gi.iP&&this.OW())this.jr("text");else{this.gi.iP=!1;for(var f in a)if(a.hasOwnProperty(f))for(var h=a[f],k=0;k<h.length;k++){var l=h[k];this.nd(l)&&2>this.Is?d.push(l):e[l]=1}a=this.Bca(e);d=Object.keys(a).length;e=this.WX(a);f=this.QW(e);d&&!f?(this.Zu[e]={},this.Zu[e].status="loading",this.Ora(Object.keys(a),function(a,d){d&&d.url?b.dG(d.url,function(d){if(d){var e= {};e[a]=d;b.t8=b.YL(b.t8,b.Zu,e,c);b.Zu[a].status="complete";b.jr("text")}}):b.o.warn("\\u8d44\\u6e90\\u52a0\\u8f7d\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5")})):!d&&this.OW()&&this.jr("text")}},Nra:function(){this.o.Esa?this.jr("text"):this.Lla()?this.e5(this.gi):this.fP=!0},MW:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[NaN,NaN,NaN,NaN],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0,1],c=0;c<a.length;c++)isNaN(a[c])&&(a[c]=b[c]);return a},Jpa:function(a){var b= this.te().Za,b=void 0===b?1:b,c=a.fontSize,c=void 0===c?12:c,d=a.fillColor,e=a.strokeColor,e=void 0===e?"#fcfcfc":e;a=a.jz;a=void 0===a?0:a;var d=this.MW(g.a.Tm(void 0===d?"#000":d)),e=this.MW(g.a.Tm(e),[0.988,0.988,0.988,1]),c=c||12,f=(217-0.3125*(80<c?80:c))/256,h=0,k=0;a&&(k=(f-0)*(1-(10<a*b?10:a)/10.1));h=1.4142*(24<c||1<b?1.7:1.5)/c;return[d,e,h,k,f-1/256*(b-1)]},fpa:function(a){return a},Jma:function(a,b,c,d,e){var f=e.mU,h=e.type,h=void 0===h?0:h;e=e.lb;var k=b.og;c=c.og;var l=void 0===c?{}: c;c=this.Yu[l.xa]||{};var m=c.T7,n=c.U7;c=f[0];var f=f[1],p=this.Zd.nV;b=e[0];e=e[1];var q=l.size,r=l.Jx,s=l.bC,l=q[0],q=q[1],u=r[0],v=r[1],r=this.fpa((void 0===k?[]:k).anchorOffset),k=r[0],r=r[1],m=(void 0===m?0:m)+s[0],n=(void 0===n?0:n)+s[1];d.push(k,r,m,n,c,f,p,h,b,e,k+l,r,m+u,n,c,f,p,h,b,e,k,q+r,m,n+v,c,f,p,h,b,e,k+l,r,m+u,n,c,f,p,h,b,e,k+l,q+r,m+u,n+v,c,f,p,h,b,e,k,q+r,m,n+v,c,f,p,h,b,e);a&&(m=this.N2(a),a=m[0],d=m[1],h=m[2],m=m[3],this.wC.push(k,r,c,f,a,d,h,m,b,e,k+l,r,c,f,a,d,h,m,b,e,k,q+ r,c,f,a,d,h,m,b,e,k+l,r,c,f,a,d,h,m,b,e,k+l,q+r,c,f,a,d,h,m,b,e,k,q+r,c,f,a,d,h,m,b,e))},Kca:function(a,b,c,d){if(b&&c){var e=b.og,e=void 0===e?[]:e,f=c.og,f=void 0===f?{}:f;!g.a.Qk(f)&&f.xa&&(e=e.origin,this.Jma(a,b,c,d.Y,{mU:this.t3(e[0],e[1]),lb:f.lb}))}},am:function(){var a=this,b=this.Zd.nV,c=this.pj||{},d=this.Yu,e={},f=Object.keys(c).length,h=0,k=0,l=this.tR;if(Object.keys(c).length)for(var m in c)c.hasOwnProperty(m)&&function(){var n=((c[m].opts||{}).icon||{}).image||"";n?d[n]?(h++,k++):(d[n]= {},d[n].status="loading",a.dG(n,function(c){h++;c&&(e[n]=c);d[n].status="complete";h==f&&(a.tR=a.YL(l,d,e,b),a.jr("icon"))})):(h++,k++);h==f&&k!==h?(a.tR=a.YL(l,d,e,b),a.jr("icon")):h==f&&a.jr("icon")}();else this.jr("icon")},zla:function(){var a={Y:[],NB:[]};this.wC=[];this.fU=this.sR=!1;var b=this.o;b.XN();for(var c=this.hn=b.hn||{},d=this.$r=b.$r||{},e=this.pj,f=this.QM(e),h=this.gi||{},b=b.options.opacity,k=0;k<f.length;k++){var l=f[k].split("-"),m=c[l[0]],n={};m&&m.text&&m.text.style&&(n=this.Jpa(c[l[0]].text.style|| {}));n.start=a.Y.length;m=e[l[0]].opts.opacity;n.opacity=this.h.tf(m)?1:m;n.opacity*=b;a.NB.push(n);for(m=0;m<l.length;m++){var p=l[m];this.Kca(p,d[p],c[p],a);this.Qca(p,d[p],c[p],a,h[p])}n.end=a.Y.length}this.KJ=a;this.D2=this.IP=""},Lca:function(){var a=this.KJ?this.KJ:{Y:[],NB:[]};if(a.Y.length){var b=this.ga,c=this.pa,d=this.Hu,e=d.kd,f=d.dU,d=d.$xa,h=this.te(),k=h.width,l=h.height,m=h.Za,h=this.Xf.elements,n=this.Zc.elements;this.cI||(this.cI=this.ZL(k*m,l*m));b.useProgram(c);b.bindFramebuffer(b.FRAMEBUFFER, null);this.eT=!0;b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA);b.viewport(0,0,k*m,l*m);this.Is++;b.uniform1fv(c.yxa,new Float32Array(f));this.gW(e);e=this.te().zoom;if(this.XB(e,this.o.options.lb)){f=new g.Ec;f=g.Ec.multiply(new g.Ec(n),f);h=g.Ec.multiply(new g.Ec(h),f);b.uniformMatrix4fv(c.sU,!1,h.elements);h=a.Y;a=a.NB;for(f=0;f<a.length;f++)n=a[f],this.uca(d,h,n.start,n.end),n.length&&(b.uniform4fv(c.Nv,n[0]),b.uniform4fv(c.hxa, n[1]),b.uniform1f(c.nxa,n[2]),b.uniform1f(c.gxa,n[3]),b.uniform1f(c.ixa,n[4])),b.uniform1f(c.uU,n.opacity),b.uniform1f(c.R8,e),b.uniform2fv(c.yK,[k,l]),d.os&&b.drawArrays(b.TRIANGLES,0,d.os);b.disable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,null);this.tM(b,c)}}else this.Is++},Mca:function(){var a=this.ga,b=this.pa,c=this.Hu.o2,d=this.te(),e=d.width,f=d.height,h=d.Za,d=d.zoom;a.viewport(0,0,e*h,f*h);a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.clear(a.COLOR_BUFFER_BIT);this.wca(c, this.wC);this.wC=[];var h=this.Xf.elements,k=this.Zc.elements,l=new g.Ec,k=g.Ec.multiply(new g.Ec(k),l),h=g.Ec.multiply(new g.Ec(h),k);a.uniformMatrix4fv(b.sU,!1,h.elements);a.uniform1f(b.R8,d);a.uniform2fv(b.yK,[e,f]);c.os&&a.drawArrays(a.TRIANGLES,0,c.os)},jr:function(a){"icon"===a&&(this.sR=!0);"text"===a&&(this.fU=!0);this.sR&&this.fU&&(this.zla(),this.set("display",0))},OBa:function(a,b){var c=this.ga,d=this.pa,e=this.te(),f=e.width,e=e.height;c.bindBuffer(c.ARRAY_BUFFER,this.Hu.o2);c.uniform2fv(d.yK, [f,e]);c.bufferData(c.ARRAY_BUFFER,new Float32Array([a,b,4,a,b,4,a,b,4]),c.STATIC_DRAW);c.uniform1i(d.pU,0);c.vertexAttribPointer(d.ir,2,c.FLOAT,!1,12,0);c.enableVertexAttribArray(d.ir);c.vertexAttribPointer(d.St,1,c.FLOAT,!1,12,8);c.enableVertexAttribArray(d.St);c.drawArrays(c.POINTS,0,1)},ko:function(a,b){var c=this.te(),d=c.width,e=c.height,f=c.Za,c=this.ga,h=this.pa;c.useProgram(h);var k=this.cI;k||(this.cI=k=this.ZL(d*f,e*f));c.bindFramebuffer(c.FRAMEBUFFER,k);this.eT&&(this.eT=!1,this.Mca()); d=new Uint8Array(4);k=b.tb;c.readPixels(k.x*f,(e-k.y)*f,1,1,c.RGBA,c.UNSIGNED_BYTE,d);e=this.gpa(d);c.bindFramebuffer(c.FRAMEBUFFER,null);this.tM(c,h);return e},kBa:function(){var a=this.ga;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},clear:function(){this.oB();this.KJ={Y:[],NB:[]}},Lj:function(){this.pB()},kc:function(a,b,c){var d=this.o;d.IC&&(d.IC=!1,d.S_(d.jD),d.jD=[]);if(d&&d.lP(b)){arguments.callee.ka.apply(this,arguments);var e=b.R,f=void 0===e?{}:e,e=b.size,h=void 0=== e?{}:e,e=f.Xf,f=f.Zc;this.o.N_({width:h.width,height:h.height});if(0===this.Is){var d=this.pj=d.pj||{},h=this.gi={},k;for(k in d)if(d.hasOwnProperty(k)){var l=d[k]||{};if(l.data.txt){for(var l=l.data.txt||"",m=[],n=0;n<l.length;n++)m.push(l.charCodeAt(n));h[k]=m}}this.gi.iP=!0;this.Nra();this.am()}this.Xf=e;this.Zc=f;this.Lca()}}})); ')