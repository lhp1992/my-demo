_jsload_('AMap.CircleEditor', 'g.ZU=g.aa.extend({ja:[g.sa],r:function(a,b,c,d){this.CLASS_NAME="AMap.CircleEditor";g.c.va(this,d);this.e=a;this.Hb=b;this.Hb.setOptions({draggable:c||!1});this.yb=g.A.yb;d&&d.FH&&(this.FH=!0)},open:function(){g.c.add(this,"open");this.Td&&this.Ub||this.ut();this.Td&&this.Td.setMap(this.e);if(this.Ub)for(var a=0,b=this.Ub.length;a<b;a+=1)this.Ub[a].setMap(this.e);this.cB=this.Hb.getOptions.draggable;this.Hb.g("dragstart",this.mZ,this);this.Hb.g("dragging",this.lZ,this);this.Hb.g("setCenter",this.WB, this);this.Hb.g("setRadius",this.ED,this)},WB:function(){var a=this.Hb.getCenter(),b=this.Td.getPosition(),b=a.$a(b);this.Ub[0].setPosition(this.Ub[0].getPosition().add(b));this.Td.setPosition(a)},ED:function(){var a=this.Hb.getCenter(),b=this.Hb.getRadius(),c=b*Math.cos(Math.PI/4);this.Ub[0].setPosition(a.offset(c,c));this.Ub[0].setLabel({content:"\\u534a\\u5f84:"+b+"\\u7c73"})},close:function(){g.c.add(this,"close");this.Td&&(this.Td.setMap(null),delete this.Td);if(this.Ub){for(var a=0,b=this.Ub.length;a< b;a+=1)this.Ub[a].setMap(null);delete this.Ub}this.Hb.setOptions({draggable:this.cB});this.Hb.G("dragstart",this.mZ,this);this.Hb.G("dragging",this.lZ,this);this.Hb.G("setCenter",this.WB,this);this.Hb.G("setRadius",this.ED,this);this.q("end",{type:"end",target:this.Hb})},mZ:function(a){this.UV=a.lnglat},lZ:function(a){var b=a.lnglat.$a(this.UV);this.UV=a.lnglat;this.Td.setPosition(this.Td.getPosition().add(b));this.Ub[0].setPosition(this.Ub[0].getPosition().add(b))},ut:function(){this.aM();this.cM()}, aM:function(){var a=this.Hb.getCenter();this.FH?(this.Td=new z.w.rb({position:a,visible:!1,innerOverlay:!0}),this.Td.za=!0):this.Td=this.Xh(a)},cM:function(){var a=this.Hb.getCenter(),a=this.HA(a);this.Ub=[];this.Ub.push(this.Xh(a,!0))},HA:function(a){var b=this.Hb.getRadius()*Math.cos(Math.PI/4);return a.offset(b,b)},Xh:function(a,b){var c=new z.w.rb({position:a,draggable:!0,icon:new z.w.Th({size:new g.xd(11,11),imageOffset:new g.H(0,0),image:this.yb+"/images/dd-via.png",innerOverlay:!0}),offset:new g.H(-6, -6),zIndex:this.Hb.get("zIndex")+1E3,innerOverlay:!0});c.za=!0;b&&(c.setLabel({content:"\\u534a\\u5f84:"+this.Hb.getRadius()+"\\u7c73",offset:new AMap.Pixel(15,-4)}),c.setTitle("\\u62d6\\u62fd\\u4fee\\u6539\\u534a\\u5f84"));this.kA(c);return c},kA:function(a){a.g("dragstart",this.NZ,this).g("dragging",this.Fm,this).g("dragend",this.Xq,this)},r0:function(a){a.G("dragstart",this.NZ,this).G("dragging",this.Fm,this).G("dragend",this.Xq,this)},NZ:function(){},Gn:function(){this.Hb.Qna=!0;this.Hb.q("edit")},Fm:function(a){a= a.target;var b=a.getPosition();a===this.Td?this.yN(b):this.qB(b)},Xq:function(){this.Gn();this.q("dragend",{type:"dragend",target:this.Hb})},yN:function(a){if(!this.FH){var b=this.Ub[0].getPosition().add(a.$a(this.Hb.getCenter()));this.Ub[0].setPosition(b);this.Hb.setCenter(a,!0);this.q("move",{type:"move",lnglat:a,target:this.Hb})}},qB:function(a){var b=this.Hb.getCenter();a=Math.round(b.distance(a));this.Hb.setRadius(a,!0);this.Ub[0].setLabel({content:"\\u534a\\u5f84:"+a+"\\u7c73"});this.q("adjust", {type:"adjust",radius:a,target:this.Hb})}});window.AMap.CircleEditor=g.ZU; ')