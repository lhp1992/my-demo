_jsload_('AMap.Driving', 'g.Fi=g.Fi?g.Fi:{LEAST_TIME:0,LEAST_FEE:1,LEAST_DISTANCE:2,REAL_TRAFFIC:4};g.LFa={"\\u901f\\u5ea6\\u6700\\u5feb":0,"\\u8d39\\u7528\\u6700\\u4f4e":1,"\\u8ddd\\u79bb\\u6700\\u77ed":2,"\\u4e0d\\u8d70\\u5feb\\u901f\\u8def":3,"\\u53c2\\u8003\\u4ea4\\u901a\\u4fe1\\u606f\\u6700\\u5feb":4}; g.hw=g.aa.extend({ja:[g.sa],r:function(a){this.CLASS_NAME="AMap.Driving";g.a.ub(this);g.c.va(this,a);this.M=g.extend({showTraffic:!0,showDir:!0,policy:0,outlineColor:"#ffe",isOutline:!0,autoFitView:!0},a);this.url=g.A.Rd+"/v3/direction/driving";this.yg=[];(this.M.map||this.M.panel)&&g.qb.load("AMap.DrivingRender")},gY:function(){return Math.round(1E5*Math.random())},clear:function(){g.c.add(this,"clear");this.N&&this.N.clear()},search:function(){g.c.add(this,"search");var a=arguments;if(0<a.length)if(a[0]= g.a.Ha(a[0]),a[1]=g.a.Ha(a[1]),a[0].Q&&a[0].P)this.dk.apply(this,a);else if(a[0]instanceof Array){var b=this,c=a[1];g.qb.Lg(["AMap.PlaceSearch","AMap.GetLL"],function(){b.Bh||(b.Bh=new g.Tz);b.Bh.zQ(function(d){b.Bh.get(a[0],d.citycode||"",function(d,f){if("error"===d)c&&"function"===typeof c&&c("error",f);else if("complete"===d){for(var h=f[0].exit_location||f[0].location,k=f[f.length-1].entr_location||f[f.length-1].location,l=f.slice(1,f.length-1),m=[],n=0;n<l.length;n+=1)m.push(l[n].entr_location|| l[n].location);b.dk(h,k,{waypoints:m},a[1]||void 0,f)}else"no_poi"===d?a[1]&&a[1]("error",{info:"\\u5728\\u57ce\\u5e02"+f.city+"\\u65e0\\u6cd5\\u627e\\u5230"+f.keyword}):"no_city"===d&&a[1]&&a[1]("error",{info:"\\u8bf7\\u8bbe\\u7f6e"+f.keyword+"\\u7684\\u57ce\\u5e02\\u4fe1\\u606f"})})})})}},setAvoidPolygons:function(a){g.c.add(this,"setAvoidPolygons");this.yg=a=g.a.Ha(a)},clearAvoidPolygons:function(){g.c.add(this,"clearAvoidPolygons");this.yg=[]},getAvoidPolygons:function(){g.c.add(this,"getAvoidPolygons");return this.yg}, setAvoidRoad:function(a){g.c.add(this,"setAvoidRoad");this.Ki=a},clearAvoidRoad:function(){g.c.add(this,"clearAvoidRoad");this.Ki=""},getAvoidRoad:function(){g.c.add(this,"getAvoidRoad");return this.Ki},searchOnAMAP:function(a){g.c.add(this,"searchOnAMAP");var b={t:0};b.m="undefined"!==typeof a.m?a.m:this.M.policy;var c=g.a.Ha(a.origin),d=g.a.Ha(a.destination);b.sy=c.P;b.sx=c.Q;b.sname=a.originName||"";b.dy=d.P;b.dx=d.Q;b.dname=a.destinationName||"";g.Qh.Ks(g.Qh.VQ(b))},setProvinceAndNumber:function(a, b){a&&b&&(this.M.province=a,this.M.number=b)},dk:function(a,b,c,d,e){2===arguments.length&&(c={});3===arguments.length&&"function"===typeof c&&(d=c,c={});if(a instanceof g.T&&b instanceof g.T){var f=["origin="+a.toString(),"destination="+b.toString(),"extensions="+this.fa(this.M.extensions),"s=rsv3"];this.M.province&&this.M.number&&(f.push("province="+this.M.province),f.push("number="+this.M.number.toUpperCase()));f.push("strategy="+this.fa(this.M.policy));f.push("ferry="+this.Jb(this.M.ferry+0)); c.waypoints&&c.waypoints.slice&&(c.waypoints=c.waypoints.slice(0,16),f.push("waypoints="+c.waypoints.join(";")));if(this.yg.length){for(var h=[],k=0;k<this.yg.length;k+=1)h.push(this.yg[k].join(";"));f.push("avoidpolygons="+h.join("|"))}this.Ki&&f.push("avoidroad="+this.Ki);f.push("key="+g.A.key);f=new g.fb.vb(this.url+(0<f.length?"?"+f.join("&"):""),{callback:"callback"});f.g("complete",function(a){this.Fc(a,d,e,{waypoints:g.a.Ha(c.waypoints)})},this);f.g("error",function(a){this.ec(a,d)},this)}else d&& "function"===typeof d&&d("error","NO_PARAMS")},setPolicy:function(a){g.c.add(this,"setPolicy");this.M.policy=a},setLocation:function(a){g.c.add(this,"setLocation");this.M.city=a},ec:function(a,b){z.event.O(this,"error",a);b&&"function"===typeof b&&b("error",a.info)},Bd:function(a){a=a.split(",");return new g.T(a[0],a[1])},hp:function(a){var b=[];a=a.split(";");for(var c=0;c<a.length;c+=1)b[c]=this.Bd(a[c]);return b},fa:function(a){return"object"===typeof a||"undefined"===typeof a?"":a},Jb:function(a){a= parseInt(a,10);return isNaN(a)?0:a},UN:function(a){var b=[];a=a.path?[a.path]:a;for(var c=0;c<a.length;c+=1){var d=a[c];b[c]={steps:this.Gt(d.steps),restriction:this.Jb(d.restriction),distance:this.Jb(d.distance),time:this.Jb(d.duration),policy:d.strategy,tolls:this.Jb(d.tolls),tolls_distance:this.Jb(d.toll_distance)}}return b},Gt:function(a){for(var b=[],c=this,d=0;d<a.length;d+=1){var e=a[d],f=this.hp(e.polyline);b[d]={start_location:f[0],end_location:f[f.length-1],instruction:this.fa(e.instruction), orientation:this.fa(e.orientation),road:this.fa(e.road),distance:this.Jb(e.distance),tolls:this.Jb(e.tolls),toll_distance:this.Jb(e.toll_distance),toll_road:this.fa(e.toll_road),time:this.Jb(e.duration),path:f,action:this.fa(e.action),assistant_action:this.fa(e.assistant_action)};this.be(e.cities)&&(b[d].cities=this.Ft(e.cities,function(a,b){var d;switch(b){case "districts":d=c.Ft(a);break;default:d=a}return d}));this.be(e.tmcs)&&(b[d].tmcs=this.Ft(e.tmcs,function(a,b,c){switch(b){case "distance":a= +a;break;case "polyline":c.path=this.hp(a);break}return a}),b[d].tmcsPaths=this.tN(b[d].tmcs))}return b},tN:function(a){var b=[],c=null,d,e;d=0;for(e=a.length;d<e;d++){var f=a[d].path,h=a[d].status;if(!f||!f.length)return;c&&h===c.status&&f[0].cb(c.path[c.path.length-1])?c.path.push.apply(c.path,f):(b.push({path:[].concat(f),status:h}),c=b[b.length-1])}return b},Ft:function(a,b){for(var c=[],d=0;d<a.length;d+=1){var e={},f;for(f in a[d])a[d].hasOwnProperty(f)&&(e[f]="function"===typeof b?b.call(this, a[d][f],f,e):a[d][f]);c.push(e)}return c.length?c:null},be:function(a){return"[object Array]"===Object.prototype.toString.call(a)?!0:!1},close:function(){g.c.add(this,"close");this.closed=!0},open:function(){g.c.add(this,"open");this.closed=!1},Fc:function(a,b,c,d){if(!this.closed){var e,f=this;if(parseInt(a.status,10))if(a.route){e={info:a.info,origin:this.Bd(a.route.origin),destination:this.Bd(a.route.destination),routes:this.UN(a.route.paths)};"all"===this.M.extensions&&(e.taxi_cost=Math.ceil(a.route.taxi_cost)); if(c)for(e.start=c[0],e.end=c[c.length-1],e.originName=e.start.name,e.destinationName=e.end.name,e.waypoints=c.slice(1,c.length-1),a=0,c=e.waypoints.length;a<c;a++)e.waypoints[a].isWaypoint=!0;else if(d&&(e.start={location:e.origin,name:"\\u8d77\\u70b9"},e.end={location:e.destination,name:"\\u7ec8\\u70b9"},e.start.type="start",e.end.type="end",e.waypoints=[],d&&d.waypoints))for(d=d.waypoints,a=0,c=d.length;a<c;a++)e.waypoints.push({isWaypoint:!0,location:d[a],name:"\\u9014\\u7ecf\\u70b9",type:"waypoint"}); (f.M.map||f.M.panel)&&g.qb.load("AMap.DrivingRender",function(){f.N||(f.N=new window.AMap.DrivingRender({showTraffic:f.M.showTraffic,showDir:f.M.showDir,zIndex:f.M.zIndex}));f.N.autoRender({data:e,panel:f.M.panel,map:f.M.map,hideMarkers:f.M.hideMarkers||!1,isOutline:f.M.isOutline,outlineColor:f.M.outlineColor,autoFitView:f.M.autoFitView},f)});g.event.O(this,"complete",e);b&&"function"===typeof b&&b("complete",e)}else e={info:"ok"===a.info.toLowerCase()?"NO_DATA":a.info},g.event.O(this,"complete", e),b&&"function"===typeof b&&b("no_data",{});else e={info:a.info},g.event.O(this,"error",e),b&&"function"===typeof b&&b("error",a.info)}}});window.AMap.Driving=g.hw;window.AMap.DrivingPolicy=g.Fi; ')