_jsload_('cvector', 'g.N.canvas.ol=g.N.Gi.extend({r:function(a,b){arguments.callee.ka.apply(this,arguments);var c=this;this.nY=function(){c.h.Vl=!0;c.set("display",0)};this.Gg();this.h.W("feature",this,!0)},TFa:function(a,b){return g.I.Hg(a,b.gv)||g.I.Hg(a,b.zsa)},WQ:function(){return this.Xa.$T},Gg:function(){this.Qa=document.createElement("canvas");this.Qa.className="amap-layer amap-vectors";this.Fb=this.Qa.getContext("2d");this.ah=this.h.Mc?this.h.Za:1;this.Xa=new g.N.canvas.$c(this.Qa,this.nY,this.ah)},RCa:function(a, b,c){var d=a.x;a=a.y;return[this.yS*d-b*this.sg,this.yS*a-c*this.sg,this.yS*(d+1)+b*this.sg,this.yS*(a+1)+c*this.sg]},iBa:function(){500<this.h.ev.length&&this.ta.clear();if(!this.ta.Qk()&&0!==this.h.ev.length)for(var a in this.h.ev)if(this.h.ev.hasOwnProperty(a)){var b=this.h.ev[a];if(b.da){var c=b.da.pd(),d=[];this.ta.forEach(function(a,b){g.I.Hg(a[1],c)&&d.push(b)},this);for(b=0;b<d.length;b+=1)this.ta.remove(d[b])}}this.h.ev=[]},kc:function(a,b){if(this.W6||this.Ka!==a.R.nb||this.Ka.zoom!==a.R.zoom|| this.Ka.rotation!==a.R.rotation||this.h.Vl||this.e.Av||this.e.sQ){var c=this.R=a.R,d=this.S=c.S,e=this.h;this.zoom=c.zoom;this.ib=c.nb;this.Vp=a.S;this.rotation=c.rotation;var f=a.R.Ga;this.ze=c.ze;c=this.ah;if(!this.Ka||this.h.Vl||!a.Mg&&!a.Ze||b.Ax&&!a.Z){this.Ka=this.ib;this.Ka.zoom=this.zoom;this.Ka.rotation=this.rotation;this.cm=this.S;this.h.Vl=!1;this.Xa.ah=c;this.Xa.S=a.R.S/c;this.Xa.sg=a.R.sg/c;this.Xa.Vp=a.S;this.Xa.Yd=[f.Zb.x,f.Zb.y];this.Xa.ib=this.ib;var h=this.Qa;h.width=Math.round(2* f.tc.x)*c;h.height=Math.round(2*f.tc.y)*c;var h=this.h.Jy||0,k=this.h.Ky||0,c=Math.max(this.h.mf,h/this.S)+k,h=Math.max(this.h.Yf,h/this.S)+k,f=[f.Zb.x,f.Zb.y,f.Fd.x,f.Fd.y];f[0]-=c*d;f[1]-=h*d;f[2]+=c*d;f[3]+=h*d;c=e.$m(f);d=[[f[0],f[1]],[f[2],f[1]],[f[2],f[3]],[f[0],f[3]],[f[0],f[0]]];this.Xa.Fb.DH=0;this.Xa.Fb.XD=!1;if(this.h.U.kj)e=this.h.get("style"),this.Xa.V6(c,e)||(this.W6=!0);else{for(var l in c)c.hasOwnProperty(l)&&(c[l].get("visible")||delete c[l]);e=e.cR(c);l=e.length;this.W6=!1;for(f= 0;f<l;f+=1)this.Xa.V6(e[f][0],null,d)}this.De(a)}else this.De(a,b,!0)}},De:function(){var a=Math.pow(2,this.zoom-this.Ka.zoom),b=this.h.Mc?this.h.Za:1;this.transform={translate:this.ib.$a(this.Ka).dd(this.cm/b).add({x:this.Qa.width/2,y:this.Qa.height/2}),scale:a/b,rotate:0}},hj:function(){return this.Qa}});g.N.canvas.$c=g.aa.extend({r:function(a,b,c){if(this.Qa=a)this.Fb=a.getContext("2d");this.RT=3;this.Kc=this.ah=c;this.Vx={};this.M1("white");this.Da={};this.rt=b},M1:function(a){if(!this.Vx[a]){var b=document.createElement("canvas"),c=24*this.Kc;b.width=c;b.height=c;var d=b.getContext("2d");d.strokeStyle=a;d.lineJoin="round";d.lineWidth=8*this.Kc;d.moveTo(-4,c-4);d.lineTo(c/2,6);d.lineTo(c+4,c-4);d.stroke();return this.Vx[a]=b}return this.Vx[a]},Dra:function(a){if(!this.Vx[a]){var b=this,c=document.createElement("img"); c.onload=function(){c.loaded=!0;b.rt()};c.onerror=function(){c.loaded=!0};c.src=a;return this.Vx[a]=c}return this.Vx[a]},V6:function(a,b,c){var d=!0,e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e],h=f.name.split("-")[0];"circle"===h?d=this.Mua(f,b||f.style):"point"===h?d=this.X6(f,b):"polyline"===h?d=this.rT(f,b||f.style):"polygon"===h||"multipolygon"===h?d=this.pT(f,b||f.style,c):"text"===h&&this.XEa(f,b||f.style)}return d},Mua:function(a,b){var c=this.Fb,d=b.strokeColor,e=b.strokeWeight,f=b.strokeOpacity, h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p=2*Math.PI,q,r;c.setLineDash&&c.setLineDash([]);c.save();h&&(c.fillStyle=h);d&&(e&&(c.lineWidth=e*this.Kc),c.strokeStyle=d);e=a.cc();e instanceof g.Aa.vg&&(r=[e]);for(var e=0,s=r.length;e<s;e+=1){c.beginPath();q=r[e].wa;q=this.Wf(q,q[0]);var u=0,u=a.Ru?a.get("radius")*this.Kc:a.get("radius")/(this.Vp*Math.cos(Math.PI*a.get("center").P/180))*this.Kc;c.arc(q[0],q[1],u,0,p,!0);c.closePath();h&&k!==n&&(n=c.globalAlpha=k);c.fill();d&& (f!==n&&(n=c.globalAlpha=f),"dashed"===l?c.setLineDash?(c.setLineDash(m),c.stroke()):c.Vma(q[0],q[1],u,m):c.stroke())}c.restore();return!0},X6:function(a,b){b instanceof Array&&(b="number"===typeof a.eb.style&&b[a.eb.style]?b[a.eb.style]:b[0]);var c=this.Fb,d,e,f=0,h=0;d=this.lo(b.url);if(!d)return!1;var k=b.size.width,l=b.size.height,f=b.anchor.x,h=b.anchor.y;e=a.cc();e=this.Wf(e.wa,e.wa[0]);var m=b.rotation_;if(0!==m){var n=Math.cos(m),p=Math.sin(m),q=e[0],r=e[1];c.transform(n,p,-p,n,(1-n)*q+p* r,(1-n)*r-p*q)}c.drawImage(d,Math.round(e[0]-f),Math.round(e[1]-h),k,l);0!==m&&c.setTransform(1,0,0,1,0,0);return!0},upa:function(a,b,c){return[(b[0]-a[0])*c+a[0],(b[1]-a[1])*c+a[1]]},rT:function(a,b){var c=this.Fb,d,e,f,h,k,l,m,n,p,q;n=[NaN,NaN,0];var r=[NaN,NaN],s=[NaN,NaN];c.globalAlpha=b.strokeOpacity;d=b.strokeStyle;e=b.strokeDasharray;c.lineCap=b.lineCap||"butt";c.lineJoin=b.lineJoin||"round";c.setLineDash&&c.setLineDash([]);c.save();c.beginPath();h=a.Kz||a.cc();h instanceof g.Aa.Jq?k=[h]:h instanceof g.Aa.ow&&(k=h.Nf);var u=b.dirImg;u?"CANVAS"!==u.tagName&&(u=this.Dra(u)):u=this.M1(b.dirColor);f=b.strokeWeight/u.width*0.8;var v=5*b.strokeWeight,x=b.showDir&&u&&u.width,t=[],w=h.zu()[0];h=0;for(l=k.length;h<l;h+=1){m=k[h].wa;var y=[],E=0;p=0;for(q=m.length;p<q;p+=1)if(n=m[p],n=this.Wf(n,w),y.push(n),0===p)s[0]=n[0],s[1]=n[1],c.moveTo(n[0],n[1]);else if(r[0]=n[0],r[1]=n[1],p===m.length-1||Math.abs(r[0]-s[0])>=this.RT||Math.abs(r[1]-s[1])>=this.RT){if(x){var C=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]- s[1],2));if(C+E>v){var F=0,F=s,A=r;if(A[0]===F[0])F=A[1]>F[1]?Math.PI:0;else if(A[1]===F[1])F=A[0]>F[0]?Math.PI/2:-Math.PI/2;else{var B=A[0]-F[0],A=A[1]-F[1],F=Math.atan(B/A);0<B&&0<A?F=Math.PI-F:0>B&&0>A?F=-F:0<B&&0>A?F=-F:0>B&&0<A&&(F=Math.PI-F)}for(B=v-E;B<C;)A=this.upa(s,r,B/C),0<A[0]&&A[0]<this.Qa.width&&0<A[1]&&A[1]<this.Qa.height&&t.push(A[0],A[1],F),B+=v;E=(C-(v-E))%v}else E+=C}"dashed"!==d||c.setLineDash?c.lineTo(n[0],n[1]):c.HP(s[0],s[1],n[0],n[1],e);s[0]=r[0];s[1]=r[1]}}"dashed"===d&&c.setLineDash&& c.setLineDash(e);b.isOutline&&(c.strokeStyle=b.outlineColor,c.lineWidth=(b.strokeWeight+2*b.borderWeight)*this.Kc,c.stroke());b.strokeColor&&b.strokeWeight&&(c.strokeStyle=b.strokeColor,c.lineWidth=b.strokeWeight*this.Kc,c.stroke());c.restore();if(t.length)for(d=-u.width/2*f*this.Kc,e=u.width*f*this.Kc,f=0;f<t.length;f+=3)c.save(),c.translate(t[f],t[f+1]),c.rotate(t[f+2]),c.drawImage(u,d,d,e,e),c.restore();return!0},pT:function(a,b,c){var d=this.Fb,e=b.strokeColor,f=b.strokeWeight,h=b.strokeOpacity, k=b.fillColor,l=b.fillOpacity,m=b.strokeStyle,n=b.strokeDasharray,p,q,r,s,u,v,x,t;r=[NaN,NaN,0];var w=[NaN,NaN],y=[NaN,NaN];d.setLineDash&&d.setLineDash([]);d.save();e&&(d.strokeStyle=e,f&&(d.lineWidth=f*this.Kc),d.lineCap="butt",d.lineJoin=b.lineJoin||"miter");k&&(d.fillStyle=k);d.beginPath();this.Bz={};b=0;a=a.Kz||a.cc();a instanceof g.Aa.yc?q=[a]:a instanceof g.Aa.pw&&(q=a.Nf);var E=a.zu()[0];a=0;for(f=q.length;a<f;a+=1)if(r=q[a],s=r.zf,u=s.length,0<u)for(var C=0;C<u;C+=1){var F;v=s[C].wa;c&&2< v.length&&(r=E-this.ib.x,r>g.a.Ca/2?c=[[c[0][0]+g.a.Ca,c[0][1]],[c[1][0]+g.a.Ca,c[1][1]],[c[2][0]+g.a.Ca,c[2][1]],[c[3][0]+g.a.Ca,c[3][1]],[c[4][0]+g.a.Ca,c[4][1]]]:r<-g.a.Ca/2&&(c=[[c[0][0]-g.a.Ca,c[0][1]],[c[1][0]-g.a.Ca,c[1][1]],[c[2][0]-g.a.Ca,c[2][1]],[c[3][0]-g.a.Ca,c[3][1]],[c[4][0]-g.a.Ca,c[4][1]]]),v=g.wd.v6(v,c));this.Bz[b]=[];x=0;for(t=v.length;x<t;x+=1)if(r=v[x],r=this.Wf(r,E),this.Bz[b].push(r),0===x)y[0]=NaN,y[1]=NaN,F=[r[0],r[1]],d.moveTo(r[0],r[1]);else if(w[0]=g.a.nc(r[0],1),w[1]= g.a.nc(r[1],1),w[0]!==y[0]||w[1]!==y[1])d.lineTo(r[0],r[1]),y[0]=w[0],y[1]=w[1];b+=1;F&&d.lineTo(F[0],F[1])}d.closePath();k&&(l!==p&&(p=d.globalAlpha=l),d.fill());if(e){h!==p&&(d.globalAlpha=h);if("dashed"===m)if(d.setLineDash)d.setLineDash(n);else{d.beginPath();for(var A in this.Bz)if(this.Bz.hasOwnProperty(A))for(k=this.Bz[A],l=0,m=k.length;l<m;l+=1)p=l===m-1?0:l+1,c=Math.round(k[l][0]),e=Math.round(k[l][1]),h=Math.round(k[p][0]),p=Math.round(k[p][1]),d.HP(c,e,h,p,n)}d.stroke()}d.restore();return!0}, lo:function(a){var b=this.Da[a];if("undefined"===typeof b)b=document.createElement("img"),b.src=a,this.Da[a]=b,b.loaded=!1,g.F.oj(b,"load",function(){b.loaded=!0;var a=document.createElement("canvas");a.width=b.naturalWidth;a.height=b.naturalHeight;a.getContext("2d").drawImage(b,0,0);b.canvas=a;this.rt&&this.rt()},this);else if(b.loaded)return b.canvas||b},JCa:function(a){a=this.lo(a);if(a.pattern)return a.pattern;if(a){var b=this.Fb.createPattern(a,"repeat");return a.pattern=b}return null},Wf:function(a, b){var c=this.S,d=a[0];if(void 0!==b&&this.ib){var e=b-this.ib.x;e>g.a.Ca/2?d-=g.a.Ca:e<-g.a.Ca/2&&(d+=g.a.Ca)}d=(d-this.Yd[0])/c;return[d,(a[1]-this.Yd[1])/c]}}); ')