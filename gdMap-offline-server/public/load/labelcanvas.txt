_jsload_('labelcanvas', 'g.N.canvas.tL=g.N.canvas.Bj.extend({r:function(a,b){arguments.callee.ka.apply(this,arguments);a.e.D.Qp&&this.RB(a,b);this.vo=!1;this.Sn=g.o.xw.ni;a.e.g("zoomend",this.Nj,this);a.e.g("moveend",this.Nj,this)}});g.l.lK&&!g.o1&&(g.o1=function(){function a(a,l,m,n){var p=a.vd,q=a.Ma.slice(1),r=a.tg,s=a.qd,u=m?15:7,v,x=[];h=[];for(var t=[],w=0,y=q.length;w<y;w+=1){var E=q[w][0];v=q[w][1].split("&");var C=parseInt(v[1]);if(!s){var F="Microsoft YaHei",A=b(v[2]),B=null;C>=u&&(F="SimHei");"roadlabel"===p&&(F="Arial Narrow,Arial");v[3]&&(B=b(v[3]));E.font=F;E.B2=A;E.strokeColor=B;E.Zpa=b(v[4]);E.Ku=v[5]}v=v[0];l&&(C*=d);E.fontSize=Math.round(C);E.Rf=v;for(C=0;C<E.length;C+=1){A=E[C];v=A[1];var G=e,F="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM", G=G||"v5",H=B=void 0;"v5"<G?(B=F.length,H=512):(B=27,F=F.substr(0,27),H=333);for(var I=G=void 0,M=void 0,L=void 0,O=void 0,I=[],M=NaN,L=0,O=v.length;L<O;L++)G=v[L],G=F.indexOf(G),isNaN(M)?M=G*B:(I.push(M+G-H),M=NaN);v=I;if(!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){B=F=0;H=1;F=256*r.x;B=256*r.y;H=r.S;v={textBaseline:"top",textAlign:"left",wa:[(F+v[0])*H,(B+v[1])*H],name:"aw"===A[0]?"\\u2191":A[0].replace("^",""),Na:v,Da:[],Ta:[],visible:!0,ek:!0,c8:q[w][4]};if("roadlabel"===p){v.sc=q[w][3];F=v;B=E;H= s;O=r;G=l;I=m;M=n;L=!1;F.lj=!0;F.margin=0;F.z=O.z;F.zIndex=9E3;F.id="roadlabel_"+f(F);O="";if((O=B.Rf)&&A[3]){F.Tu=!0;var K=void 0;F.Da.push(M+"://vdata.amap.com/style_icon/icon-normal-"+(I||G?"big":"small")+".png");var O=parseInt(O)-1,M=Math.floor(O/10),O=O%10,D=K=0,L=0;G?(K=48,D=40,L=28):I?(K=D=40,L=28):(K=D=24,L=20);I=F.name.length*(G?14:10);K=[-I/2,-K/2-1,I,K,D*O,D*M,D,D];F.u1=L;F.Le=7;F.Ta.push(K);L=!0}I=void 0;H?A[4]&&(I=H.u,F.Da.push(I),H=H.b[A[4][0]],F.Le=B.fontSize,F.Ta.push([-Math.floor(H[2]/ 2),-Math.floor(H[3]/2)+1,H[2],H[3],H[0],H[1],H[2],H[3]])):(F.textBaseline="middle",F.textAlign="center",O=B.strokeColor,L&&(B.fontSize=Math.min(18,B.fontSize)),F.u1=G?28:16,F.ld||(F.ld=[]),F.ld.push([F.name,B.font,L&&!G?9:B.fontSize,B.B2,O,0,0,L,[0,0,0,0]]),F.Ta.push([0,0,0,0]));F.jq=A[2]?"\\u2191"!==A[0]&&(15>A[2]%90||75<A[2]%90)?90*Math.floor((A[2]+15)/90):A[2]:0}else if("poilabel"===p){v.Be=0>q[w][2]?0:q[w][2];q[w][3]?2E4<v.Be?(20008<v.Be?v.si=4:20007<v.Be?v.si=5:20004<v.Be?v.si=7:20002<v.Be&&(v.si= 8),v.si=Math.min(q[w][3],v.si)):v.si=10===a.tg.z?9:q[w][3]:v.si=3;v.sc=q[w][4];v.ou=q[w][5];F=v;B=E;H=s;G=l;I=m;D=n;F.$l=1;M=A[0].split("^");L=A[2];K=B.Rf;O=!1;F.id=A[4]||"poilabel_"+f(F);F.margin=c;F.zIndex=9001;if(K&&A[3]){O=void 0;F.Da.push(D+"://vdata.amap.com/style_icon/icon-"+("1"===B.Ku?"biz-":"normal-")+(I||G?"big":"small")+".png");var K=parseInt(K)-1,O=Math.floor(K/10),D=K%10,Q=0,P=0;G?(Q=48,P=40):Q=I?P=40:P=24;O=[-Q/2,-Q/2,Q,Q,P*D,P*O,P,P];if(151===K||152===K||153===K)F.u1=G?20:10;2<=K&& 5>=K&&(O[8]=!0);F.Rf=K;F.Ku=parseInt(B.Ku,10);F.Le=7;F.Ta.push(O);O=!0}if(0<L.length)for(P=void 0,K=0;K<L.length;K+=1)if(H)A[6]&&(F.Da.push(H.u),P=H.b[A[6][K]],F.Le=B.fontSize,G&&(L[K][0]=Math.round(L[K][0]*d),L[K][1]=Math.round(L[K][2]*d)),D=L[K][0],Q=O?Math.min(L[K][2],P[2]):P[2],F.Ta.push([D,L[K][1]-(G?4:2),Q,P[3],P[0],P[1],P[2],P[3]]));else{F.ld||(F.ld=[]);var P=M[K],D=L[K][0],J=L[K][1]+K,Q=L[K][2],N=L[K][3];G&&(D=Math.round(D*d),J=Math.round(J*d),Q=Math.round(Q*d),N=Math.round(N*d));J-=I?3:1; F.ld.push([P,B.font,B.fontSize,B.B2,B.strokeColor,0,0,B.Zpa,[D,J,Q,N]]);F.Ta.push([D,J,Q,N])}A[4]&&(F.qs=A[4]);A[5]&&(F.Wr=A[5]);v.Wr&&t.push(v.Wr)}x.push(v)}}}a.Ma=x;t.length&&(a.dn=t);return[a,h]}function b(a){if(!a)return"";for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16));b.push((b.shift()/255).toFixed(2));return"rgba("+b.join(",")+")"}var c,d,e,f=function(){var a=0;return function(b){b._amap_label_id_||(a+=1,b._amap_label_id_=a);return b._amap_label_id_}}(),h=[];return{parseLabel:function(b, f){function h(a){var b=a.Ma;s&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b.length-1,d=s[b[c]];b[1]=d.browserStyle[d.levelStyleMapping[n]];"4"!==b[c].charAt(0)&&"roadlabel"===a.vd&&(b[1]=b[1][1])}})}c="3D"==b.Bi?0:3;e=b.Se;var n=b.Ey,p=b.gq;d=b.e7;var q=b.Z,r=b.mua,s=null,u=[];void 0!==b.Bx&&(s=b.Je[b.Bx].stylemaps);for(var v=0,x=b.Ic.length;v<x;v+=1){var t=b.Ic[v];h(t);t=a(t,p,q,r);u.push.apply(u,t[1])}delete b.Je;f(null,{data:b,icons:u.length?u:null})},postStyle:function(){}}}, g.pk&&g.pk.jf(null,g.o1,function(a){a||(g.pk.Zxa=!0)}));g.N.canvas.Bj.zb({zna:function(a,b,c){if(b.WR){var d=this.h.ia;a=g.l.Iy&&g.l.QD?"800":"400";var e=this.wk;e.textAlign=b.textAlign;e.textBaseline=b.textBaseline;var f=b.name,f=b.font,h=b.tq,k=c?c[0]:b.nz;c=c?c[1]:b.qy;var l=[0,0,0,0];b.yd=k||c;e.font=a+" "+h+"px "+f;for(var m=0;m<b.WR.length;m+=1){f=b.name[m%b.name.length];a=this.tI(b.WR[m]);var n=b.pra[m]%360*-Math.PI/180;if(0!==n){var p=Math.cos(n),q=Math.sin(n),r=a[0],s=a[1];e.transform(p,q,-q,p,(1-p)*r+q*s,(1-p)*s-q*r)}this.sC(a,l,f,k,c,h,!1,d); 0!==n&&e.setTransform(1,0,0,1,0,0)}b.Le=h}},QP:function(a,b,c){var d=b.lj,e=this.h.ia,f=g.l.Iy&&g.l.QD?"800":"400",h=this.wk,k=b.jq%360*-Math.PI/180;h.textAlign=b.textAlign;h.textBaseline=b.textBaseline;if(k){var l=Math.cos(k),m=Math.sin(k),n=a[0],p=a[1];h.transform(l,m,-m,l,(1-l)*n+m*p,(1-l)*p-m*n)}if(d){var q=b.ld[0],d=q[0],p=q[1],l=q[2],m=c?c[0]:q[3],n=c?c[1]:q[4],q=q[8];b.yd=m||n;h.font=f+" "+l+\'px sans-serif,-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, sans-serif\'; if(!b.VP){l=parseInt(h.font);if(100<l||!l)l=parseInt(h.font.split(" ")[1]);c=h.measureText(d).width;b.Ta[b.Da.length]=[-c/2,-l/2,c,l]}this.sC(a,q,d,m,n,b.Ta[b.Da.length][2],!1,e);b.Le=l}else for(var r=0;r<b.ld.length;r+=1){var q=b.ld[r],d=q[0],p=q[1],m=c?c[0]:q[3],n=c?c[1]:q[4],s=c?c[2]:q[7],l=q[2],q=q[8];b.yd=s||m||s;h.font=f+" "+l+"px "+p;this.sC(a,q,d,m,n,q[2],s,e);b.Le=l}b.VP=!0;0!==k&&h.setTransform(1,0,0,1,0,0)},Qpa:function(a){return Math.min(Math.max(100*(a-this.T0),400),500)+""},sC:function(a, b,c,d,e,f,h,k){var l=this.wk,m=a[0]+b[0];a=a[1]+b[1];h&&(l.fillStyle!==h&&(l.fillStyle=h),l.fillRect(m-4,a-2,b[2]+8,b[3]+4));e&&(b=k?3:2,l.lineWidth!==b&&(l.lineWidth=b),l.strokeStyle!==e&&(l.strokeStyle=e),l.strokeText(c,m,a,f));d&&(l.fillStyle!==d&&(l.fillStyle=d),l.fillText(c,m,a,f))}}); ')