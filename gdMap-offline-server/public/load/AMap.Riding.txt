_jsload_('AMap.Riding', 'g.pL=g.pL?g.pL:{DEFAULT:0,RECOMMENDED:1,FASTEST:2}; g.K$=g.aa.extend({ja:[g.sa],r:function(a){this.CLASS_NAME="AMap.Riding";g.c.va(this,a);this.M=g.extend({outlineColor:"white",showDir:!0,isOutline:!0,autoFitView:!0},a);this.url=g.A.Rd+"/v4/direction/bicycling";(this.M.map||this.M.panel)&&g.qb.load("AMap.RidingRender")},clear:function(){g.c.add(this,"clear");this.N&&this.N.clear()},setPolicy:function(a){g.c.add(this,"setPolicy");this.M.policy=a},search:function(){g.c.add(this,"search");var a=arguments;if(0<a.length)if(a[0]=g.a.Ha(a[0]),a[1]=g.a.Ha(a[1]), a[0].Q&&a[0].P)this.dk.apply(this,a);else if(a[0]instanceof Array){var b=this,c=a[1];g.qb.Lg(["AMap.PlaceSearch","AMap.GetLL"],function(){b.Bh||(b.Bh=new g.Tz);b.Bh.zQ(function(d){b.Bh.get(a[0],d.citycode||"",function(d,f){"error"===d?c&&"function"===typeof c&&c("error",f):"complete"===d?b.dk(f[0].exit_location||f[0].location,f[1].entr_location||f[1].location,a[1]||void 0,f):"no_poi"===d?a[1]&&a[1]("error",{info:"\\u5728\\u57ce\\u5e02"+f.city+"\\u65e0\\u6cd5\\u627e\\u5230"+f.keyword}):"no_city"===d&&a[1]&& a[1]("error",{info:"\\u8bf7\\u8bbe\\u7f6e"+f.keyword+"\\u7684\\u57ce\\u5e02\\u4fe1\\u606f"})})})})}},dk:function(a,b,c,d){a instanceof g.T&&b instanceof g.T?(a=["origin="+a.toString(),"destination="+b.toString(),"s=rsv3"],a.push("key="+g.A.key),a=this.url+(0<a.length?"?"+a.join("&"):""),a=new g.fb.vb(a,{callback:"callback"}),a.g("complete",function(a){this.Fc(a,c,d)},this),a.g("error",function(a){this.ec(a,c)},this)):c&&"function"===typeof c&&c("error","NO_PARAMS")},Jb:function(a){a=parseInt(a,10);return isNaN(a)? 0:a},ec:function(a,b){z.event.O(this,"error",a);b&&"function"===typeof b&&b("error",a.info)},TN:function(a){var b=[];if(a.length)for(var c=0;c<a.length;c+=1){for(var d=a[c],e={distance:parseInt(d.distance,10),time:parseInt(d.duration,10),rides:[]},f=0;f<d.steps.length;f+=1)e.rides[f]=this.Gt(d.steps[f]);b[c]=e}return b},Gt:function(a){var b=this.QN(a.polyline);return{start_location:b[0],end_location:b[b.length-1],instruction:a.instruction,road:this.fa(a.road),orientation:this.fa(a.orientation),distance:this.Jb(a.distance), time:this.Jb(a.duration),path:b,action:this.fa(a.action)}},QN:function(a){var b=[];a=a.split(";");for(var c=0;c<a.length;c+=1){var d=a[c].split(",");b[c]=new g.T(d[0],d[1])}return b},fa:function(a){return"object"===typeof a||"undefined"===typeof a?"":a},Bd:function(a){a=a.split(",");return new g.T(a[0],a[1])},close:function(){g.c.add(this,"close");this.closed=!0},open:function(){g.c.add(this,"open");this.closed=!1},Fc:function(a,b,c){if(!this.closed){var d,e=this;parseInt(a.errcode,10)?(g.event.O(this, "error",{info:a.info}),b&&"function"===typeof b&&b("error",a.info)):(a.data?(d={info:a.errmsg,origin:this.Bd(a.data.origin),destination:this.Bd(a.data.destination),count:a.data.paths.length,routes:this.TN(a.data.paths)},c&&(d.start=c[0],d.end=c[1],d.originName=d.start.name,d.destinationName=d.end.name)):d={info:"ok"===a.info.toLowerCase()?"NO_DATA":a.info},b&&"function"===typeof b&&b("complete",d),e.M.map||e.M.panel?g.qb.load("AMap.RidingRender",function(){e.N||(e.N=new window.AMap.RidingRender({showDir:e.M.showDir})); e.N.autoRender({data:d,panel:e.M.panel,map:e.M.map,hideMarkers:e.M.hideMarkers||!1,isOutline:e.M.isOutline,outlineColor:e.M.outlineColor,autoFitView:e.M.autoFitView});g.event.O(e,"complete",d)}):g.event.O(e,"complete",d))}}});window.AMap.Riding=g.K$;window.AMap.RidingPolicy=g.pL; ')