_cssload_('AMap.IndoorMap', '.amap-indoor-map .label-canvas{position:absolute;top:0;left:0}.amap-indoor-map .highlight-image-con *{pointer-events:none}.amap-indoormap-floorbar-control{position:absolute;margin:auto 0;bottom:165px;right:12px;width:35px;text-align:center;line-height:1.3em;overflow:hidden;padding:0 2px}.amap-indoormap-floorbar-control .panel-box{background-color:rgba(255,255,255,.9);border-radius:3px;border:1px solid #ccc}.amap-indoormap-floorbar-control .select-dock{position:absolute;top:0;left:0;width:100%;box-sizing:border-box;height:30px;border:solid #4196ff;border-width:0 2px;border-radius:2px;pointer-events:none;background:linear-gradient(to bottom,#f6f8f9 0,#e5ebee 50%,#d7dee3 51%,#f5f7f9 100%)}.amap-indoor-map .transition{transition:opacity .2s},.amap-indoormap-floorbar-control .transition{transition:top .2s,margin-top .2s}.amap-indoormap-floorbar-control .select-dock:after,.amap-indoormap-floorbar-control .select-dock:before{content:"";position:absolute;width:0;height:0;left:0;top:10px;border:solid transparent;border-width:4px;border-left-color:#4196ff}.amap-indoormap-floorbar-control .select-dock:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control.is-mobile{width:37px}.amap-indoormap-floorbar-control.is-mobile .floor-btn{height:35px;line-height:35px}.amap-indoormap-floorbar-control.is-mobile .select-dock{height:35px;top:36px}.amap-indoormap-floorbar-control.is-mobile .select-dock:after,.amap-indoormap-floorbar-control.is-mobile .select-dock:before{top:13px}.amap-indoormap-floorbar-control.is-mobile .floor-list-box{height:105px}.amap-indoormap-floorbar-control .floor-list-item .floor-btn{color:#555;font-family:"Times New Roman",sans-serif,"Microsoft Yahei";font-size:16px}.amap-indoormap-floorbar-control .floor-list-item.selected .floor-btn{color:#000}.amap-indoormap-floorbar-control .floor-btn{height:28px;line-height:28px;overflow:hidden;cursor:pointer;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-indoormap-floorbar-control .floor-btn:hover{background-color:rgba(221,221,221,.4)}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{position:relative;text-indent:-1000em}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;top:9px;left:0;right:0;width:0;height:0;border:solid transparent;border-width:10px 8px;border-top-color:#777}.amap-indoormap-floorbar-control .floor-minus.disabled,.amap-indoormap-floorbar-control .floor-plus.disabled{opacity:.3}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;top:-3px}.amap-indoormap-floorbar-control .floor-list-box{max-height:153px;position:relative;overflow-y:hidden}.amap-indoormap-floorbar-control .floor-list{margin:0;padding:0;list-style:none}.amap-indoormap-floorbar-control .floor-list-item{position:relative}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}.amap-indoor-map-moverf-marker{color:#555;background-color:#FFFEEF;border:1px solid #7E7E7E;padding:3px 6px;font-size:12px;white-space:nowrap;display:inline-block;position:absolute;top:1em;left:1.2em}.amap-indoormap-floorbar-control .amap-indrm-loader{-moz-animation:amap-indrm-loader 1250ms infinite linear;-webkit-animation:amap-indrm-loader 1250ms infinite linear;animation:amap-indrm-loader 1250ms infinite linear;border:2px solid #91A3D8;border-right-color:transparent;box-sizing:border-box;display:inline-block;overflow:hidden;text-indent:-9999px;width:13px;height:13px;border-radius:7px;position:absolute;margin:auto;top:0;left:0;right:0;bottom:0}@-moz-keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes amap-indrm-loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)}}')
_jsload_('AMap.IndoorMap', 'g.m$=g.aa.extend({ja:[g.sa],r:function(a){this.Dw=g.extend({size:120,O7:0.7,s2:2,N7:300},a);this.Cj={};this.$o=0;this.FL=this.Dw.size},Caa:function(a){return{rf:a,MO:g.a.wf(),aH:0}},get:function(a,b){if(!this.Wc(a))return b;var c=this.Cj[a];c.MO=g.a.wf();c.aH+=1;return c.rf},forEach:function(a,b){for(var c in this.Cj)if(this.Cj.hasOwnProperty(c)&&!1===a.call(b,this.Cj[c].rf,c))break},zJ:function(a,b){return this.get(a,b)},set:function(a,b){this.Wc(a)?this.Cj[a].rf=b:(this.$o+=1,this.Cj[a]=this.Caa(b)); this.$o>this.FL&&this.Eaa()},Wc:function(a){return this.Cj.hasOwnProperty(a)},Sv:function(a){if(!this.Wc(a))return null;this.$o-=1;var b=this.Cj[a];delete this.Cj[a];return b.rf},clear:function(){this.yL();this.Cj={};this.$o=0},yL:function(){this.GL&&clearTimeout(this.GL)},Eaa:function(){if(this.$o>this.FL*this.Dw.s2)this.yL(),this.cW();else if(!(10>g.a.wf()-this.Gaa)){this.yL();var a=this;this.GL=setTimeout(function(){a.GL=null;a.cW()},this.Dw.N7);this.Gaa=g.a.wf()}},cW:function(){var a=Math.round(this.FL* this.Dw.O7);if(!(this.$o<a))for(var a=this.yaa(this.$o-a),b,c,d=0,e=a.length;d<e;d+=1)b=a[d],c=this.Sv(b),this.q("drop",{key:b,rf:c})},uaa:function(a,b){var c=this.Cj[a],d=this.Cj[b],e=c.MO-d.MO;return 0!==e?e:c.aH-d.aH},yaa:function(a){var b=[],c;for(c in this.Cj)this.Cj.hasOwnProperty(c)&&b.push(c);return this.zaa(b,a,this.uaa)},zaa:function(a,b,c){if(0>=b)return[];for(var d=0,e=a.length-1,f,h,k;d<e;){f=d;h=e;for(k=a[b];f<=b&&h>=b;){for(;f<=b&&0>c.call(this,a[f],k);)f+=1;for(;h>=b&&0<c.call(this, a[h],k);)h-=1;var l=a[f];a[f]=a[h];a[h]=l;f+=1;h-=1}h<b&&(d=f);f>b&&(e=h)}return a.slice(0,b)}});g.mw={KP:function(a){g.j.ab(a,"transition")},nS:"function"!==typeof Object.create?function(){function a(){}return function(b){a.prototype=b;b=new a;a.prototype=null;return b}}():Object.create,P0:function(a,b){var c=this.Wja;c||(c=this.Wja=this.eea());if(!1!==c){this.KP(a);var d,e=this,f=function k(){clearTimeout(d);e.KP(a);g.F.G(a,c,k,e)};d=setTimeout(f,b||1E3);g.j.Ra(a,"transition");g.F.oj(a,c,f,this)}},eea:function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd", MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return!1}};(function(){var a="strokeColor strokeOpacity strokeWeight fillColor fillOpacity strokeStyle strokeDasharray fontSize".split(" "),b=g.aa.extend({r:function(){this.Xaa=1;this.sO={};this.Iba(c);this.cZ=[]},s4:function(a){for(var b=!0,c=13;22>=c;c++){var h=this.i3(a,c);if(h&&(0<h.fontSize||h.Rf)){b=!1;break}}return b},i3:function(a,b){return this.vk(a,b)},zpa:function(a,b){return this.vk(a,b)},IQ:function(a,b){return this.vk(a,b)},Ema:function(b,c){if(c)for(var f in c)c.hasOwnProperty(f)&&0<=a.indexOf(f)&& void 0===b[f]&&(b[f]=c[f]);return b},XH:function(b,c){if(!b)return null;for(var f={},h=0,k=a.length;h<k;h++){var l=a[h];b.hasOwnProperty(l)&&void 0!==b[l]&&(f[l]=b[l])}this.Ema(f,c);return f},bBa:function(a,b){return void 0===a?b:this.oI(a?this.XH(a,b):null)},c1:function(a){if(!a)return null;a=this.XH(a);return g.extend(a,{Nm:this.Gpa(a)})},vk:function(a,b){var c=a[0]+"_"+a[1];b=Math.round(b);var h=this.sO[c];if(!h)return 0>this.cZ.indexOf(c)&&this.cZ.push(c),null;for(var c=0,k=h.length;c<k;c++)if(0<= h[c].Fy.indexOf(""+b))return h[c].XT;return 20<b&&(h=h[h.length-1],0<=h.Fy.indexOf("20"))?(h.Fy.push(""+b),h.XT):null},Iba:function(a){for(var b in a)a.hasOwnProperty(b)&&this.Jba(a[b],b)},Jba:function(a,b){for(var c=0,h=a.length;c<h;c++)this.Fba(a[c],b)},Fba:function(a,b){var c=a.$;if(c){var h=a.StyleItem,c=c.mainkey+"_"+c.subkey;this.sO[c]&&console.error("Style key duplicate",c);this.sO[c]=this.Hba(h,b)}else console.warn("Missing group $",a)},Hba:function(a,b){for(var c=[],h=0,k=a.length;h<k;h++){var l= this.Gba(a[h],b);l&&c.push(l)}return c},Gba:function(a,b){var c=a.$;if(c){var h={};h.Fy=c.level.split(",");h.fna=c.desc.split(",");h.XT=this.Eba(h,h.fna,b);h.XT.Fy=h.Fy;return h}console.warn("Missing $",a)},mp:function(a){a.trim&&(a=a.trim());return g.a.kr(a.substr(2,8))},v3:function(){return this.Xaa++},Gpa:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);b.sort();for(var h=[],k=0,l=b.length;k<l;k++)h.push(b[k]+":"+a[c]);return h.join(";")||"empty"},p5:function(a,b){return a?b?g.extend({}, a,b,{Nm:b.Nm+";"+a.Nm}):a:b},oI:function(a){return g.extend({},a,{Nm:this.v3()})},Eba:function(a,b,c){switch(c){case "PoiStyle":a={Rf:parseInt(b[1],10),fontSize:Math.min(15,parseInt(b[4],10)||0),fillColor:this.mp(b[5]),strokeColor:this.mp(b[6]),WW:0===parseInt(b[8],10)};1===a.Rf&&(a.Rf=0);break;case "LineStyle":a={fillColor:"rgba(252,249,242,1)",strokeColor:this.mp(b[7]),strokeWeight:Math.max(2,Math.round(parseInt(b[2],10)/3))};break;case "RegionStyle":a={fillColor:this.mp(b[2])};break;case "BuildingStyle":a= {fillColor:this.mp(b[1]),strokeColor:this.mp(b[2])};break;default:return console.warn("Unknown style type",c),null}a.Nm=this.v3();return a}}),c={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"}, StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19", desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"}, StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"}, StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20", desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20", desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20", desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20", desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}], RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"}, StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]}, {$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]};g.NE=new b;c=null})();(function(){function a(a){function c(a,b,c){a=a.subarray(b,c);b=0;c="";var d=0;for(b=d=0;b<a.length;)d=a[b],0===d>>>7?(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1):252===(d&252)?(d=(a[b]&3)<<30,d|=(a[b+1]&63)<<24,d|=(a[b+2]&63)<<18,d|=(a[b+3]&63)<<12,d|=(a[b+4]&63)<<6,d|=a[b+5]&63,c+=String.fromCharCode(d),b+=6):248===(d&248)?(d=(a[b]&7)<<24,d|=(a[b+1]&63)<<18,d|=(a[b+2]&63)<<12,d|=(a[b+3]&63)<<6,d|=a[b+4]&63,c+=String.fromCharCode(d),b+=5):240===(d&240)?(d=(a[b]&15)<< 18,d|=(a[b+1]&63)<<12,d|=(a[b+2]&63)<<6,d|=a[b+3]&63,c+=String.fromCharCode(d),b+=4):224===(d&224)?(d=(a[b]&31)<<12,d|=(a[b+1]&63)<<6,d|=a[b+2]&63,c+=String.fromCharCode(d),b+=3):192===(d&192)?(d=(a[b]&63)<<6,d|=a[b+1]&63,c+=String.fromCharCode(d),b+=2):(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1);return c.trim()}function d(a,b){a=a.toString(2);b=b.toString(2);a=Array(32-a.length+1).join("0")+a;b=Array(32-b.length+1).join("0")+b;var c=k;c.lastIndex=0;if(c=(b+a).toString().match(c)){var d= 0;-1===c[0].indexOf(".")&&(d=parseInt(c,2));return d=d.toString(36).toUpperCase()}return"error"}function e(a){for(var b,e,f,k,r,s={},u={},v=new Uint8Array(a),x=new DataView(a),t=0,t=t+4,t=t+4,w=x.getInt32(t,!0),t=t+4,t=t+4,y=x.getInt32(t,!0),t=t+(4+y),t=t+4,E=x.getUint32(t,!0).toString(2),C=x.getUint32(t+4,!0).toString(2),F=d(E,C),t=t+8,A=c(v,t,t+64),t=t+64,B=c(v,t,t+64),t=t+64,G=x.getInt8(t,!0),t=t+1,H=c(v,t,t+8),t=t+8,I=x.getInt16(t,!0),M=x.getInt16(t+2,!0),t=t+4,L=x.getFloat32(t,!0),O=x.getFloat32(t+ 4,!0),t=t+8,K=x.getFloat32(t,!0),D=x.getFloat32(t+4,!0),t=t+8,Q=x.getFloat32(t,!0),P=x.getFloat32(t+4,!0),t=t+8,J=x.getInt32(t,!0),t=t+4,N=x.getInt32(t,!0),t=t+4,V=x.getInt32(t,!0),t=t+4,R=[],T=0;T<J;T++)R.push(x.getInt32(t,!0)),t+=4;for(var S=[],T=0;T<V;T++)S.push(x.getInt32(t,!0)),t+=4;for(var Z=[],T=0;T<J;T++){var U=c(v,t,t+48);Z.push(U);t+=48}for(var W=[],T=0;T<J;T++){var Y=c(v,t,t+8);W.push(Y);t+=8}for(var X=[],T=0;T<N;T++){var aa=x.getInt32(t,!0)*h+O,da=x.getInt32(t+4,!0)*h+L;X.push([aa,da]); t+=8}b={type:"Feature",geometry:{type:"Polygon",coordinates:[X]},properties:{pid:F,name_cn:A,name_en:B,default_floor:G,buildingtype:H,building_poi_style:[I,M],centerPoint:[O,L],left_bottom_Point:[K,D],width:Q,height:P,numberofFloor:J,numberofGeoPoints:N,park_floor_count:V,floor_indexs:R,park_floors:S,floor_names:Z,floor_nonas:W}};for(var Aa=0;Aa<w;Aa++){var ha=c(v,t,t+8),t=t+8,ea=x.getInt8(t,!0),t=t+1;u[ea]={floor:{},shops:[],pubs:[],cons:[]};for(var ma=x.getInt16(t,!0),ja=x.getInt16(t+2,!0),t=t+ 4,sa=x.getInt16(t,!0),Ja=x.getInt16(t+2,!0),t=t+4,Ia=x.getInt16(t,!0),Ba=x.getInt16(t+2,!0),t=t+4,Ca=x.getInt32(t,!0),t=t+4,sc=x.getInt32(t,!0),t=t+4,tc=x.getInt32(t,!0),t=t+4,Gb=x.getInt32(t,!0),t=t+4,Hb=[],Oa=0;Oa<Gb;Oa++){for(var wd=x.getInt32(t,!0),t=t+4,yc=[],ka=0;ka<wd;ka++)aa=x.getInt32(t,!0)*h+O,da=x.getInt32(t+4,!0)*h+L,yc.push([aa,da]),t+=8;Hb.push(yc)}var zc="Polygon",Ac=Hb[0];1<Gb&&(zc="MultiPolygon",Ac=Hb);e={type:"Feature",geometry:{type:zc,coordinates:[Ac]},properties:{namecode:ha, index:ea,floor_region_type:[ma,ja],unhighlighted_floor_line_style:[sa,Ja],highlighted_floor_line_style:[Ia,Ba],numberofShopCount:Ca,numberofPubCount:sc,numberofConCount:tc,floor_area_count:Gb}};u[ea].floor=e;for(var Bc=[],ua=0,ua=0;ua<Ca;ua++){for(var xd=c(v,t,t+128),t=t+128,yd=x.getUint32(t,!0).toString(2),zd=x.getUint32(t+4,!0).toString(2),Ad=d(yd,zd),t=t+8,Bd=c(v,t,t+24),t=t+24,Cd=c(v,t,t+12),t=t+12,Dd=x.getInt32(t,!0),t=t+4,Ed=x.getFloat32(t,!0),t=t+4,Fd=x.getInt8(t,!0),t=t+1,Gd=x.getInt16(t, !0),Hd=x.getInt16(t+2,!0),t=t+4,Id=x.getInt16(t,!0),Jd=x.getInt16(t+2,!0),t=t+4,Kd=x.getInt32(t,!0)*h+O,Ld=x.getInt32(t+4,!0)*h+L,t=t+8,Cc=x.getInt32(t,!0),t=t+4,Dc=[],Oa=0;Oa<Cc;Oa++)aa=x.getInt32(t,!0)*h+O,da=x.getInt32(t+4,!0)*h+L,Dc.push([aa,da]),t+=8;f={type:"Feature",geometry:{type:"Polygon",coordinates:[Dc]},properties:{name:xd,pid:Ad,cpid:Bd,logo:Cd,area:Dd,rank:Ed,height:Fd,poitype:[Gd,Hd],regiontype:[Id,Jd],font_anthor_point:[Kd,Ld],shop_point_number:Cc}};Bc.push(f)}u[ea].gK=Bc;for(var Ec= [],ua=ua=0;ua<sc;ua++){var Md=c(v,t,t+24),t=t+24,Nd=x.getUint32(t,!0).toString(2),Od=x.getUint32(t+4,!0).toString(2),Pd=d(Nd,Od),t=t+8,Qd=c(v,t,t+48),t=t+48,Rd=x.getFloat32(t,!0),t=t+4,Sd=x.getInt16(t,!0),Td=x.getInt16(t+2,!0),t=t+4,aa=x.getInt32(t,!0)*h+O,da=x.getInt32(t+4,!0)*h+L,t=t+8;r={type:"Feature",geometry:{type:"Point",coordinates:[aa,da]},properties:{cpid:Md,pid:Pd,name:Qd,rank:Rd,poitype:[Sd,Td]}};Ec.push(r)}u[ea].FJ=Ec;for(var Fc=[],ua=0;ua<tc;ua++){var Ud=c(v,t,t+24),t=t+24,Vd=x.getUint32(t, !0).toString(2),Wd=x.getUint32(t+4,!0).toString(2),Xd=d(Vd,Wd),t=t+8,Yd=c(v,t,t+48),t=t+48,Zd=x.getFloat32(t,!0),t=t+4,$d=x.getInt16(t,!0),ae=x.getInt16(t+2,!0),t=t+4,aa=x.getInt32(t,!0)*h+O,da=x.getInt32(t+4,!0)*h+L,t=t+8;k={type:"Feature",geometry:{type:"Point",coordinates:[aa,da]},properties:{cpid:Ud,pid:Xd,name:Yd,rank:Zd,poitype:[$d,ae]}};Fc.push(k)}u[ea].zH=Fc}for(var t=t+4,be=x.getInt32(t,!0),t=t+(4+be),ce=x.getInt32(t,!0),t=t+4,Gc=[],T=0;T<ce;T++)aa=x.getInt32(t,!0)*h+O,da=x.getInt32(t+4, !0)*h+L,Gc.push([aa,da]),t+=8;b.properties.outside_outline=Gc;var Pa={},la;for(la in u)if(u.hasOwnProperty(la)){Pa.floor=u[la].floor;for(ka=0;ka<u[la].gK.length;ka++){var de=x.getInt16(t,!0),t=t+2,ee=x.getInt16(t,!0),t=t+2;u[la].gK[ka].properties.zoom_min=de;u[la].gK[ka].properties.zoom_max=ee}Pa.shops=u[la].gK;for(ka=0;ka<u[la].FJ.length;ka++){var fe=x.getInt16(t,!0),t=t+2,ge=x.getInt16(t,!0),t=t+2;u[la].FJ[ka].properties.zoom_min=fe;u[la].FJ[ka].properties.zoom_max=ge}Pa.pubs=u[la].FJ;for(ka=0;ka< u[la].zH.length;ka++){var he=x.getInt16(t,!0),t=t+2,ie=x.getInt16(t,!0),t=t+2;u[la].zH[ka].properties.zoom_min=he;u[la].zH[ka].properties.zoom_max=ie}Pa.cons=u[la].zH;s.floor=Pa}var t=t+4,je=x.getInt32(t,!0),t=t+(4+je),ke=x.getInt8(t,!0),t=t+1;b.properties.cBa=ke;s.building=b;return s}var f=f||{};f.Wo=function(){this.hr=0};f.Wo.prototype.create=function(a){this.Gw&&this.hr===a||(this.Gw=[]);this.hr=a;this.HG=this.Oi=0};f.Wo.prototype.flush=function(){var a=this.Oi-this.HG;if(0!==a){for(;a--;)this.cr.rya(this.Gw[this.HG++]); this.Oi>=this.hr&&(this.Oi=0);this.HG=this.Oi}};f.Wo.prototype.OJ=function(){this.flush();this.cr=null};f.Wo.prototype.MT=function(a){this.OJ();this.cr=a};f.Wo.prototype.pg=function(a){a||(this.Oi=this.HG=0)};f.Wo.prototype.Dma=function(a,b){var c=this.Oi-a-1;for(0>c&&(c+=this.hr);b--;)c>=this.hr&&(c=0),this.Gw[this.Oi++]=this.Gw[c++],this.Oi>=this.hr&&this.flush()};f.Wo.prototype.oua=function(a){this.Gw[this.Oi++]=a;this.Oi>=this.hr&&this.flush()};f.Wo.prototype.J2=function(a){a=this.Oi-a-1;0>a&& (a+=this.hr);return this.Gw[a]};f.uw=function(){};f.uw.prototype.MT=function(a){this.cr=a};f.uw.prototype.OJ=function(){this.cr=null};f.uw.prototype.pg=function(){var a=5;this.Dj=0;for(this.wh=-1;a--;)this.Dj=this.Dj<<8|this.cr.Hh()};f.uw.prototype.$ma=function(a){for(var b=0,c;a--;)this.wh>>>=1,c=this.Dj-this.wh>>>31,this.Dj-=this.wh&c-1,b=b<<1|1-c,0===(this.wh&4278190080)&&(this.Dj=this.Dj<<8|this.cr.Hh(),this.wh<<=8);return b};f.uw.prototype.Jj=function(a,b){var c=a[b],d=(this.wh>>>11)*c;if((this.Dj^ 2147483648)<(d^2147483648))return this.wh=d,a[b]+=2048-c>>>5,0===(this.wh&4278190080)&&(this.Dj=this.Dj<<8|this.cr.Hh(),this.wh<<=8),0;this.wh-=d;this.Dj-=d;a[b]-=c>>>5;0===(this.wh&4278190080)&&(this.Dj=this.Dj<<8|this.cr.Hh(),this.wh<<=8);return 1};f.so=function(a,b){for(;b--;)a[b]=1024};f.pm=function(a){this.vN=[];this.lG=a};f.pm.prototype.pg=function(){f.so(this.vN,1<<this.lG)};f.pm.prototype.ce=function(a){for(var b=1,c=this.lG;c--;)b=b<<1|a.Jj(this.vN,b);return b-(1<<this.lG)};f.pm.prototype.mva= function(a){for(var b=1,c=0,d=0,e;d<this.lG;++d)e=a.Jj(this.vN,b),b=b<<1|e,c|=e<<d;return c};f.nva=function(a,b,c,d){for(var e=1,f=0,k=0,h;k<d;++k)h=c.Jj(a,b+e),e=e<<1|h,f|=h<<k;return f};f.Wz=function(){this.XL=[];this.qN=[];this.uN=[];this.iY=new f.pm(8);this.aB=0};f.Wz.prototype.create=function(a){for(;this.aB<a;++this.aB)this.qN[this.aB]=new f.pm(3),this.uN[this.aB]=new f.pm(3)};f.Wz.prototype.pg=function(){var a=this.aB;for(f.so(this.XL,2);a--;)this.qN[a].pg(),this.uN[a].pg();this.iY.pg()};f.Wz.prototype.ce= function(a,b){return 0===a.Jj(this.XL,0)?this.qN[b].ce(a):0===a.Jj(this.XL,1)?8+this.uN[b].ce(a):16+this.iY.ce(a)};f.EE=function(){this.CF=[]};f.EE.prototype.pg=function(){f.so(this.CF,768)};f.EE.prototype.bna=function(a){var b=1;do b=b<<1|a.Jj(this.CF,b);while(256>b);return b&255};f.EE.prototype.cna=function(a,b){var c=1,d,e;do if(d=b>>7&1,b<<=1,e=a.Jj(this.CF,(1+d<<8)+c),c=c<<1|e,d!==e){for(;256>c;)c=c<<1|a.Jj(this.CF,c);break}while(256>c);return c&255};f.OE=function(){};f.OE.prototype.create=function(a, b){var c;if(!this.uF||this.bB!==b||this.CN!==a)for(this.CN=a,this.uia=(1<<a)-1,this.bB=b,this.uF=[],c=1<<this.bB+this.CN;c--;)this.uF[c]=new f.EE};f.OE.prototype.pg=function(){for(var a=1<<this.bB+this.CN;a--;)this.uF[a].pg()};f.OE.prototype.Uoa=function(a,b){return this.uF[((a&this.uia)<<this.bB)+((b&255)>>>8-this.bB)]};f.gw=function(){this.kp=new f.Wo;this.xh=new f.uw;this.EY=[];this.JY=[];this.KY=[];this.LY=[];this.MY=[];this.IY=[];this.hx=[];this.l_=[];this.k_=new f.pm(4);this.gN=new f.Wz;this.gO= new f.Wz;this.kN=new f.OE;this.sM=this.rM=-1;this.hx[0]=new f.pm(6);this.hx[1]=new f.pm(6);this.hx[2]=new f.pm(6);this.hx[3]=new f.pm(6)};f.gw.prototype.Lva=function(a){if(0>a)return!1;this.rM!==a&&(this.rM=a,this.sM=Math.max(this.rM,1),this.kp.create(Math.max(this.sM,4096)));return!0};f.gw.prototype.Qva=function(a,b,c){var d=1<<c;if(8<a||4<b||4<c)return!1;this.kN.create(b,a);this.gN.create(d);this.gO.create(d);this.via=d-1;return!0};f.gw.prototype.pg=function(){var a=4;this.kp.pg(!1);f.so(this.EY, 192);f.so(this.IY,192);f.so(this.JY,12);f.so(this.KY,12);f.so(this.LY,12);f.so(this.MY,12);f.so(this.l_,114);for(this.kN.pg();a--;)this.hx[a].pg();this.gN.pg();this.gO.pg();this.k_.pg();this.xh.pg()};f.gw.prototype.ce=function(a,b,c){var d=0,e=0,k=0,h=0,u=0,v=0,x=0;this.xh.MT(a);this.kp.MT(b);for(this.pg();0>c||v<c;)if(a=v&this.via,0===this.xh.Jj(this.EY,(d<<4)+a))x=this.kN.Uoa(v++,x),x=7<=d?x.cna(this.xh,this.kp.J2(e)):x.bna(this.xh),this.kp.oua(x),d=4>d?0:d-(10>d?3:6);else{if(1===this.xh.Jj(this.JY, d))x=0,0===this.xh.Jj(this.KY,d)?0===this.xh.Jj(this.IY,(d<<4)+a)&&(d=7>d?9:11,x=1):(0===this.xh.Jj(this.LY,d)?b=k:(0===this.xh.Jj(this.MY,d)?b=h:(b=u,u=h),h=k),k=e,e=b),0===x&&(x=2+this.gO.ce(this.xh,a),d=7>d?8:11);else if(u=h,h=k,k=e,x=2+this.gN.ce(this.xh,a),d=7>d?7:10,a=this.hx[5>=x?x-2:3].ce(this.xh),4<=a)if(b=(a>>1)-1,e=(2|a&1)<<b,14>a)e+=f.nva(this.l_,e-a-1,this.xh,b);else{if(e+=this.xh.$ma(b-4)<<4,e+=this.k_.mva(this.xh),0>e){if(-1===e)break;return!1}}else e=a;if(e>=v||e>=this.sM)return!1; this.kp.Dma(e,x);v+=x;x=this.kp.J2(0)}this.kp.flush();this.kp.OJ();this.xh.OJ();return!0};f.gw.prototype.Kva=function(a){var b,c;if(5>a.size)return!1;b=a.Hh();c=b%9;b=~~(b/9);if(!this.Qva(c,b%5,~~(b/5)))return!1;b=a.Hh();b|=a.Hh()<<8;b|=a.Hh()<<16;b+=16777216*a.Hh();return this.Lva(b)};f.dna=function(a,b){var c=new f.gw,d;if(!c.Kva(a))throw"Incorrect stream properties";d=a.Hh();d|=a.Hh()<<8;d|=a.Hh()<<16;d+=16777216*a.Hh();a.Hh();a.Hh();a.Hh();a.Hh();if(!c.ce(a,b,d))throw"Error in data stream";}; var h=1E-9,k=RegExp("^[+\\\\-]?[0-1]*[.]?[0-1]*$","gi");a.getUnifyJson=function(a){var b=[];if(!(a instanceof ArrayBuffer)){var d={status:3,building:{},floor:{},id:""};b.push(d);return b}new Uint8Array(a);a=new DataView(a);var k;k=4;var h=a.getInt16(k,!1);for(k+=2;0<h;){k+=4;var r=a.getUint8(k,!1);k+=1;for(var s=new ArrayBuffer(r),s=new Uint8Array(s),u=0;u<r;u++)s[u]=a.getUint8(k,!1),k+=1;r=c(s,0,r);k+=2;s=a.getInt8(k,!1);k+=1;0!==s&&(d={},d.status=s,d.building={},d.floor={},d.id=r,b.push(d));var v= a.getInt32(k,!1);k+=4;u=a.getInt32(k,!0);k+=4;v-=u;if(0!==u){for(var x=8*Math.ceil(u/8),d=u%8,x=new ArrayBuffer(x),t=new Int32Array(x),w=0;8<=u;){var y=a.getInt32(k,!0),E=a.getInt32(k+4,!0),y=y^2078870821,E=E^292664;t[w]=y;t[w+1]=E;w+=2;k+=8;u-=8}0!==u&&(y=a.getInt32(k,!0),E=a.getInt32(k+4,!0),y^=2078870821,E^=292664,t[w]=y,t[w+1]=E,k+=u);w=new Uint8Array(x);E=w.length;x=E-8+d;t=new Uint8Array(x);for(u=0;u<x;u++)t[u]=w[u];for(u=0;u<d;u++)t[x-d+u]=w[E-1-u];d={data:[],offset:0,rya:function(a){this.data[this.offset++]= a}};f.dna({data:t,offset:0,Hh:function(){return this.data[this.offset++]}},d);d=d.data;x=d.length;t=new ArrayBuffer(x);w=new Int8Array(t);for(u=0;u<x;u++)w[u]=d[u];d=e(t);d.status=s;d.id=r;b.push(d)}k+=v;h-=1}return b}}g.oV={nia:a};a(g.oV)})();(function(){var a=g.oV,b=new g.bA(function(b){var d;(d=b?b.getUnifyJson:a.getUnifyJson)||console.error("getUnifyJson not found!!");return{Ppa:function(a,b){try{var c=d(a);b(null,c)}catch(k){b(k.message||k.toString())}}}},{clientId:"indoor",lazy:"untilCall",batchSend:!1,libPolyfills:[a.nia]});g.pV={Gx:function(){return b.Gx()},Oka:function(a){b.Ut([a]);return b.Ppa.apply(b,arguments)}}})();g.i$=g.aa.extend({r:function(a){this.pc(a.map)},pc:function(a){this.map=a},YS:function(a){return this.Bta(a)},Bta:function(a){a=this.Pta(a);var b=[],c;if(a instanceof g.Rh)b=[a];else if(a instanceof g.Aa.Ee)c=new g.Rh,c.GT(a),b=[c];else if(this.isArray(a))for(var d,e,f=0,h=a.length;f<h;f+=1)if(d=a[f],e=e||d instanceof g.Aa.Ee)c=new g.Rh({zIndex:1,map:this.map,da:d,style:null}),c.name=d.Ri+"-"+g.a.ub(c),b[f]=c;else{b=a;break}return b},Pta:function(a){if("FeatureCollection"===a.type){var b=a.features, c=b.length,d;a=Array(c);for(d=0;d<c;d+=1)a[d]=this.FS(b[d])}else a="Feature"===a.type?this.FS(a):"GeometryCollection"===a.type?this.qEa(a):this.FS({type:"Feature",da:a}).cc();return a},FS:function(a){var b=a.geometry,c=null,d=new g.Rh({zIndex:1,map:this.map});a.id&&(d.id=a.id);if(b){var e=b.type;switch(e){case "Point":c=this.Jta(b);d.PA=!0;d.set("radius",2,!0);d.set("center",c.Vh,!0);d.set("strokeWeight",0,!0);d.W("resolution",this.map);break;case "LineString":c=this.Fta(b);break;case "Polygon":c= this.Kta(b);break;case "MultiPoint":c=this.rEa(b);break;case "MultiLineString":c=this.Gta(b);break;case "MultiPolygon":c=this.Hta(b);break;default:throw Error("Bad geometry type: "+e);}c&&(c.Ri=e.toLowerCase(),d.name=c.Ri+"-"+g.a.ub(d));d.ma=a.properties;d.GT(c)}return d},tK:function(a){a[0][0]||console.log(a);var b=a.length,c,d=[];c=this.map.Ab(new g.T(a[0][0],a[0][1]));for(var e=c.x,f=c.y,h=c.x,k=c.y,l=0;l<b;l+=1)c=this.map.Ab(new g.T(a[l][0],a[l][1])),d[l]=[c.x,c.y],d[l][0]<e&&(e=d[l][0]),d[l][0]> h&&(h=d[l][0]),d[l][1]<f&&(f=d[l][1]),d[l][1]>k&&(k=d[l][1]);d.kg=[e,f,h,k];return d},Kta:function(a){var b=[];a=a.coordinates;for(var c=0;c<a.length;c+=1)b[c]=this.tK(a[c]);return new g.Aa.yc(b)},Jta:function(a){a=a.coordinates;a=new g.T(a[0],a[1]);var b=this.map.Ab(a),b=new g.Aa.vg([b.x,b.y]);b.Vh=a;return b},Hta:function(a){a=a.coordinates;for(var b=a.length,c=[],d=0;d<b;d+=1){c[d]=[];for(var e=0;e<a[d].length;e+=1)c[d][e]=this.tK(a[d][e])}return new g.Aa.pw(c)},Fta:function(a){a=this.tK(a.coordinates); return new g.Aa.Jq(a)},Gta:function(a){for(var b=a.coordinates.length,c=[],d=0;d<b;d+=1)c[d]=this.tK(a.coordinates[d]);return new g.Aa.ow(c)},isArray:function(a){return g.a.isArray(a)}});(function(){var a={cons:{name:"",rank:0.20000000298023224,zoom_max:20,zoom_min:18},pubs:{name:"",rank:0.5,zoom_max:20,zoom_min:18},shops:{name:"",pid:"0",logo:"",area:1,rank:0.10000000149011612,height:0,shop_point_number:5,zoom_max:20,zoom_min:18}},b;for(b in a)a.hasOwnProperty(b)&&(a[b].ql=b);var c={poitype:{},regiontype:{}},d=g.mw.nS;g.j$={sma:function(b,f,h){f={jt:f,HF:h};for(var k in b)if(b.hasOwnProperty(k)){h=b[k];var l=g.extend(d(f),a[k]);g.a.isArray(h)||(h=[h]);for(var m=0,n=h.length;m<n;m++){var p= h[m],q=h[m].properties,r=d(l),s=void 0;for(s in q)q.hasOwnProperty(s)&&q[s]!==r[s]&&(r[s]=q[s]);q=void 0;for(q in c)c.hasOwnProperty(q)&&r[q]&&(s=r[q].join("-"),c[q][s]||(c[q][s]=[].concat(r[q])),r[q]=c[q][s]);p.properties=r}}return b}}})();g.ME=g.aa.extend({ja:[g.sa],di:{loaded:20,xe:10,empty:0,rma:-10,hva:-20},Bla:{pubs:"public",cons:"connection",shops:"shop"},eo:-9999,r:function(a){this.oa=a;this.Br=new g.m$({size:g.l.size,O7:0.7,s2:2,N7:300});this.Br.g("drop",function(){});this.xca=g.pV;this.EX=new g.i$({map:a});this.zh=g.NE;this.xca.Gx()},pc:function(a){this.oa=a;this.EX.pc(a)},forEach:function(){return this.Br.forEach.apply(this.Br,arguments)},jBa:function(){this.Br.clear()},Kra:function(a){for(var b=0,c=a.length;b<c;b++)this.ZR(a[b])}, Ql:function(a,b){b=b||a.Nc||a.eo;var c=this.Ip(a,b,!0),d=null;c?d=c.I:a.j1&&(d=a.j1.I);return d?new g.Gf(d):null},IR:function(a){return a.pr&&a.pr>=this.di.loaded},p4:function(a,b){return this.LX(a,b)>=this.di.loaded},Xla:function(a,b,c){var d=b||a.Nc;if(d&&d!==this.eo){d=""+d;b=a.rH;for(var e=[a.ha,a.vu,a.ey,a.yu],f=[a.$H,a.pQ,a.Ay],h=[],k=0,l=b.length;k<l;k++){var m=b[k],n=a.ey[m];n<this.di.loaded&&n>=this.di.empty||h.push(""+m)}this.hX(e,function(a){a=""+a;return 0<=h.indexOf(""+a)&&a!==d});this.hX(f, function(a){var b=a.split("_"),b=b[0];return 0<=h.indexOf(b)&&0!==a.indexOf(d+"_"+(c?c:""))})}},hX:function(a,b){for(var c=0,d=a.length;c<d;c++)this.Aca(a[c],b)},Aca:function(a,b){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d);d=0;for(var e=c.length;d<e;d++)b.call(this,c[d])&&delete a[c[d]]},LX:function(a,b){return a.ey[b||a.Nc||a.eo]||this.di.empty},JR:function(a,b){return this.IR(a)&&this.p4(a,b)},cca:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];g.a.isArray(e)&&(e=new g.H(e[0], e[1]));b.push(this.oa.Qd(e))}return b},zda:function(a){a=a.cc();if(!a||!a.o3)return null;a=a.zf;for(var b=[],c=0,d=a.length;c<d;c++)b.push(this.cca(a[c].wa));return b},I2:function(a){a=this.Fh(a);if(!a)return null;a=a.tp;if(!a)return null;a=a.ma;return a.name||a.name_cn},Goa:function(a){return(a=this.Fh(a))?this.xQ(a):null},xQ:function(a,b){if(!a)return null;if(!a.mF){var c=a.tp;if(!c)return null;var c=c.ma,d=g.mw.nS(this.lda(a));a.mF=g.extend(d,{id:c.pid,name:c.name||c.name_cn,lnglat:a.XR,floor_details:{floor_indexs:c.floor_indexs, floor_nonas:c.floor_nonas,floor_names:c.floor_names}})}g.extend(a.mF,{floor:a.Nc});b&&b.floorPath&&(c=(c=this.Ip(a,a.Nc,!0))&&c.Nl?this.zda(c.Nl):null,g.extend(a.mF,{floorPath:c}));return a.mF},Epa:function(a,b,c){a=this.Ip(a,b,!0);if(!a)return null;a=a.ha;b=null;for(var d=0,e=a.length;d<e;d++)if(a[d].ma.cpid===c){b=a[d];break}return this.$O(b)},lda:function(a){var b=this;return{getAllShops:function(c){var d=b.Ip(a,c||a.Nc,!0);c=[];if(!d)return c;for(var d=d.ha,e=0,f=d.length;e<f;e++)d[e].ma.cpid&& c.push(b.$O(d[e]));return c}}},Xda:function(a){var b=this;return{setCustomStyle:function(c,d){d=g.extend({autoRefresh:!0},d);a.kM=c?b.zh.c1(c):null;d.autoRefresh&&b.q("featureStyleUpdate",{L:a});return this},getCustomStyle:function(){return b.zh.XH(a.kM)},setCustomLabelStyle:function(c,d){d=g.extend({autoRefresh:!0},d);a.jM=c?b.zh.c1(c):null;d.autoRefresh&&b.q("featureLabelStyleUpdate",{L:a});return this},getCustomLabelStyle:function(){return b.zh.XH(a.jM)},setOptions:function(c,d){d=g.extend({autoRefresh:!0, replace:!0},d);a.Nw=d.replace?c:g.extend({},a.Nw,c);d.autoRefresh&&b.q("featureOptionsUpdate",{L:a});return this},disableIconRender:function(){this.setOptions({disableIconRender:!0},{replace:!1})},enableIconRender:function(){this.setOptions({disableIconRender:!1},{replace:!1})},disableLabelRender:function(){this.setOptions({disableLabelRender:!0},{replace:!1})},enableLabelRender:function(){this.setOptions({disableLabelRender:!1},{replace:!1})},getOptions:function(){return a.Nw}}},$O:function(a){if(!a)return null; if(!a.X_){var b=a.ma,c=b.font_anthor_point?new g.T(b.font_anthor_point[0],b.font_anthor_point[1]):null,d=b.jt;c||(c=g.I.ki(a.cc().pd()),c=this.oa.Qd(new g.H(c[0],c[1])));var e=g.mw.nS(this.Xda(a));a.X_=g.extend(e,{id:b.cpid,poiId:b.pid,building_id:d,name:b.name||b.name_cn,lnglat:c,category:this.Bla[b.ql]})}return a.X_},Ip:function(a,b,c){if(!this.JR(a))return null;b=b||a.Nc;var d=null;a.ha?d=a.ha[b]:a.ha={};if(!d&&c){c=a.yu[b];if(!c)return console.warn("Missing geojson of floor",b,a),null;d=a.ha[b]= this.mba(a,b,c);a.yu[b]=-1}return d},CS:function(a){for(var b=[Infinity,Infinity,-Infinity,-Infinity],c=0,d=a.length;c<d;c++){var e=a[c].cc();e&&g.I.extend(b,e.pd())}return{ha:a,I:b,Yd:[b[0],b[1]]}},mba:function(a,b,c){b=this.CS(this.AW(c));c=b.ha;"floor"===c[0].ma.ql&&(b.Nl=c[0],b.ha=c.slice(1));a.I?g.I.extend(a.I,b.I):a.I=b.I;return b},Uca:function(a){var b=a.ma,c=1,d=a.name.split("-"),d=d[0];switch(d){case "point":if(b.poitype&&this.zh.s4(b.poitype)){a.vaa=1;return}break;case "polygon":break;case "multipolygon":break; default:console.warn("Unknown geoType",d)}switch(b.ql){case "building":break;case "floor":c=2;break;case "shops":c=3;break;case "pubs":case "cons":c=3;break;default:console.warn("Unknown category",b.ql)}a.zIndex=c},AW:function(a){a=this.EX.YS(a);for(var b=0,c=a.length;b<c;b++)a[b].ym=b,this.Uca(a[b]),a[b].vaa&&(a.splice(b,1),b--,c--);a.sort(function(a,b){var c=a.zIndex-b.zIndex;if(0!==c)return c;c=(a.ma.rank||0)-(b.ma.rank||0);return 0!==c?c:a.ym-b.ym});return a},qea:function(a){for(var b=[],c=0, d=a.length;c<d;c++)b.push(this.rea(a[c]));return b},oba:function(a){var b=[],c=a.floor.floor;a.building.properties.ql="building";c.properties.ql="floor";b.push(c);a=a.floor;for(var c=["shops","pubs","cons"],d=0,e=c.length;d<e;d++)for(var f=a[c[d]],h=0,k=f.length;h<k;h++)b.push(f[h]);return{type:"FeatureCollection",features:b}},Wda:function(a){switch(a){case 2:return Error("Building not found!");default:return Error("Server error")}},rea:function(a){var b=a.id,c=this.Fh(b);if(!c)return console.warn("Can not find: ", b),{error:Error("Can not find: "+b),result:c};if(0!==a.status)return{error:this.Wda(a.status),result:c};var d=a.floor.floor.properties.index;c.eo||(c.Nc=c.eo=d);c.b7=null;a.floor=g.j$.sma(a.floor,b,d);c.yu||(c.yu={});if(!c.tp&&a.building){b=a.building;b.properties.ql="building";var e=this.AW(b);c.j1=this.CS(e);c.tp=e[0];c.rH=b.properties.floor_indexs}a.floor&&(c.ey[d]>=this.di.loaded?console.warn("Floor alreay load!",d,c):(c.yu[d]=this.oba(a,c),c.ey[d]=this.di.loaded));a=c.tp;if(!a)return console.log("Missing building geojson", c.yu),c.pr=this.di.rma,c;a=a.ma;c.XR||(c.XR=new g.T(a.centerPoint[0],a.centerPoint[1]));c.pr=this.di.loaded;return{error:null,result:c}},Fia:function(a,b){b&&(a.Dm||(a.Dm=[]),a.Dm.push(b))},ZR:function(a,b,c){c=c||{};"string"===typeof a&&(a={id:a});var d=this.Fh(a);d?d!==a&&g.extend(d,a):(d=g.extend({pr:this.di.empty,ey:{}},a),this.Bja(d));var e=this.MF(d);if(this.JR(d,e))return b&&setTimeout(function(){b(null,d)},0),!1;e=parseInt(e,10);if(isNaN(e))b&&b(Error("Floor should be an integer!"));else if(d.rH&& 0>d.rH.indexOf(e))b&&b(Error("Floor out of range, try these: "+d.rH));else{var f=this;a=!1;this.Fia(d,function(a,d){e===f.eo&&(e=f.MF(d));a||f.JR(d,e)?b&&b(a,d):e===f.MF(d)?c.wva?b&&b(Error("Floor request failed!"),null):f.ZR(d,b,g.extend({},c,{wva:!0})):b&&b(Error("Requested floor expired!"),null)});d.pr<this.di.xe?(d.pr=this.di.xe,a=!0):d.pr===this.di.xe?a=!1:this.LX(d,e)<this.di.xe&&(d.ey[e]=this.di.xe,a=!0);a&&this.Maa([d])}},Fh:function(a){if(0===a)return null;if(!a)return console.warn("Empty building!"), null;var b=a.id;b||"string"!==typeof a||(b=a);return this.Br.get(b)},Hua:function(a){this.Br.Sv(a)},Bja:function(a){return this.Br.set(a.id,a)},MF:function(a){return a.b7||a.Nc||a.eo||this.eo},Maa:function(a){g.a.isArray(a)||(a=[a]);if(this.lx)for(var b=this.lx,c=0,d=a.length;c<d;c++){for(var e=a[c],f=!1,h=0,k=b.length;h<k;h++)e.id===b[h].id&&(f=!0,b[h]=e);f||b.push(e)}else this.lx=[],this.lx.push.apply(this.lx,a);if(!this.v_){var l=this;this.v_=setTimeout(function(){l.v_=null;l.Cfa(l.lx);l.lx.length= 0},0)}},mM:function(a,b){a&&b&&(b.pr=this.di.hva,b.BN=g.a.wf()+3E3);if(b&&b.Dm){var c=b.Dm;b.Dm=null;for(var d=0,e=c.length;d<e;d++)c[d](a,b)}this.q(a?"loaded_error":"loaded",{error:a,data:b})},Vda:function(a){var b=g.A.Rd+"/v3/indoor/indoormaps?",c=[];c.push("poiid="+a.id);c.push("floor="+a.floor);c.push("version="+a.version);c.push("s=rsv3");c.push("key="+g.A.key);c.push.apply(c,["from=indoorH5Map","servicetype=unify","platform=JS","logversion=2.0","sdkversion="+g.A.gr,"appname="+g.A.Wt]);return b+ c.join("&")},zja:function(a){function b(b,c){b?e(b):g.a.isArray(c)?a.xwa(d.qea(c)):e(Error("Indoor parser not return an array"))}var c=this.Vda(a),d=this,e=a.n2;setTimeout(function(){g.ME.Ava(c,b,a.n2)},0)},nja:function(a){if(a&&a.length){for(var b=[],c=[],d=[],e=[],f=this,h,k=function(a){console.warn&&console.warn("\\u5ba4\\u5185\\u6570\\u636e\\u52a0\\u8f7d\\u89e3\\u6790\\u5931\\u8d25",a);for(var b=0,c=d.length;b<c;b++)f.mM(a,d[b])},l=0,m=a.length;l<m;l++){h=a[l].data;if(h.BN)if(g.a.wf()<h.BN){f.mM(Error("Holding errored request!"), h);continue}else h.BN=null;e.push(0);b.push(a[l].id);c.push(a[l].floor);d.push(h)}b.length&&this.zja({version:e.join(";"),id:b.join(";"),floor:c.join(";"),n2:k,xwa:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];f.mM(d.error,d.result)}}})}},Cfa:function(a){g.a.isArray(a)||(a=[a]);if(a.length){for(var b=[],c={},d=0,e=a.length;d<e;d++){var f=a[d];"string"===typeof f&&(f=this.Fh(f));var f={data:f,id:f.id,floor:this.MF(f)},h=f.id+"_"+f.floor;c[h]?console.warn("Param duplicate",h):(c[h]=!0,b.push(f))}this.nja(b)}}}); g.extend(g.ME,{Ava:function(a,b,c){var d=this.lja;d||(this.lja=d={});d[a]||(d[a]={Hx:[]});var e=d[a].Hx;e.push({succ:b,err:c});if(!d[a].Bva){d[a].Bva=!0;var f=new XMLHttpRequest,h=function(b,c){for(var f=0,k=e.length;f<k;f++)e[f][b]&&e[f][b].apply(this,c);d[a]=null;delete d[a]},k=function(){h("err",arguments)},l=function(a){g.pV.Oka(a,function(a,b){h("succ",[a,b])})};f.onreadystatechange=function(){4===f.readyState&&(200!==f.status?k(Error("Status code not 200: "+f.status+"_"+f.statusText)):l(this.response))}; f.onerror=k;f.open("GET",a,!0);f.responseType="arraybuffer";f.send()}}});g.Uo=g.o.$c.extend({r:function(a,b){this.lD=!0;g.Uo.Sc.r.apply(this,arguments);this.QA=!0;this.cA=new g.w.sh(new z.w.sh({innerOverlay:!0}),b);this.cA.Yb.set("bubble",!0)},zCa:function(){return this.cA},bH:function(a){g.Uo.Sc.bH.apply(this,arguments);a.br=this.cA},Gl:function(a){this.Ja||(this.Ja=!0,this.U.q("complete"));return new g.Uo.BV(this,a)}});g.Uo.WU=z.o.$c.extend({r:function(){g.Uo.WU.Sc.r.apply(this,arguments);this.QA=!0},Mf:function(a){return new g.Uo(this,a)},Pg:function(){}}); g.Uo.BV=g.N.Tb.extend({r:function(){g.Uo.BV.Sc.r.apply(this,arguments)},kc:function(a){a=this.R=a.R;this.zoom=a.zoom;this.S=a.S},hj:function(){return[]}});g.rV=g.N.canvas.$c.extend({ja:[g.sa],r:function(){g.rV.Sc.r.apply(this,arguments)},Tua:function(a){var b={},c=[],d,e,f;d=0;for(e=a.length;d<e;d++){var h=a[d];f=h.name.split("-")[0];h.style&&(h.style.Nm?"polygon"!==f&&"multipolygon"!==f?console.warn("Not polygon"):(b[h.zIndex]||(b[h.zIndex]={zIndex:h.zIndex,b8:{}},c.push(b[h.zIndex])),f=b[h.zIndex].b8,f[h.style.Nm]||(f[h.style.Nm]=[]),f[h.style.Nm].push(h)):console.warn("Style missing uid",h))}c.sort(function(a,b){return a.zIndex-b.zIndex});d=0;for(e= c.length;d<e;d++){f=c[d].b8;for(var k in f)f.hasOwnProperty(k)&&this.hja(f[k])}},Cba:function(a,b){for(var c=null,d=0,e=b.length;d<e;d+=1){var f=this.Wf(b[d]),f=[Math.round(f[0])+0.5,Math.round(f[1])+0.5];0<d?a.lineTo(f[0],f[1]):(c=f,a.moveTo(f[0],f[1]))}c&&a.lineTo(c[0],c[1])},Bba:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.Cba(a,b[c].wa)},Aba:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.Bba(a,b[c].zf)},hja:function(a,b){b||(b=a[0].style);var c=this.Fb,d=b.strokeColor,e=b.strokeWeight, f=b.strokeOpacity,h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p;c.save();d&&(c.strokeStyle=d,e&&(c.lineWidth=e),c.lineCap="butt",c.lineJoin=b.lineJoin||"miter");h&&(c.fillStyle=h);c.beginPath();for(var e=0,q=a.length;e<q;e++){p=a[e].cc();if(p instanceof g.Aa.yc||p.o3)p=[p];else if(p instanceof g.Aa.pw||p.O2)p=p.Nf;else{console.warn("Unknown geometry",p);continue}this.Aba(c,p)}c.closePath();h&&(k!==n&&(n=c.globalAlpha=k),c.fill());d&&(f!==n&&(c.globalAlpha=f),"dashed"===l&& c.setLineDash&&c.setLineDash(m),c.stroke());c.restore()},RJ:function(a){return this.Tua(a)}});g.k$=g.aa.extend({ja:[g.sa],r:function(a,b){this.oa=a;this.Bb=b;this.Fea=g.a.bind(this.rt,this);this.zh=g.NE;this.D7(1);this.Rxa=!0;this.x7();this.z7();this.uM=!1},D7:function(a){this.ah=a;this.Vn=Math.log(this.ah)/Math.log(2)},x7:function(a){this.Gea=a||new g.H(0,0)},z7:function(a){this.PY=a||new g.H(0,0)},Mva:function(a){this.uM=a},MCa:function(){return this.ah},yfa:function(a){return this.oa.Ab(a)},rt:function(){},xG:function(a){a.canvas=a.canvas||a.xa;this.Xa&&this.Xa.Qa===a.canvas||(this.Xa= new g.rV(a.canvas,this.Fea));!1!==a.$g?g.j.dm(this.Xa.Qa,a.width,a.height,!0):a.width!==a.canvas.width?console.warn("width not match"):a.height!==a.canvas.height&&console.warn("height not match");this.Xa.Yd=a.Yd;this.Xa.S=a.S},$L:function(a,b,c,d){d=g.extend({split:!0,UT:!0,margin:{x:0,y:0}},d);c=c||a.Nc;this.jua(a,c,b,d);if(!a.vu)return null;var e=a.vu[c];if(!e)return null;var e=e.UU[b],f=this.Bb.Ip(a,c,!0);if(!f)return null;c=e.labels;var h=e.Qg;h<e.total&&(c=c.slice(0,e.Qg));if(!c||!c.length)return null; var k=d.I||f.I,f=d.Yd||f.Yd,l=Math.pow(2,20-b),m=d.margin,n=Math.ceil((k[2]-k[0])/l)+2*m.x,k=Math.ceil((k[3]-k[1])/l)+2*m.y,f=[f[0]-m.x*l,f[1]-m.y*l];b={ov:new g.qk,zoom:b,S:l,Yd:f,width:n,height:k};d.canvas&&(b.xa=d.canvas);b=this.qO(b,{split:d.split,cy:d.split?50:0,TH:d.split?50:0});k=0;for(f=b.length;k<f;k++){var p;d.Kr&&g.a.isArray(d.Kr)&&d.Kr[k]&&(b[k].xa=d.Kr[k].xa,g.j.dm(b[k].xa,b[k].width,b[k].height,!0));b[k].xa?(p=b[k].xa,!0===d.$g&&g.j.dm(p,b[k].width,b[k].height,!0)):this.KA||(p=this.yF(), g.j.dm(p,b[k].width,b[k].height,!0),b[k].xa=p);l=p?p.getContext("2d"):null;this.eja(c,g.extend({},b[k],{KC:!d.mS,canvas:p,Re:l}));h<e.total?g.extend(b[k],{status:0,Qg:h,total:e.total}):(b[k].status=1,b[k].ov=null)}d.mS&&(a.vu=null);return b},rX:function(a,b,c){c=g.extend({},c);var d=a.ma;return"label"===c.Os&&(!(20===d.zoom_max&&20<b-this.Vn)&&d.zoom_max&&b-this.Vn>d.zoom_max||d.zoom_min&&b-this.Vn<d.zoom_min)?!1:this.SD(a,b,c)?!0:!1},AM:function(a,b,c){if(a.filter)return a.filter(b,c);for(var d= [],e=0,f=a.length;e<f;e++)!1!==b.call(c,a[e],e)&&d.push(a[e]);return d},Vca:function(a,b){if(!a)return a;var c=this.AM(a,function(a){return this.rX(a.L,b,{Os:"label"})?(a=a.L.jh)&&(a.fontSize||a.Rf)?!0:!1:!1},this);return c.length===a.length?a:c},sX:function(a,b){if(!a)return a;var c=this.AM(a,function(a){return 0>a.name.indexOf("polygon")||!this.rX(a,b,{Os:"polygon"})||!a.style?!1:!0},this);return c.length===a.length?a:c},$W:function(a,b,c,d){d=g.extend({split:!0,margin:{x:10,y:10}},d);var e=d.I|| a.I,f=d.Yd||a.Yd,h=Math.pow(2,20-c),k=d.margin,l=Math.ceil((e[2]-e[0])/h)+2*k.x,e=Math.ceil((e[3]-e[1])/h)+2*k.y,f=[f[0]-k.x*h,f[1]-k.y*h];c=this.qO({zoom:c,S:h,Yd:f,width:l,height:e},{split:d.split});f=0;for(h=c.length;f<h;f++)c[f].xa=d.canvas||this.yF(),this.xG(g.extend({},c[f],{canvas:c[f].xa,$g:d.$g})),this.Xa.RJ(b||a.ha);return c},ica:function(a,b,c){var d=this.Bb.CS(a);return d?this.$W(d,a,b,c):null},bX:function(a,b,c,d){c=c||a.Nc;a=this.Bb.Ip(a,c,!0);return a&&a.Nl?(c=this.sX([a.Nl],b))&&c.length? this.$W(a,c,b,d):null:null},qO:function(a,b){b=g.extend({cy:0,TH:0,maxWidth:b.split?g.l.Z?512:1536:9999999,maxHeight:b.split?g.l.Z?512:1536:9999999},b);for(var c=b.maxHeight,d=a.width,e=a.height,f=a.S,h=a.Yd,k=Math.ceil(d/b.maxWidth),l=Math.round(d/k),c=Math.ceil(e/c),m=Math.round(e/c),n=[],p=0;p<k;p++)for(var q=0;q<c;q++){var r=p*l,s=Math.min(d,(p+1)*l),u=q*m,v=Math.min(e,(q+1)*m),x=[h[0]+r*f,h[1]+u*f],t=[h[0]+s*f,h[1]+v*f];n.push(g.extend({},a,{width:s-r+2*b.cy,height:v-u+2*b.TH,Yd:[x[0]-b.cy*f, x[1]-b.TH*f],Ud:new g.Gf([x[0]-b.cy*f,x[1]-b.TH*f,t[0]+b.cy*f,t[1]+b.cy*f])}))}return n},Tca:function(a,b){return this.AM(a,function(a){a.YW||(a.YW=new g.Gf(a.cc().pd()));return b.Ud.Hg(a.YW)?!0:!1})},aX:function(a,b,c,d){c=c||a.Nc;var e=this.Bb.Ip(a,c,!0);if(!e)return null;var f=this.sX(e.ha,b);if(!f||!f.length)return null;this.q("willRenderFloorPolygonFeatures",{zoom:b,floor:c,VAa:a,ha:f});d=g.extend({split:!0,UT:!0,margin:{x:10,y:10}},d);c=d.I||e.I;var e=d.Yd||e.Yd,h=Math.pow(2,20-b),k=d.margin, l=Math.ceil((c[2]-c[0])/h)+2*k.x;c=Math.ceil((c[3]-c[1])/h)+2*k.y;e=[e[0]-k.x*h,e[1]-k.y*h];b={zoom:b,S:h,Yd:e,width:l,height:c};d.canvas&&(b.xa=d.canvas);b=this.qO(b,{split:d.split});c=0;for(e=b.length;c<e;c++)h=this.Tca(f,b[c]),h.length&&(g.extend(b[c],{status:0,ha:h,Qg:0,total:h.length}),d.Kr&&g.a.isArray(d.Kr)&&d.Kr[c]&&(b[c].xa=d.Kr[c].xa,g.j.dm(b[c].xa,b[c].width,b[c].height,!0)),d.UT||!b[c].xa?this.Sja(b[c],a,b[c].total+1):(this.xG(g.extend({},b[c],{$g:d.$g})),this.Xa.RJ(h)));return b},bda:function(a){a.jp&& (a=a.jp);var b=a.ha.slice(0,a.Qg);this.SW(a);a.xa=this.yF();this.xG({$g:!0,canvas:a.xa,width:a.width,height:a.height,zoom:a.zoom,Yd:a.Yd,S:a.S});this.Xa.RJ(b);return a.xa},SW:function(a){a.Qg>=a.total&&(a.status=1,a.ha=null)},Bda:function(){this.yX||(this.yX=g.a.bind(this.bda,this));return this.yX},Sja:function(a,b,c){c||(c=g.l.Z?300:1E3);b=a.Qg;c=Math.min(b+c,a.total);var d=a.ha;b>=c||!d?a.status=1:(a.Qg=c,a.xa?"function"!==typeof a.xa&&(this.xG(g.extend({},a,{$g:!1})),this.Xa.RJ(d.slice(b,c)),this.SW(a)): a.xa=this.Bda(),b=!0,a.Qg<a.total?(a.dp||(a.dp=0),a.Qg-a.dp<a.total/5&&(b=!1)):a.status=1,b&&!0!==a.C5&&a.dp!==a.Qg&&(a.dp=a.Qg,this.q("render",{type:"floor"})))},LF:function(a,b){return a+"_"+b},n3:function(a,b){if(!a)return null;if(a.zoom===b)return a;g.a.isArray(a)||(a=[a]);for(var c=[],d=0,e=a.length;d<e;d++)c.push(g.extend({},a[d],{jp:a[d],width:Math.round(a[d].width*Math.pow(2,b-a[d].zoom)),height:Math.round(a[d].height*Math.pow(2,b-a[d].zoom))}));return c},$ca:function(a,b,c){if(!c)return null; a=a.Nc;b=Math.round(b);var d=b-2,e,f;for(e=b;20>=e;e++)if(f=this.LF(a,e),c[f])return c[f];for(e=b;e>=d;e--)if(f=this.LF(a,e),c[f])return c[f];return null},yF:function(){this.KL||(this.KL=1);var a=document.createElement("canvas");a.id="amap_indoor_c_"+this.KL;this.KL++;return a},bM:function(a,b){var c=this.yF();this.wY=c;c.width=Math.max(300,a);c.height=Math.max(300,b);c.BF={x:0,y:0,Ul:0};return c},Ufa:function(a,b,c){a=a.BF;a.x+=b;a.Ul=Math.max(a.Ul,c)},Zca:function(a,b){var c=this.wY;c||(c=this.bM(a, b));for(var d=c.BF,d=[{x:d.x,y:d.y,Ul:Math.max(d.Ul,b)},{x:0,y:d.y+d.Ul,Ul:b}],e=0,f=d.length;e<f;e++){var h=d[e];if(h.x+a<c.width&&h.y+b<c.height)return g.extend(c.BF,h),c}return this.bM(a,b)},Nba:function(a,b){var c=this.xY;this.xY||(c=this.xY=(this.wY||this.bM(100,12)).getContext("2d"));var d=this.M_(c,b);return[Math.ceil(c.measureText(a).width)+1,d.fontSize+3]},M_:function(a,b){var c=b.fontSize*this.ah,d=b.strokeColor,e=b.fillColor;a.lineWidth=2;a.font="400 "+c+\'px "Microsoft YaHei"\';a.textBaseline= "bottom";a.textAlign="start";a.strokeStyle=d;a.fillStyle=e;return{fontSize:c}},ifa:function(a){var b=[a.width,a.height],c=a.style,d=a.text,e=[3,3],e=[b[0]+e[0],b[1]+e[1]],f=this.Zca(e[0],e[1]);if(!f)return console.error("No canvas got!"),null;var h=f.getContext("2d"),k=f.BF;this.M_(h,c);h.textBaseline="bottom";c.strokeColor&&h.strokeText(d,k.x,k.y+b[1],b[0]);c.fillColor&&h.fillText(d,k.x,k.y+b[1],b[0]);g.extend(a,{x:k.x,y:k.y,style:null,text:null});a.xa=f;this.Ufa(f,e[0],e[1]);return f},Jda:function(){this.OY|| (this.OY=g.a.bind(this.ifa,this));return this.OY},kca:function(a,b){if(!b.fontSize)return{xa:null,width:0,height:0};var c=this.Nba(a,b),c={style:b,text:a,width:c[0],height:c[1],AS:c[0],zS:c[1]};c.xa=this.Jda();return c},jca:function(a,b){b=b||a.Nc;var c=this.Bb.Ip(a,b,!0);if(!c)return null;var d=[],e=[];a.tp&&(d.push(a.tp),c.Nl&&(a.tp.UL=g.I.ki(c.Nl.cc().pd())));c.Nl&&d.push(c.Nl);d.push.apply(d,c.ha);for(var c=0,f=d.length;c<f;c++){var h=d[c],k=h.ma,l=h.cc().pd();if(!k.poitype||!this.zh.s4(k.poitype)){if(!h.UL&& k.font_anthor_point){var m=this.yfa(k.font_anthor_point);h.UL=[m.x,m.y]}k.rank||k.building_poi_style&&(k.rank=10);e.push({coords:h.UL||g.I.ki(l),CD:k.rank||0,L:h,ma:h.ma})}}e.sort(function(a,b){var c=b.CD-a.CD;if(0!==c)return c;var c=a.L.jh,d=b.L.jh,e=0,f=0;c&&d&&(c.Rf&&(e=1),d.Rf&&(f=1));return f-e});return{UU:{},labels:e}},Tja:function(a,b,c,d){d||(d=g.l.Z?300:1E3);b=a.UU[c];var e=b.Qg;d=Math.min(e+d,b.total);var f=b.labels;if(e>=d||!f)b.status=1;else{for(;e<d;e++){var h=f[e].L;if(!f[e].zE)f[e].zE= h.tAa={};else if(f[e].zE[c])continue;this.SD(h,c,{Os:"label"});var k=h.ma.name||h.ma.name_cn,l=h.jh;if(l){k=this.kca.call(this,k,l);h=l.Fy||[c];l.Rf&&(k.Rf=l.Rf);for(var l=0,m=h.length;l<m;l++)f[e].zE[parseInt(h[l],10)+this.Vn]=k}else console.warn("No style",f[e])}b.Qg=d;c=!0;b.Qg<b.total?(b.dp||(b.dp=0),b.Qg-b.dp<b.total/5&&(c=!1)):b.status=1;c&&!0!==a.C5&&b.dp!==b.Qg&&(b.dp=b.Qg,this.q("render",{type:"label"}))}},tba:function(a,b){var c=a.UU,d=c[b];d||(d=this.Vca(a.labels,b),d=c[b]={total:d.length, labels:d,status:0,Qg:0});d.Qg===d.total&&(d.status=1)},jua:function(a,b,c){if(b=b||a.Nc){a.vu||(a.vu={});var d=a.vu;d[b]||(d[b]=this.jca(a,b));this.tba(d[b],c);this.Tja(g.extend({},d[b],{C5:!0}),a,c,999999999);return d[b]}},DA:function(a,b,c,d){var e=a.Nc;if(!e)return null;var f=Math.round(b)+this.Vn,e=d.iy?d.iy.call(this,e,f):null,h=d.PC,k=e&&h?h[e]:null;(!k||k.AL)&&c&&(k=d.eC.call(this,a,f,k?{Kr:k}:null))&&(k.AL&&(k.AL=null),e&&(h[e]=k));return k?f===b?k:this.n3(k,b):d.w2?(a=this.$ca(a,b,h),this.n3(a, b)):null},kpa:function(a,b,c){b=b.zoom;a.Ay||(a.Ay={});return this.DA(a,b,c,{PC:a.Ay,iy:this.LF,eC:function(a,b,c){return this.$L(a,b,a.Nc,c)}})},LQ:function(){var a;this.Sq&&(a=this.Sq.fG);return a||0},lpa:function(a,b){this.Dea();var c=Math.round(b.zoom)+this.Vn;a.Ay||(a.Ay={});this.$L(a,c,a.Nc);c=this.Tia();if(0<this.LQ())return[];if(b.Ga){for(var d=[],e=0,f=c.length;e<f;e++){var h=c[e].wa;h&&b.Ga.contains(new g.H(h[0],h[1]))&&d.push(c[e])}c=d}return c},cpa:function(a,b,c){b=b.zoom;a.pQ||(a.pQ= {});return this.DA(a,b,c,{w2:!0,PC:a.pQ,iy:function(b,c){return b+"_"+c+(a.DG?"_sel":"")},eC:function(a,b){return this.bX(a,b,a.Nc)}})},p2:function(a,b){if(a){b=g.extend({$B:!0},b);var c=[a.$H];b.$B&&(c.push(a.Ay),a.vu=null);for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f)for(var h in f)f.hasOwnProperty(h)&&(f[h].AL=!0)}}},bpa:function(a,b,c){b=b.zoom;a.$H||(a.$H={});return(a=this.DA(a,b,c,{w2:!0,PC:a.$H,iy:this.LF,eC:function(a,b,c){return this.aX(a,b,a.Nc,c)}}))?a:null},apa:function(a,b,c,d){return this.DA(a, b.zoom,!0,{PC:{},iy:null,eC:function(a,b){return this.ica(d.ha,b,g.extend({mS:!0,split:!1,canvas:d.canvas},d.B))}})},yM:function(a,b,c,d){var e=b.Ga,f=e.Zb,h=e.Fd;return this.DA(a,b.zoom,!0,{PC:{},iy:null,eC:function(a,b){return d.yR.call(this,a,b,a.Nc,g.extend({mS:!0,margin:{x:0,y:0},split:!1,canvas:c,I:[f.x,f.y,h.x,h.y],Yd:[f.x,f.y],UT:!1},d.B))}})},yna:function(a,b,c,d){return this.yM(a,b,c,{yR:this.$L,B:d})},wna:function(a,b,c,d){return this.yM(a,b,c,{yR:this.bX,B:d})},vna:function(a,b,c,d){return this.yM(a, b,c,{yR:this.aX,B:d})},BM:function(a,b,c,d,e,f,h){c*=e;d*=e;e=h.call(this,{Dz:c,Ul:d,xI:c/2,py:d/2,S:e});h=0;for(var k=e.length;h<k;h++){var l=[b[0]+e[h][0],b[1]+e[h][1]],l=[l[0],l[1],l[0]+c,l[1]+d];if(!f||(!a||a.contains(new g.Gf(l)))&&!f.search(l).length)return l}return null},Uda:function(a,b,c){var d=Math.ceil((a[0]-b[0])/c);b=Math.ceil((a[1]-b[1])/c);var e=Math.round((a[2]-a[0])/c);a=Math.round((a[3]-a[1])/c);return{width:e,height:a,x:d,y:b}},Dea:function(){this.KA=!0;this.SM=[]},Tia:function(){this.KA= !1;var a=this.SM;this.SM=null;return a},sba:function(a,b,c){b=a.ma;if(!b)return console.warn(a),null;var d=b.name||b.name_cn,e=b.pid,f=a.coords,h=[];a.RR&&h.push({source:a,Ud:a.RR});a.rR&&h.push({Vqa:!0,source:a.og?a.og:a,Ud:a.rR});a=[];for(var k=[],l=0,m=h.length;l<m;l++){var n=h[l].source;a.push(n.xa||n.qqa);n=[Math.round((h[l].Ud[0]-f[0])/c),Math.round((h[l].Ud[1]-f[1])/c),n.width,n.height,n.x||0,n.y||0,n.AS||n.width,n.zS||n.height];h[l].Vqa&&(n.BY=!0);k.push(n)}return{wa:f,name:d,qs:e,zIndex:1E4, Be:Infinity,$l:!0,margin:2,id:b.cpid||e,tBa:b.cpid,Da:a,Ta:k}},xM:function(a,b,c,d,e,f,h){if(this.KA){if(c.xa){"function"===typeof c.xa&&(c.xa(c.jp||c,{Ud:d,S:e,Yd:f}),c.jp&&(c=g.extend({},c,c.jp)));var k=this.sba(c,d,e);k&&this.SM.push(k)}}else{k=this.Uda(d,f,e);if(c.xa){"function"===typeof c.xa&&(c.xa(c.jp||c,{Ud:d,S:e,Yd:f,Na:k,canvas:a}),c.jp&&(c=g.extend({},c,c.jp)));if(c.xa){var l=!0;if(h){var m=new g.Gf(0,0,a.width,a.height),n=new g.Gf(k.x,k.y,k.x+c.width,k.y+c.height);m.contains(n)||(l=!1)}l&& b.drawImage(c.xa,c.x||0,c.y||0,c.AS||c.width,c.zS||c.height,k.x,k.y,c.width,c.height)}return k}if(c.Dm){var p=this,k=c.Dm,q=Array.prototype.slice.call(arguments,0);q.push(1);k.push(function(a,b){a||(g.extend(q[1],b),p.xM.apply(this,q))})}}},Pw:function(a,b,c){return[a[0]-b[0]*c,a[1]-b[1]*c,a[2]+b[0]*c,a[3]+b[1]*c]},ija:function(a,b){if(a.L.jh){var c=a.L.jh.WW,d=a.coords,e=this.CQ(a.L,"labelSizeOffset")||this.PY,f=Math.max(0<a.width?1:0,a.width+e.hf()),h=Math.max(0<a.height?1:0,a.height+e.de()),e= f-a.width,k=h-a.height,d=this.BM(b.KC?b.Ud:null,d,f,h,b.S,c?b.ov:null,function(a){return[[-a.xI,-a.py],[0,-a.py],[-a.Dz,-a.py]]});if(!d)return!1;c&&b.Ud.Hg(new g.Gf(d))&&b.ov.Xr(this.Pw(d,[1,1],b.S),a);d=this.Pw(d,[e/2*-1,k/2*-1],b.S);a.RR=d;this.xM(b.canvas,b.Re,a,d,b.S,b.Yd,b.KC);return!0}},dja:function(a,b){var c=a.og;if(!c)return!1;if(a.L.jh){var d=a.L.jh.WW,e=a.coords,f=this.CQ(a.L,"iconSizeOffset")||this.Gea,h=Math.max(0<c.width?1:0,c.width+f.hf()),k=Math.max(0<c.height?1:0,c.height+f.de()), f=h-c.width,l=k-c.height,m=this.BM(b.KC?b.Ud:null,e,h,k,b.S,d?b.ov:null,function(a){return[[-a.xI,-a.py]]});if(!m)return!1;var n=this.CQ(a.L,"labelSizeOffset")||this.PY,p=Math.max(0<a.width?1:0,a.width+n.hf()),q=Math.max(0<a.height?1:0,a.height+n.de()),n=p-a.width,r=q-a.height,s=null;0<p*q&&(s=this.BM(b.KC?b.Ud:null,e,p,q,b.S,d?b.ov:null,function(a){return[[-a.xI,(0+k/2)*a.S],[(0+h/2)*a.S,-a.py],[-a.Dz-(0+h/2)*a.S,-a.py],[-a.xI,-a.Ul-(0+k/2)*a.S]]}));e=[];m&&(d&&b.Ud.Hg(new g.Gf(m))&&b.ov.Xr(this.Pw(m, [0,0],b.S),c),m=this.Pw(m,[f/2*-1,l/2*-1],b.S),a.rR=m,c.ma=a.ma,c.rR=m,c.coords=a.coords,c.BY=!0,this.KA&&s||e.push([c,m]));s&&(d&&b.Ud.Hg(new g.Gf(s))&&b.ov.Xr(this.Pw(s,[0,0],b.S),a),s=this.Pw(s,[n/2*-1,r/2*-1],b.S),a.RR=s,e.push([a,s]));this.KA&&1<e.length&&console.warn("More than one image with _imageRenderingHolded");c=0;for(d=e.length;c<d;c++)this.xM(b.canvas,b.Re,e[c][0],e[c][1],b.S,b.Yd,b.KC)}},PX:function(a){return g.A.yb+"/images/indoor_icon/"+(1<this.ah?"36/"+a+"@2x":"18/"+a)+".png"},Eca:function(a, b){var c=this.PX(a),d=document.createElement("img");d.crossOrigin="Anonymous";d.onload=function(){d.loaded=!0;b(null,this);d.onload=d.onerror=null};d.onerror=function(a){b(a,this);d.onload=d.onerror=null};d.src=c},Fda:function(a){this.Sq||(this.Sq={fG:0});var b=this.Sq[a];if(!b){var b=this.Sq[a]={status:1,Rf:a,width:18*this.ah,height:18*this.ah,qqa:this.PX(a),Dm:[]},c=this;this.Sq.fG++;this.Eca(a,function(a,e){c.Sq.fG--;if(!a&&(b.xa=e,b.AS=e.width,b.zS=e.height,b.Dm)){var f=b.Dm;b.Dm=null;for(var h= 0,k=f.length;h<k;h++)f[h].call(c,null,b)}c.Sq.fG||c.q("render",{type:"icon"})})}return b},eja:function(a,b){if(a.length)for(var c=0,d=a.length;c<d;c++)if(a[c].zE){var e=a[c].zE[b.zoom];if(e){!this.uM&&e.Rf&&(e.og=this.Fda(e.Rf));var f=!this.uM&&e.og?this.dja:this.ija;a[c].h_||(a[c].h_=new g.H(a[c].coords[0],a[c].coords[1]));b.Ud.contains(a[c].h_)&&(a[c].L&&this.SD(a[c].L,b.zoom,{Os:"label"}),f.call(this,g.extend({jp:e},a[c],e),b))}}},joa:function(a){if(a.Nw){var b=a.Nw;b.disableIconRender&&a.jh&& a.jh.Rf&&(a.jh=g.extend({},a.jh,{Rf:null}));b.disableLabelRender&&a.jh&&(a.jh=g.extend({},a.jh,{fontSize:0}))}},CQ:function(a,b){return a&&a.Nw?a.Nw[b]:null},SD:function(a,b,c){c.Os||console.warn("triggerType not set");g.extend({Os:"polygon"},c);b-=this.Vn;c=a.ma;var d=c.poitype||c.building_poi_style;d&&(a.jh=this.zh.i3(d,b));a.jM&&(a.jh=this.zh.p5(a.jh,a.jM));if(c.highlighted_floor_line_style)(d=this.Bb.Fh(c.jt))?a.style=this.zh.IQ(d.DG?c.highlighted_floor_line_style:c.unhighlighted_floor_line_style, b):console.warn("Can not load: ",c);else if(c=c.regiontype||c.floor_region_type)a.style=this.zh.zpa(c,b);a.kM&&(a.style=this.zh.p5(a.style,a.kM));this.joa(a);if(!a.style&&!a.jh)return!1;1!==this.ah&&a.style&&a.style.strokeWeight&&(a.style=this.zh.oI(a.style),a.style.strokeWeight*=this.ah);return!0}});g.qV=g.aa.extend({ja:[g.sa,g.Pe],B:{visible:!0,zooms:[18,20],floorBarContainerStyle:null,floorListContainerStyle:null},r:function(a){g.a.Db(this,a);this.f={};this.hO();this.setOptions(this.B);this.JX()},setOptions:function(a){this.Xe(a)},show:function(){this.setOptions({visible:!0})},hide:function(){this.setOptions({visible:!1})},visibleChanged:function(){var a=this.get("visible");g.j.Va(this.f.K,{display:a?"block":"none"});a&&(a=this.f.K.En)&&this.sB(a)},floorDataChanged:function(){var a=this.get("floorData"); this.Qia(a)},gfa:function(){return!!this.get("visible")},Tt:function(a,b){this.map=a;b.appendChild(this.f.K);this.gf=b;this.Im()},qv:function(){this.Om();this.gf.removeChild(this.f.K);this.f={};this.map=this.gf=null},Im:function(){this.Pa={};for(var a="click mouseover mouseout mousedown mouseup touchstart touchend touchcancel mousewheel".split(" "),b=0,c=a.length;b<c;b++)this.Pa[a[b]]=g.event.X(this.f.K,a[b],this.nea,this)},TL:function(a){if(a){var b=this;setTimeout(function(){a.call(b,b.nF)},0)}}, JX:function(a){if(this.nF)this.TL(a);else{var b=function(a){a.gG&&(clearTimeout(a.gG),a.gG=null);a.UY&&a.nN&&(a.nN.apply(this,arguments),a.UY=!1)},c={"mousewheel DOMMouseScroll":{"*":function(a,b){g.F.stopPropagation(b);var c=0;b.wheelDelta?(c=120,g.l.Iy&&(c=120===Math.abs(b.wheelDelta)?400:240),c=b.wheelDelta/c,window.opera&&g.a.Eh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):b.detail&&(c=-b.detail);this.Rfa(c)}},mousedown:{"floor-nav":function(a){a.mN=!1;var b=arguments, c=this;a.gG=setTimeout(function(){a.gG=null;a.mN=!0;a.oN&&(a.oN.apply(c,b),a.UY=!0)},1E3)}},mouseup:{"floor-nav":function(){b.apply(this,arguments)}},mouseover:{"floor-nav":function(a){g.j.Ra(a,"hover")}},mouseout:{"floor-nav":function(a){g.j.ab(a,"hover");b.apply(this,arguments)}},click:{"floor-plus":function(a){a.mN||this.fZ(1)},"floor-minus":function(a){a.mN||this.fZ(-1)},"floor-nonas":function(a){this.cda(a.parentNode)}}};if(g.l.Z&&g.l.Cf){var d=this;this.tx=!0;g.qb.load("AMap.IndoorMapTouch", function(){d.nF=c;d.Tea();d.TL(a)})}else this.nF=c,this.TL(a)}},nea:function(a){var b=a.target||a.target||a.srcElement,c=a.type;if(b){var d=[b,a];this.JX(function(a){for(var f in a)if(a.hasOwnProperty(f)&&!(0>f.split(" ").indexOf(c))){var h=a[f],k;for(k in h)("*"===k||g.j.bn(b,k))&&h[k].apply(this,d)}})}},GM:function(a,b){var c=this.f.K.dda,d=c.indexOf(a);if(0>d)console.warn("Can not found floor: ",a,c);else if(d+=b,!(0>d||d>=c.length))return{id:d,wu:c[d]}},fZ:function(a){(a=this.GM(this.f.K.En,a))&& this.wO(a.wu)},Rfa:function(a){0<a?this.xO(null,!0):this.yO(null,!0)},cda:function(a){a.Qq!==this.f.K.En&&this.wO(a.Qq)},wO:function(a){this.Xja("floorChanged",{wu:a,$n:this.f.K.ap})},Xja:function(a,b){this.q(a,b)},Om:function(){this.zB();if(this.Pa)for(var a in this.Pa)this.Pa.hasOwnProperty(a)&&g.event.removeListener(this.Pa[a])},zba:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-plus";a.innerHTML="+";a.oN=function(){this.xO()};a.nN=function(){this.zB()};return a}, vba:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-minus";a.innerHTML="-";a.oN=function(){this.yO()};a.nN=function(){this.zB()};return a},iAa:function(){return this.f.K.En},hAa:function(){return this.f.K.ap},GF:function(a){var b=null;this.CM(function(c){if(c.Qq===a)return b=c,!1});return b},w7:function(a,b,c){if(this.f.K.ap===a){a=this.GF(b);if(!a)return!1;this.Oaa(a,!c);c&&this.sB(b)}},Oaa:function(a,b){if(!a)return!1;var c=this.Xca(a,"amap-indrm-loader");b? c&&c.parentNode.removeChild(c):c||(c=document.createElement("div"),c.className="amap-indrm-loader",a.appendChild(c));this.Wn(a,"with-indrm-loader",!b);this.Wn(this.f.K,"with-indrm-loader",!b);return!0},Xca:function(a,b){var c=null;this.AX(a,function(a){if(g.j.bn(a,b))return c=a,!1},b);return c},AX:function(a,b,c){a=Array.prototype.slice.call(a.childNodes,0);for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f&&(!c||g.j.bn(f,c))&&!1===b.call(this,f,d))break}},CM:function(a){this.AX(this.f.Mr,a,"floor-list-item")}, Vva:function(a,b){this.f.K.ap!==a?console.warn("building id not match"):(this.CM(function(a){this.Wn(a,"selected",a.Qq===b)}),this.f.K.En=b,this.Sia(),this.sB(b))},Iia:function(a){var b=a.offsetLeft,c=a.offsetTop;do if(a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;else break;while(1);return{left:b,top:c}},pF:function(a){if(!a.getBoundingClientRect)return this.Iia(a);a=a.getBoundingClientRect();var b=document.documentElement;return{top:a.top+b.scrollTop,left:a.left+b.scrollLeft}},oF:function(a){return a.offsetHeight|| a.clientHeight||0},afa:function(a){var b=document.body;if(b.contains)return b.contains(a);for(;a;){if(a===b)return!0;a=a.parentNode}return!1},xO:function(a,b){if(g.j.bn(this.f.K,"can-scroll-up")){var c=this.f.K;a||(a=c.H_||c.En);var d=this.GM(a,1);if(d&&(this.sB(d.wu),!b)){this.zB();var e=this;e.RG=setTimeout(function(){e.xO(d.wu)},170)}}},yO:function(a,b){if(g.j.bn(this.f.K,"can-scroll-down")){var c=this.f.K;a||(a=c.H_||c.En);var d=this.GM(a,-1);if(d&&(this.sB(d.wu),!b)){var e=this;this.zB();e.RG= setTimeout(function(){e.yO(d.wu)},170)}}},zB:function(){this.RG&&(clearTimeout(this.RG),this.RG=null)},cAa:function(a){return g.mw.KP(a)},rW:function(a,b){if(!g.l.Z)return g.mw.P0(a,b)},TX:function(a){return this.pF(a).top-this.pF(this.f.Mr).top},SX:function(a,b){var c=this.GF(a);if(!c)return!1;var d=this.oF(this.f.Mr),e=this.oF(this.f.oQ),f=this.oF(c),c=this.TX(c)-e/2+f/2;b=g.extend({iS:this.tx?-f:0,gS:d-e+(this.tx?f:0)},b);return{wra:d,ola:e,iS:b.iS,gS:b.gS,j8:c}},sB:function(a){if(this.gfa()){var b= this.GF(a);if(!b)console.warn("Can not find floor: ",a);else if(this.afa(b)){var b=this.f.Mr,c=this.SX(a),d=this.tx||c.wra>c.ola;this.Wn(this.f.K,"can-scroll",d);this.f.K.H_=a;d&&(a=c.j8,d=c.iS,c=c.gS,a<d?a=d:a>c&&(a=c),d=-parseInt(b.style.marginTop,10)||0,5<Math.abs(d-a)&&(this.rW(b),b.style.marginTop=-a+"px"),d=-parseInt(b.style.marginTop,10)||0,this.Wn(this.f.K,"can-scroll-down",d<c),this.Wn(this.f.K,"can-scroll-up",0<d));this.G_()}}},G_:function(a){if(!this.tx){arguments.length||(a=this.f.K.En); var b=this.GF(a);if(!b)return!1;var c=this.f.oQ,d=this.f.Mr;this.rW(this.f.ET);var e=this.pF(c).top-this.pF(this.f.K).top,b=e+this.TX(b)+(parseInt(d.style.marginTop,10)||0);this.f.ET.style.top=b+"px";this.f.ET.style.display=b>this.oF(c)+e+5||b<e-15?"none":""}},Sia:function(){var a=this.f.K,b=a.En,c=a.Mfa;this.Wn(this.f.r6,"disabled",b===a.Kfa);this.Wn(this.f.s5,"disabled",b===c)},Wn:function(a,b,c){a&&(c?g.j.Ra:g.j.ab).call(g.j,a,b)},hO:function(){if(this.f.K){var a=this.f.K;a.innerHTML="";a.className= "amap-indoormap-floorbar-control";a.ap=null}else this.f.K=g.j.create("div",null,"amap-indoormap-floorbar-control")},Qia:function(a){var b=this.f.K;a?(a.id!==b.ap&&this.nba(a),b.En=a.Nc,this.Vva(b.ap,b.En)):this.hO()},L_:function(a,b){b?a.setAttribute("title",b):a.removeAttribute("title")},nba:function(a){this.hO();var b=this.f.K;this.Wn(b,"is-mobile",!!g.l.Z);this.Wn(b,"touch-scroll",this.tx);var c=a.moa,d=c.noa,e=c.qQ.length,f=e>(this.tx?Infinity:5),h=document.createDocumentFragment(),k=g.j.create("div", h,"panel-box");this.L_(b,c.name_cn);this.f.ET=g.j.create("div",k,"select-dock");f&&(this.f.r6=this.zba(),k.appendChild(this.f.r6));var l=document.createElement("ul");l.className="floor-list";for(var m=e-1;0<=m;m--){var n=document.createElement("li");n.className="floor-list-item";n.innerHTML=\'<div class="floor-btn floor-nonas">\'+c.ooa[m]+"</div>";n.Qq=c.qQ[m];0===m?b.Mfa=n.Qq:m===e-1&&(b.Kfa=n.Qq);this.L_(n,d[m]);l.appendChild(n)}b.yAa=0;b.xAa=e-1;b.dda=[].concat(c.qQ);c=document.createElement("div"); c.className="floor-list-box";c.appendChild(l);k.appendChild(c);f&&(this.f.s5=this.vba(),k.appendChild(this.f.s5));b.ap=a.id;b.appendChild(h);this.f.Mr=l;this.f.oQ=c;this.Saa()},Saa:function(){var a={floorBarContainer:this.f.K,floorListContainer:this.f.oQ},b;for(b in a)if(a.hasOwnProperty(b)){var c=this.get(b+"Style");c&&this.Taa(a[b],c)}},Taa:function(a,b){if(a)for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])}});z.o.h$=z.o.Tb.extend({r:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.CLASS_NAME="AMap.IndoorMap";g.c.va(this,a);if(!g.l.Ok)return null;this.Pb=a;this.tt=!1},mapChanged:function(){var a=this;if(!this.tt&&void 0===this.Ifa){var b="3D"===this.get("map").get("viewMode")&&g.l.rq?"3D":"2D",c=function(){var c="3D"===b?z.o.dt:z.o.g$;a.r=a.initialize=c.prototype.r;g.a.Tva(a,c.prototype);c.call(a,a.Pb);a.Pb=null;a.tt=!0};"3D"===b?g.qb.load("AMap.IndoorMap3D",c):c();this.Ifa= !0}}});window.AMap.IndoorMap=z.o.h$; z.o.VK={B:{visible:!0,opacity:1,zIndex:11,featureszIndex:null,zooms:[17,25],hideFloorBar:!1,bubble:"true",alwaysShow:!1,disableIconRender:!1,disableLabelRender:!1,disableHoverMarker:!1,autoLoadBuildingsInTile:!0},r:function(a){var b=this;this.CLASS_NAME="AMap.IndoorMap";g.c.va(this,a);this.LAYER_NAME="IndoorLayer";if(!g.l.Ok)return null;this.$F=0;this.fO=!g.l.Z;this.Uw=g.j.create("div");this.rY=g.j.create("div",this.Uw,"floor-outline-image-con");this.LA=g.j.create("div",this.Uw,"floor-image-con"); this.UM=g.j.create("div",this.Uw,"highlight-image-con");this.TF=g.j.create("div",this.Uw,"label-image-con");this.constructor.Sc.r.call(this,this.Uw,a);g.j.Ra(this.Uw,"amap-indoor-map");this.If=new z.w.rb({innerOverlay:!0,offset:new g.H(0,0),content:" ",noSelect:!0,visible:!1});this.If.za=!0;this.oa=this.CA();this.Tc=null;this.Bb=this._dataMgr=new g.ME(this.oa);this.Bb.g("loaded",function(){b.Un()},this);this.Bb.g("featureStyleUpdate",this.sZ,this);this.Bb.g("featureLabelStyleUpdate",this.qZ,this); this.Bb.g("featureOptionsUpdate",this.rZ,this);this.uW=1;this.Ni=void 0;this.zh=g.NE;this.yca=this.zh.oI({strokeColor:"rgba(224,180,135,1)",fillColor:"rgba(224,180,135,0.5)"});this.tt=!0;this.oa&&this.mapChanged();this.SO=this.getRenderLabels;g.a.ub(this)},setzIndex:function(a){g.c.add(this,"setzIndex");this.constructor.Sc.setzIndex.apply(this,arguments);this.Kn&&this.Kn.setzIndex(this.get("featureszIndex")||a)},L5:function(a){this.gB(a.k1)},l9:function(){return!!this.get("autoLoadBuildingsInTile")}, showIndoorMap:function(a,b,c,d){g.c.add(this,"showIndoorMap");var e=this;if(this.tH()){var f=arguments[arguments.length-1],h=null;f&&"function"===typeof f&&(h=f);h===b&&(b=null);h===c&&(c=null);this.ZT(a,b,function(a,b,f){if(!a){var n=(e.get("zooms")||[18,20])[0],n=Math.max(e.oa.get("zoom"),n),p=b.XR,q=null;c&&(q=e.Bb.Epa(b,b.Nc,c));q&&q.lnglat&&(p=q.lnglat);d||e.oa.setZoomAndCenter(n,p,!0);e.tH()&&e.Un();e.Pt(b);q&&(f.shop=q)}g.event.O(e,"floor_complete",f);h&&h(a,f)},{I8:!1})}},showFloor:function(a, b){g.c.add(this,"showFloor");if(!this.Cl)return!1;this.showIndoorMap(this.Cl,a,void 0,b)},showFloorBar:function(){g.c.add(this,"showFloorBar");this.set("hideFloorBar",!1)},hideFloorBar:function(){g.c.add(this,"hideFloorBar");this.set("hideFloorBar",!0)},hideFloorBarChanged:function(){this.Jt()},featureszIndexChanged:function(){this.Kn&&this.Kn.setzIndex(this.get("featureszIndex")||this.get("zIndex"))},visibleChanged:function(){var a=this.constructor.Sc.visibleChanged;a&&a.apply(this,arguments);this.bO()}, disableLabelRenderChanged:function(){this.Un()},hideLabels:function(){g.c.add(this,"hideLabels");this.set("disableLabelRender",!0)},showLabels:function(){g.c.add(this,"showLabels");this.set("disableLabelRender",!1)},cursorChanged:function(){this.nO(this.get("cursor"))},nO:function(a){this.cf&&this.cf.cA.Yb.set("cursor",a)},getSelectedBuildingId:function(){g.c.add(this,"getSelectedBuildingId");return this.Cl||null},getSelectedBuilding:function(a){g.c.add(this,"getSelectedBuilding");var b=this.Cl|| null;return b?(b=this.Bb.Fh(b))?this.Bb.xQ(b,a):null:null},Pg:function(){this.Tc&&(this.Tc.wb=[]);this.iX()},sZ:function(a){this.refreshFloorStyle(a.L.ma.jt,{$B:!1})},qZ:function(a){this.refreshFloorStyle(a.L.ma.jt,{$B:!0})},rZ:function(a){this.refreshFloorStyle(a.L.ma.jt,{$B:!0})},refreshFloorStyle:function(a,b){if(this.Bb){b=g.extend({$B:!0},b);if(a)this.Kd.p2(this.Bb.Fh({id:a}),b);else{var c=this;this.Bb.forEach(function(a){c.Kd.p2(a,b)})}this.tF();this.Un()}},iconSizeOffsetChanged:function(){this.Kd&& (this.Kd.x7(this.get("iconSizeOffset")),this.refreshFloorStyle())},disableIconRenderChanged:function(){this.Kd&&(this.Kd.Mva(this.get("disableIconRender")),this.refreshFloorStyle())},labelSizeOffsetChanged:function(){this.Kd&&(this.Kd.z7(this.get("labelSizeOffset")),this.refreshFloorStyle())},mapChanged:function(){if(this.tt){var a=this.CA();this.Tc&&this.oa===a||(this.constructor.Sc.mapChanged.apply(this,arguments),this.iX(),this.oa=a,this.Tc=this.pda(),this.Am()?this.Vaa():!this.oa||this.Tc||this.y0|| (this.y0=!0,this.oa.g("coreMapCreated",function(){this.y0=!1;this.mapChanged()},this,!0)))}},iX:function(){this.oa&&(this.oa.G("mousemove",this.XA,this),this.oa.G("zoomchange",this.rN,this),this.oa.G("movestart",this.ZY,this),this.oa.G("mapmove",this.$Y,this),this.oa.G("moveend",this.YY,this),this.oa.G("dragstart",this.XY,this),this.oa.G("dragend",this.WY,this),this.oa.G("click",this.hG,this),this.oa.G("dblclick",this.VY,this));this.uk&&(this.oa&&this.oa.removeControl(this.uk),this.uk=null);this.cf&& (this.cf.clear(),this.Yia(),this.cf=null);this.Kd&&this.Kd.G("render",this.AG,this);this.Ni=!0;g.yj&&(g.yj.G("vecTileParsed.builds.found",this.L5,this),g.yj.y7(!1,this.oa));this.Ow(null);this.If.setMap(null);this.Jt();this.Tc=this.oa=null;this.tF()},Vaa:function(){this.oa.g("zoomchange",this.rN,this);this.oa.g("moveend",this.YY,this);this.oa.g("mapmove",this.$Y,this);this.oa.g("movestart",this.ZY,this);this.oa.g("dragstart",this.XY,this);this.oa.g("dragend",this.WY,this);this.oa.g("click",this.hG, this);this.oa.g("dblclick",this.VY,this);this.oa.g("mousemove",this.XA,this);this.rN();this.bO();this.eA();this.Bb.pc(this.oa);"IndoorLayer"===this.LAYER_NAME&&(this.Kn=new g.Uo.WU({zIndex:this.get("featureszIndex")||this.getzIndex(),map:this.oa,innerLayer:!0}),this.cf=this.Kn.o,this.Kaa());g.yj&&this.l9()&&g.yj.g("vecTileParsed.builds.found",this.L5,this);this.cursorChanged();this.Kd=new g.k$(this.oa,this.Bb);this.Kd.D7(g.l.Mc?2:1);this.Kd.Rxa=this.fO;this.Kd.g("render",this.AG,this);this.Jt();this.oea(); this.disableHoverMarkerChanged();this.iconSizeOffsetChanged();this.labelSizeOffsetChanged();this.disableIconRenderChanged()},disableHoverMarkerChanged:function(){this.If&&this.If.setMap(this.Ni||this.get("disableHoverMarker")?null:this.oa)},Yia:function(){this.jN(!1);var a=this.Kn;setTimeout(function(){a.setMap(null)},0);this.cf=this.Kn=null},Kaa:function(){this.Kn.setMap(this.oa);this.cf=this.Kn.o;this.jN(!0)},jN:function(a){if(this.cf){var b=this.cf.cA,c=this.get("indoorEvents")||[];g.a.isArray(c)? (0>c.indexOf("click")&&c.push("click"),g.l.Z||(0>c.indexOf("mouseover")&&c.push("mouseover"),0>c.indexOf("mouseout")&&c.push("mouseout"))):c=c.split(" ");a=a?b.g:b.G;for(var d=0,e=c.length;d<e;d++)a.call(b,c[d],this.jea,this)}},rN:function(){if(this.Am()){var a=this.oa.get("zoom");if(g.l.Z){var b=this,c=a+this.Kd?this.Kd.Vn:0;this.Bb.forEach(function(a){b.Wba(a.id,c)})}this.cf&&this.cf.N&&Math.floor(a)===a&&this.cf.N.zoom!==a&&(this.cf.N.zoom=a,this.cf.N.S=this.oa.aj.Jp(a));this.Jt({L3:!0});this.bO()}}, zY:function(a,b){if(!a)return!1;"object"!==typeof a&&(a=this.Bb.Fh({id:a}));var c=this.LM(),d=this.Bb.Ql(a);if(b&&this.oa&&"IndoorLayer"===this.LAYER_NAME){var e=this.oa.getResolution();b=b.Gd(e);c=new g.Gf(c.Zb.add(b),c.Fd.$a(b))}return c&&d?c.Hg(d,0):!1},Wba:function(a,b){var c=this.Bb.Fh({id:a});this.zY(c)||this.RW(a,b)},RW:function(a,b){var c=this.Bb.Fh({id:a});c&&this.Bb.Xla(c,void 0,b)},$M:function(){return 300>g.a.wf()-this.$F},$Y:function(){this.$F=g.a.wf()},ZY:function(){this.$F=g.a.wf()}, YY:function(){this.$F=0;this.Jt({L3:!0})},Waa:function(){var a=this.getVisibleBuildingIds();a&&1===a.length&&this.setSelectedBuildingId(a[0])},XY:function(){this.DY=!0},WY:function(){this.DY=!1},Eea:function(){this.mY=!0;var a=this;setTimeout(function(){a.mY=!1},0)},hG:function(){this.mY||(this.q("map_click"),this.zca({id:0},200))},VY:function(){this.oP()},zca:function(a,b){var c=this;this.oP();this.EF=setTimeout(function(){c.EF=null;c.Pt(a)},b||300)},oP:function(){this.EF&&(clearTimeout(this.EF), this.EF=null)},bO:function(){var a=!this.Am()||!this.get("visible");if(!a&&this.oa)var a=this.oa.get("zoom"),b=this.get("zooms"),a=a<b[0]||a>b[1];this.Ni!==a&&(this.tF(),this.Ni=a,g.yj&&g.yj.y7(!this.Ni,this.oa),this.disableHoverMarkerChanged(),this.jN(!this.Ni),this.Jt(),this.Ni&&(this.Ow(null),this.VG(null)),this.AG());this.eA()},setSelectedBuildingId:function(a){g.c.add(this,"setSelectedBuildingId");this.Pt({id:a})},Pt:function(a){this.oP();if(this.Cl!==a.id){if(this.Cl){var b=this.Bb.Fh(this.Cl); b&&(b.DG=!1,this.RW(b.id))}this.q("selectedBuildingIdChanged",{oldId:this.Cl,newId:a.id});this.Cl=a.id;if(a=this.Bb.Fh(a.id))a.DG=!0;this.Un()}this.Jt()},eA:function(){if(this.oa&&!g.l.Z)for(var a=this.oa.get("zoom"),b=[this.oa],c=!this.Ni&&this.jB&&0<this.jB.length,d=0,e=b.length;d<e;d++)if(b[d]){var f=b[d].get("zooms");f&&(c?20>f[1]&&(b[d].set("zooms",[f[0],20]),b[d].nta=f[1]):18<f[1]&&a<f[1]&&b[d].set("zooms",[f[0],b[d].nta||f[1]]))}},Ada:function(a){if(!this.Cl)return!1;var b=this.Bb.Fh(this.Cl); return!b||!b.yu||a&&a.L3&&!this.zY(b,new g.H(30,30))?!1:{id:b.id,Nc:b.Nc||b.eo,moa:this.pba(b.tp.ma)}},pba:function(a){return g.extend({},a,{qQ:a.floor_indexs,ooa:a.floor_nonas,noa:a.floor_names})},Oea:function(){var a=this.uk;a&&(a.g("floorChanged",function(a){this.ZT(a.$n,a.wu,function(){})},this),a.g("visible",function(){a&&this.q("floorBarVisibleChanged",{ZBa:a,visible:a.get("visible")})},this))},getFloorBar:function(){return this.uk},getFeaturesLayer:function(){return this.Kn},Jt:function(a){!this.Am()|| this.get("hideFloorBar")||this.Ni?this.uk&&this.uk.hide():(a=this.Ada(a),this.uk||(this.uk=new g.qV(this.get(g.l.Z?"floorBarOptionsForMobile":"floorBarOptions")),this.Oea(),this.oa.C=!0,this.oa.addControl(this.uk),this.oa.C=!1),this.uk.set("floorData",a),a?this.uk.show():this.uk.hide())},Kha:function(a){var b=a.Ot;if(!b)return null;var c=b.ma;if(!c)return null;var d=null;c.cpid&&(d=this.Bb.$O(b));return{building_id:c.jt,floor:c.HF,lnglat:a.Uf||a.lnglat,shop:d}},XA:function(a){a=a.Uf||a.lnglat;a&& this.SA&&a.cb(this.SA)||(this.SA=a,this.gX(a))},gX:function(a,b){function c(){d.nM=null;d.xN&&a?(d.If.show(),d.If.setPosition(a)):d.If.hide()}this.nM&&clearTimeout(this.nM);this.If.get("visible")&&this.If.hide();var d=this;b?c():this.nM=setTimeout(c,100)},Ow:function(a,b,c){this.get("disableIndoorMouseoverHighlight")&&(a=null);var d=null;this.bx=null;a&&(a.ma?a.ma.pid||("floor"===a.ma.ql&&(a=this.Bb.I2(a.ma.jt))&&(d=a),a=null):a=null);a&&!d&&(d=a.ma.name||a.ma.name_cn);if(d)for(var e=["\\u8f85\\u52a9\\u9762"], f=0,h=e.length;f<h;f++){if(0<=d.indexOf(e[f])){a=d=null;break}}else a=null;if(a)switch(a.ma.ql){case "shops":this.bx=a}this.If&&(d?(this.xN!==d&&(this.xN=d,this.If.setContent(\'<div class="amap-indoor-map-moverf-marker">\'+d+"</div>")),this.gX(c.Uf||c.lnglat,!0)):(this.xN=null,this.If.hide(),this.If.setContent("")));this.mja(b)},mja:function(a){this.OU&&g.a.fi(this.OU);this.OU=g.a.Qc(function(){this.OU=null;this.z_(a)},this)},jea:function(a){if(this.Ni)console.warn("Layer is hidden");else{var b=this.Kha(a); if(!b)this.Ow(null),b=null;else if(b.building_id){a.gAa=!0;a.type||(a.type=a.type);var c=b.building_id,d="click"===a.type,e="mouseover"===a.type,f="mouseout"===a.type;if(d||e)d&&this.Eea(),this.Cl!==c&&this.Pt({id:b.building_id});e?(this.nO("default"),this.Ow(a.Ot,c,a,b)):f&&(this.nO(this.get("cursor")),this.Ow(null))}g.event.O(this,a.type,b||a)}},AG:function(a){this.mO&&clearTimeout(this.mO);var b=this;this.mO=setTimeout(function(){b.mO=null;b.Un()},a||100)},Mf:function(){if(!this.tt)return null; var a=this.constructor.Sc.Mf.apply(this,arguments),b=this;setTimeout(function(){b.mapChanged()},0);return a},CA:function(){return this.get("map")},pda:function(){var a=this.CA();return a?a.map:null},fAa:function(){var a=this.CA();return a?g.yj.x2(a):null},eAa:function(a,b){var c=this.oa.getResolution(),d=this.oa.Ab(this.oa.get("center")),e=b.ki(),f=this.oa.get("size"),h=Math.abs(d.y-e.y)/c;return Math.abs(d.x-e.x)/c>3*f.width||h>3*f.height},DM:function(){if(this.Ni||!this.Am())return[];var a=this.LM(), b=[],c=[];a&&this.Bb.forEach(function(c){if(this.Bb.IR(c)){var d=this.Bb.Ql(c);d&&a.Hg(d,0)&&b.push(c.id)}},this);if(c.length)for(var d=0,e=c.length;d<e;d++)this.Bb.Hua(c[d]);return b},Un:function(){this.Yv||(this.ND=g.a.Qc(this.K_,this),this.Yv=!0)},KX:function(a){return a.eo||a.Nc||1},Am:function(){return!(!this.oa||!this.Tc)},gka:function(a){if(this.Am()){var b=this;setTimeout(function(){a.call(b)},0)}else this.kB||(this.kB=[]),this.kB.push(a)},oea:function(){if(this.kB){var a=this.kB;this.kB= null;for(var b=0,c=a.length;b<c;b++)a[b].call(this)}},gB:function(a){this.Am()&&!this.Ni&&(a||this.l9()&&(a=g.yj.Foa(this.oa)),a&&a.length&&this.Bb.Kra(a))},ZT:function(a,b,c,d){d=g.extend({I8:!0},d);var e=this;if(this.Am()){var f=!1,h=this.uk,k=this.Bb.Fh(a);h&&(k&&this.Bb.p4(k,b)||(f=!0),f&&h.w7(a,b,!0));var l=function(b,e){var f;f=b?{status:1,error:b}:{status:0,building:this.Bb.xQ(e)};g.extend(f,{id:a});!1!==d.I8&&g.event.O(this,"floor_complete",f);c&&c.call(this,b,e,f)};this.Bb.ZR({id:a,b7:b}, function(c,d){!c&&b&&(d.Nc=b);f&&h.w7(a,b,!1);c?l.call(e,c,d):(e.Ow(null),e.Un(),e.Pt(d),l.call(e,null,d))})}else{var m=Array.prototype.slice.call(arguments,0);this.gka(function(){this.ZT.apply(this,m)})}},jja:function(a){return!this.Am()||a&&a.uFa&&(a=this.Tc,a.Xg||a.Dk||a.zg&&this.$M())?!1:!0},K_:function(){this.Tc&&this.Tc.set("display")},tH:function(){var a=this.oa;if(a&&a.map){if(this.get("alwaysShow"))return!0;a.C=!0;a.getLayers();a.C=!1;for(var b in a.map.ya)if(g.o.Uh&&a.map.ya[b]instanceof g.o.Uh)return!0;return!1}},render:function(a){if(this.tH())if(this.ND&&g.a.fi(this.ND),this.Yv=!1,this.gB(),this.jja()){var b=this.Rw();b.Kk=a;this.D_=this.uW++;this.cka(b.mr,b);this.aja(b.mr,b);this.mA(this.rY);this.mA(this.LA);this.mA(this.UM);this.mA(this.TF);this.VG(b.mr);this.eA()}else this.AG(500)},tF:function(){this.TA=null},getRenderLabels:function(){if(!this.Am()||this.get("disableLabelRender")||this.Ni||0<this.Kd.LQ())return this.tF(),[];var a=this.Rw(),b=[];if(this.TA&&this.TA.result.Iha=== this.get("opacity")&&(this.TA.cya===a.key||this.$M()||this.DY))b=this.TA.result;else{var c=a.mr,b=[];b.dP=[];for(var d=0,e=c.length;d<e;d++){var f=c[d];f.Nc||(f.Nc=this.KX(f));var h=this.Kd.lpa(f,a),k=this.get("opacity");g.a.Rb(h,function(a){a.floor=f.Nc;a.opacity=k});b.push.apply(b,h);b.dP.push(f.tp.da)}b&&0<b.length&&0===this.Kd.LQ()&&(b.Iha=this.get("opacity"),this.TA={cya:a.key,result:b})}b.aEa=this.DM();return b},getVisibleBuildingIds:function(){g.c.add(this,"getVisibleBuildingIds");return this.jB|| []},getBuildingInfoById:function(a){return this.Bb.Goa(a)},VG:function(a){var b=[];if(a&&!this.Ni)for(var c=0,d=a.length;c<d;c++)this.Bb.IR(a[c])&&b.push(a[c].id);b.sort();a=this.jB||[];this.jB=b;g.yj&&g.yj.Ova(b,this.oa);a.join(",")!==b.join(",")&&(this.q("visibleBuildingChanged",{oldIds:a,newIds:this.jB}),this.Waa())},Rw:function(){for(var a=this.DM(),b=[],c=[],d=[],e=0,f=a.length;e<f;e++){var h=this.Bb.Fh(a[e]);h?(b.push(h),d.push(h.id),c.push(h.id+"_"+h.Nc+(h.DG?"_sel":""))):console.warn("Can not find bld: ", a[e])}c.sort();var k;this.Am()?(a=this.LM(),e=this.oa.get("zoom"),k=this.oa.get("viewMode")):(a=new g.Gf(0,0,0,0),e=0);return{Bi:k,mr:b,XAa:d,Ga:a,zoom:e,key:e+";"+[a.Zb,a.Fd].join()+";"+c.join(",")}},cka:function(a){var b,c,d=[];b=0;for(c=a.length;b<c;b++)d.push(a[b].id+"_"+a[b].Nc);b=d.sort().join(";");if(this.cf.eka!==b){this.cf.eka=b;this.cf.clear();var e=this;this.cf.tO&&g.a.gP(this.cf.tO);this.cf.tO=g.a.vT(function(){e.cf&&(e.cf.tO=null,e.Pia(a))},{timeout:20})}},Pia:function(a){for(var b=[], c=0,d=a.length;c<d;c++){var e=a[c];if(e=this.Bb.Ip(e,e.Nc,!0))e.Nl&&b.push(e.Nl),b.push.apply(b,e.ha)}this.cf.xx(b)},LM:function(){var a=this;if(!this.oa)return null;var b=this.oa.get("coordsBound");if("IndoorLayer3D"===this.LAYER_NAME){if(!b)return{};b.Hg=function(c){var d=[],e=c.Fd;c=c.Zb;var f=[new g.H(c.x,c.y),new g.H(e.x,c.y),new g.H(e.x,e.y),new g.H(c.x,e.y),new g.H(c.x,c.y)];g.a.Rb(b.path,function(b){b=new g.H(b[0],b[1]);d.push(a.oa.p20ToLngLat(b))});g.a.Rb(f,function(b,c){f[c]=a.oa.p20ToLngLat(b)}); return g.Hq.doesRingRingIntersect(d,f)||g.Hq.isRingInRing(f,d)}}return b},dca:function(a,b){if(0===parseInt(this.oa.get("rotation"),10)%360)return this.oa.Ae(a,b);var c=this.oa;a=a.jb();var d=c.Qd(a),e=c.get("center");-180>e.Q-d.Q?a.x-=g.a.Ca:180<e.Q-d.Q&&(a.x+=g.a.Ca);d=c.get("centerCoords");d=a.$a(d).dd(1<<20-b);c=c.get("size").dE().dd(2);e=d.x*Math.cos(0)-Math.sin(0)*d.y;d=Math.sin(0)*d.x+Math.cos(0)*d.y;return c.add(new g.H(e,d))},A_:function(a,b,c){if(!a)console.warn("Empty image");else if(g.a.isArray(a))for(var d= 0,e=a.length;d<e;d++)this.A_(a[d],b,c);else if(!a.Ud||c.bya.Hg(a.Ud,0)){var f=a.xa;"function"===typeof f&&(f=f(a));f&&(f.ad=this.D_,d=a.Yd,d=this.dca(new g.H(d[0],d[1]),c.zoom),a={position:"absolute",width:Math.round(a.width)+"px",height:Math.round(a.height)+"px",left:Math.ceil(d.x)+"px",top:Math.ceil(d.y)+"px"},g.extend(f.style,a),f.parentNode!==b&&(b.appendChild(f),c.Sy&&!g.l.Z&&(f.style.opacity=c.Sy,g.mw.P0(f,1E3),setTimeout(function(){f.style.opacity=1},0))))}},E_:function(a,b,c){g.j.dm(a,b|| a.width,c||a.height,!0)},bja:function(a,b,c){this.Qt?c.$g&&this.E_(this.Qt):(this.Qt=document.createElement("canvas"),this.LA.appendChild(this.Qt));this.rx?c.$g&&this.E_(this.rx):(this.rx=document.createElement("canvas"),this.TF.appendChild(this.rx));c=[{uu:this.Kd.wna,K:this.LA,FP:[a,b,this.Qt,{$g:c.$g}]},{uu:this.Kd.vna,K:this.LA,FP:[a,b,this.Qt,{$g:!1}]},{disable:this.get("disableLabelRender")||b.Kk&&b.Kk.nT,uu:this.Kd.yna,K:this.TF,FP:[a,b,this.rx,{$g:c.$g}]}];this.dO(a,b,c)},dO:function(a,b, c){for(var d=0,e=c.length;d<e;d++)if(!c[d].disable){var f=c[d].FP||[a,b,!0];c[d].r2&&f.push.apply(f,c[d].r2);(f=c[d].uu.apply(this.Kd,f))&&this.A_(f,c[d].K,{WAa:a.id,Sy:c[d].Sy,bya:b.Ga,zoom:b.zoom})}},z_:function(a,b){"string"===typeof a&&(a=this.Bb.Fh(a));b||(b=this.Rw());var c=!0;a&&!this.$M()&&this.bx||(c=!1);this.bx&&c&&(this.Kd.SD(this.bx,b.zoom+this.Kd.Vn,{Os:"polygon"}),this.bx.style||(c=!1));c?(this.jY||(this.jY=document.createElement("canvas")),c=this.get("shopHighlightCoverStyle")||this.yca, c.Nm||(c.Nm="highlight"),c=[{uu:this.Kd.apa,r2:[{canvas:this.jY,ha:[g.extend(new g.Rh,this.bx,{style:c})]}],K:this.UM,Sy:0.1}],this.dO(a,b,c)):this.mA(this.UM,-1)},cja:function(a,b){var c=[{uu:this.Kd.cpa,K:this.rY},{uu:this.Kd.bpa,K:this.LA,Sy:0.1},{disable:this.get("disableLabelRender")||b.Kk&&b.Kk.nT,uu:this.Kd.kpa,K:this.TF,Sy:0.1}];this.dO(a,b,c);g.l.Z||this.z_(a,b)},ika:function(a,b){this.oa.C=!0;var c=this.oa.getResolution(null,b.zoom);this.oa.C=!1;var d=8E5;"undefined"!==typeof screen&&screen.width&& screen.height&&(d=screen.width*screen.height*1.3);for(var e=0,f=a.length;e<f;e++){var h=this.Bb.Ql(a[e]);if(h){var k=h.ij()/c,h=h.gj()/c;if(k*h>d)return!0}}return!1},aja:function(a,b){var c=this.fO;c&&this.ika(a,b)&&(c=!1);for(var d=0,e=a.length;d<e;d++){var f=a[d];f.Nc||(f.Nc=this.KX(f));c?this.cja(f,b):this.bja(f,b,{$g:0===d})}},mA:function(a,b){if(a){b=b||this.D_;for(var c=Array.prototype.slice.call(a.childNodes,0),d=c.length-1;0<=d;d-=1){var e=c[d];e&&e.ad!==b&&a.removeChild(e)}}}};z.o.g$=z.o.ll.extend(z.o.VK); ')