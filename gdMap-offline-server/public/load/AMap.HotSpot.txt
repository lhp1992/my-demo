_jsload_('AMap.HotSpot', 'g.Sh=g.aa.extend({ja:[g.sa],r:function(a,b,c){c=c||{};this.CLASS_NAME="AMap.HotSpot";g.c.va(this,c);this.fX=g.A.Cc+"://"+g.A.EK+"/mapclick";this.qx=b||this.fX;this.fB=c.pointerCursor||!0;a&&this.setMap(a)},d7:function(a){a=a.getLang();var b;"zh_cn"===a?b=this.fX:(b=g.A.Cc+"://mapclick.amap.com/poi",g.l.Z&&(b+="_mo"),"zh_cn"!==a&&(b+="_"+a),b+="/poi");this.qx!==b&&(this.qx=b,g.Sh.Mo={},g.Sh.data={},this.Si())},setMap:function(a){g.c.add(this,"setMap");this.e&&(this.e.G("click",this.Wq,this),this.e.G("mousemove", this.Yq,this),this.e.G("moveend",this.Si,this),this.e.G("zoomend",this.Si,this),this.e.G("viewreset",this.Si,this),this.e.set("optimalCursor",null));(this.e=a)&&a.view&&"3D"!==a.view.type?(this.d7(a),a.g("click",this.Wq,this),a.g("mousemove",this.Yq,this),a.g("moveend",this.Si,this),a.g("zoomend",this.Si,this),a.g("viewreset",this.Si,this),this.Si()):g.Sh.Mo=null},Wq:function(a){(a=this.J_(a.lnglat))&&g.event.O(this,"click",a)},Yq:function(a){(a=this.J_(a.lnglat))&&this.Ji!==a&&(this.fB&&this.e.set("optimalCursor", "pointer"),this.Ji&&g.event.O(this,"mouseout",this.Ji),g.event.O(this,"mouseover",a));!a&&this.Ji&&(this.fB&&this.e.set("optimalCursor",null),g.event.O(this,"mouseout",this.Ji));this.Ji=a},Si:function(){if(this.e){g.Sh.data||(g.Sh.data={});g.Sh.Mo||(g.Sh.Mo={});var a=this.e.get("zoom");if(Math.ceil(a)===this.e.getZoom()){var b=this.dea(a,this.e.getBounds());b&&(new g.fb.vb(this.qx+"?tiles="+b+"&level="+a,{callback:"cbk"})).g("complete",function(){return function(b){this.e&&this.Tha(b,a)}}(),this)}}}, dea:function(a,b){if(!b.Oj)return null;for(var c=this.e.hc(b.Oj(),a),d=this.e.hc(b.po(),a),e=Math.floor(c.hf()/256),c=Math.floor(c.de()/256),f=Math.ceil(d.hf()/256),d=Math.ceil(d.de()/256),h=[];e<=f;e+=1)for(var k=c;k<=d;k+=1){var l=[a,e,k].join("_");g.Sh.Mo[l]||(h.push(e+","+k),g.Sh.Mo[l]=1)}return h.length?h.join(";"):null},Nla:function(a,b){var c=parseInt(a.ic);if(18>=b&&14<=b&&(335<=c&&374>=c||436<=c&&444>=c||431===c||432===c||434===c||447===c||448===c))return!1;if(18===b||17===b)if(375===c|| 3751===c||445===c||376===c)return!1;return 18===b&&323===c||13===b&&334===c||18>=b&&10<=b&&8E3===c||18>=b&&13<=b&&381===c?!1:!0},Tha:function(a,b){if(a.list){var c=a.list,d;for(d in c)if(c.hasOwnProperty(d))for(var e=c[d],f=0;f<e.length;f+=1){var h=e[f];if(this.Nla(h,b)){for(var k={id:h.id,name:h.n.replace(/\\^/g,""),lnglat:new g.T(h.p[0],h.p[1])},l=[],m=["b","ib"],n=0,p=m.length;n<p;n++){var q=h[m[n]];q&&l.push.apply(l,this.Zha(new g.T(q[0],q[3]),new g.T(q[2],q[1]),b))}for(h=0;h<l.length;h+=1)m=l[h][0], n=l[h][1],g.Sh.data[m]||(g.Sh.data[m]={}),g.Sh.data[m][n]=k}}}},ON:function(a,b){var c=this.e.hc(a,b),d=Math.round(c.hf()),c=Math.round(c.de());return{Iv:Math.floor(d/256),Jv:Math.floor(c/256),offsetX:d%256,offsetY:c%256}},Zha:function(a,b,c){a=this.ON(a,c);b=this.ON(b,c);var d=[];b.offsetX+=256*(b.Iv-a.Iv);b.offsetY+=256*(b.Jv-a.Jv);for(var e=a.Iv;e<=b.Iv;e+=1)for(var f=a.Jv;f<=b.Jv;f+=1){var h=[c,e,f].join("_"),k=[Math.max(256*(e-a.Iv),a.offsetX)%256,Math.max(256*(f-a.Jv),a.offsetY)%256,Math.min(256* (e-a.Iv+1)-1,b.offsetX)%256,Math.min(256*(f-a.Jv+1)-1,b.offsetY)%256].join("_");d.push([h,k])}return d},J_:function(a){a=this.ON(a);var b=[this.e.getZoom(),a.Iv,a.Jv].join("_");if(g.Sh.data[b]){var b=g.Sh.data[b],c;for(c in b)if(b.hasOwnProperty(c)){var d=c.split("_"),e=parseInt(d[1],10),f=parseInt(d[2],10),h=parseInt(d[3],10);if(a.offsetX>=parseInt(d[0],10)&&a.offsetX<=f&&a.offsetY>=e&&a.offsetY<=h)return b[c]}}return null}});window.AMap.HotSpot=g.Sh; ')