_jsload_('AMap.Autocomplete', 'g.XU=g.aa.extend({xi:".amap-sug-result{position:absolute;z-index:1024;background-color:#fefefe;border:1px solid #d1d1d1;bottom:auto}.auto-item:hover{background-color:#cae1ff}.auto-item{white-space:nowrap;font-size:12px;cursor:pointer;padding:4px}.auto-item-span{color:#c1c1c1;padding-left:4px}",ja:[g.sa],r:function(a){this.CLASS_NAME="AMap.Autocomplete";g.c.va(this,a);this.M=a||{};this.url=g.A.Rd+"/v3/assistant/inputtips";void 0==this.M.closeResultOnScroll&&(this.M.closeResultOnScroll=!0);void 0== this.M.outPutDirAuto&&(this.M.outPutDirAuto=!0);this.M.output&&("string"===typeof this.M.output?this.Ob=document.getElementById(this.M.output):g.a.NI(this.M.output)&&(this.Ob=this.M.output));if(this.M.input){"string"===typeof this.M.input?this.input=document.getElementById(this.M.input):g.a.NI(this.M.input)&&(this.input=this.M.input);this.input&&this.Eqa();this.Ob||(this.Ob=g.j.create("div",document.body,"amap-sug-result"),this.Ob.style.visibility="hidden",this.K5=!0);var b=this;a=function(){b.Ob.style.visibility= "hidden"};var c=g.j.getElementsByClassName("amap-maps");if(c&&c.length)for(var d=0;d<c.length;d+=1)g.F.g(c[d],"click",a);g.F.g(document,"click",a);g.F.g(document,"mousewheel",a);g.F.g(window,"resize",this.DJ,this);this.M.closeResultOnScroll?g.F.g(window,"scroll",this.closeResult,this):g.F.g(window,"scroll",this.DJ,this)}},closeResult:function(){this.Ob&&(this.Ob.style.visibility="hidden")},Eqa:function(){"oninput"in this.input&&g.F.g(this.input,"input",this.Usa,this);g.F.g(this.input,"keyup",this.$sa, this);g.F.g(this.input,"keydown",function(a){g.F.stopPropagation(a)},this)},Usa:function(){this.Ob&&this.Q0()},$sa:function(a){var b=(a||window.event).keyCode;if(a=this.Ob){var c=a.CH;40===b?a.sj&&a.sj.length&&(a.childNodes[c]&&(a.childNodes[c].style.background=""),c=(c+1)%a.sj.length,a.CH=c,a.childNodes[c].style.background="#CAE1FF",this.input.value=a.sj[c].name,this.q("choose",{poi:this.Ob.sj[c]})):38===b?a.sj&&a.sj.length&&(a.childNodes[c]&&(a.childNodes[c].style.background=""),c=(c-1+a.sj.length)% a.sj.length,a.CH=c,a.childNodes[c].style.background="#CAE1FF",this.input.value=a.sj[c].name,this.q("choose",{poi:this.Ob.sj[c]})):13===b?(a=this.Ob)&&-1!==a.CH&&this.q7(c):"oninput"in this.input||this.Q0()}},q7:function(a){var b=this.input;if(this.Ob&&this.Ob.sj){var c=this.Ob.sj[a].name;this.q("select",{poi:this.Ob.sj[a]});b.value=c;this.Ob.sj="";this.Ob.style.display="none"}},Q0:function(){var a=this.input.value;0<a.length?this.N4!==a&&this.search(a):(this.N4="",this.Ob.style.display="none")},IT:function(a){this.M.noshowDistrict= a},Rka:function(a){this.Ob.innerHTML="";var b=this,c=document.createDocumentFragment();if(a&&0<a.length&&this.input){for(var d=function(a){b.q7(a.target.H6)},e=0;e<a.length;e++){var f=g.j.create("div",c,"auto-item");f.id="amap-sug"+e;f.H6=e;g.j.fillText(f,a[e].name);g.F.g(f,"click",d);b.M.noshowDistrict||!a[e].district&&!a[e].city||(f=g.j.create("span",f,"auto-item-span"),g.j.fillText(f,a[e].district||a[e].city),f.H6=e)}this.Ob.CH=-1;this.Ob.sj=a;this.Ob.appendChild(c);this.Ob.style.display="block"; this.Ob.style.visibility="visible"}else this.Ob.style.visibility="hidden";this.K5&&this.DJ()},setType:function(a){g.c.add(this,"setType");this.M.type=a},setLang:function(a){g.c.add(this,"setLang");this.M.lang=a||"zh_cn"},getLang:function(){return this.M.lang},setCity:function(a){g.c.add(this,"setCity");this.M.city=a},setCityLimit:function(a){this.M.citylimit=a},search:function(a,b){g.c.add(this,"search");if(a){this.N4=a;var c=["s=rsv3"];c.push("key="+g.A.key);this.M.datatype&&c.push("datatype="+this.M.datatype); this.Vq(this.M,{city:"city",type:"type",citylimit:"citylimit",lang:"language"},c);var d=this,c=new g.fb.vb(d.url+(0<c.length?"?"+c.join("&"):""),{callback:"callback",PH:{keywords:a}});c.g("complete",function(a){d.Fc(a,b)},d);c.g("error",function(a){d.ec(a,b)},d)}else b&&"function"===typeof b&&b("error","NO_PARAMS")},ec:function(a,b){z.event.O(this,"error",a);b&&"function"===typeof b&&b("error",a.info)},Jb:function(a){a=parseInt(a,10);return isNaN(a)?0:a},wJ:function(a){return a instanceof Array&& !a.length?"":a},Fc:function(a,b){var c;if(parseInt(a.status,10))if(a.tips&&0!==a.tips.length){for(c=0;c<a.tips.length;c+=1){var d=a.tips[c];d.location&&d.location.length&&(d.location=g.a.Ha(d.location.split(",")));d.location=this.wJ(d.location);d.adcode=this.wJ(d.adcode);d.district=this.wJ(d.district);d.id=this.wJ(d.id)}c={info:a.info,count:this.Jb(a.count),tips:a.tips};z.event.O(this,"complete",c);b&&"function"===typeof b&&b("complete",c);this.input&&this.Rka(a.tips)}else this.Ob&&(this.Ob.innerHTML= "",this.Ob.style.visibility="hidden"),c={info:"ok"===a.info.toLowerCase()?"NO_DATA":a.info},z.event.O(this,"complete",c),b&&"function"===typeof b&&b("no_data",{});else c={info:a.info},z.event.O(this,"error",c),b&&"function"===typeof b&&b("error",a.info)},DJ:function(){var a=this.input.getBoundingClientRect(),b=this.Ob.getBoundingClientRect(),c=b.height;void 0===c&&(c=b.bottom-b.top);b=a.width;void 0===b&&(b=a.right-a.left);var d=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop; this.Ob.style.left=a.left+(document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft)-1+"px";var e=document.documentElement.clientHeight;this.Ob.style.top=this.M.outPutDirAuto&&a.bottom+c+10>e&&a.bottom>c?a.top+d-c-2+"px":a.bottom+d+2+"px";this.Ob.style.minWidth=b+2+"px";return this},Vq:function(a,b,c){for(var d in a)"undefined"!==typeof a[d]&&"undefined"!==typeof b[d]&&c.push(b[d]+"="+a[d])}});window.AMap.Autocomplete=g.XU; ')