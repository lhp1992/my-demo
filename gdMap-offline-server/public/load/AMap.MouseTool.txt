_jsload_('AMap.MouseTool', 'g.A$=g.aa.extend({ja:[g.sa],r:function(a){this.CLASS_NAME="AMap.MouseTool";g.c.va(this);this.Id=[];this.Ea={};this.Qn={};this.e=a;this.vl(a);var b=this;window.AMap.plugin("AMap.RangingTool",function(){b.zl=new g.AV(a);g.event.O(b,"rangingtool-loaded")});window.AMap.plugin("AMap.AutoPanby",function(){b.sW=new g.A9(a)})},vl:function(a){this.e=a;this.Ea={ye:[],dua:[],cua:[],Cua:[],Wla:[],uva:[],WDa:[],QEa:[],REa:[]}},ng:function(){return Math.round(1E5*Math.random())},Xn:function(){for(;0<this.Id.length;)g.event.removeListener(this.Id.shift()); this.zl&&this.zl.turnOff()},marker:function(a){g.c.add(this,"marker");this.e.set("allBubble",!0);this.Xn();a=a||{bubble:!0};var b=this,c=this.e,d=this.Ea.ye;this.Id.push(g.event.addListener(c,"click",function(e){a.position=e.lnglat;a.innerOverlay=!0;e=new z.w.rb(a);e.setMap(c);g.event.O(b,"draw",{obj:e});d.push(e)},c))},polyline:function(a){g.c.add(this,"polyline");this.e.set("allBubble",!0);this.Xn();a=a||{};var b=this,c=this.e,d=this.Ea.dua,e=c.getStatus().doubleClickZoom,f=!1,h=!1;this.Id.push(g.event.addListener(c, "click",function(b){if(!1===f)f=new z.w.Xb({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:!0,innerOverlay:!0}),c.setStatus({doubleClickZoom:!1}),f.setMap(c),d.push(f);else{var e=f.getPath();if(h){var m=e.pop();e.push(b.lnglat,m)}else e.push(b.lnglat);f.setPath(e)}},c));this.Id.push(g.event.addListener(c, "mousemove",function(a){if(f){var b=f.getPath();b.pop();b.push(a.lnglat);h=!0;f.setPath(b)}},c,c));this.Id.push(g.event.addListener(c,"dblclick",function(){if(f){var a=f.getPath();h&&a.pop();f.setPath(a);2<=f.getPath().length?g.event.O(b,"draw",{obj:f}):f.setMap(null)}h=f=!1;c.setStatus({doubleClickZoom:e})},c));this.Id.push(g.event.addListener(c,"rightclick",function(){if(f){var a=f.getPath();a.pop();f.setPath(a);2<=f.getPath().length?(d.push(f),g.event.O(b,"draw",{obj:f})):f.setMap(null)}h=f=!1; c.setStatus({doubleClickZoom:e})},c))},polygon:function(a){g.c.add(this,"polygon");this.e.set("allBubble",!0);this.Xn();a=a||{};var b=this,c=this.e,d=this.Ea.cua,e=c.getStatus().doubleClickZoom,f=!1;this.Id.push(g.event.addListener(c,"click",function(b){if(!1===f)f=new z.w.yc({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid", strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:void 0!==a.bubble?a.bubble:!0,innerOverlay:!0}),c.setStatus({doubleClickZoom:!1}),f.setMap(c),d.push(f);else{var e=f.getPath(),l=e.pop();e.push(b.lnglat,l);f.setPath(e)}},c,this));this.Id.push(g.event.addListener(c,"mousemove",function(a){if(f){var b=f.getPath();b.pop();b.push(a.lnglat);f.setPath(b)}},c,this));this.Id.push(g.event.addListener(c,"dblclick",function(){if(f){var a=f.getPath();a.pop();f.setPath(a); 2<f.getPath().length?g.event.O(b,"draw",{obj:f}):f.setMap(null)}f=!1;c.setStatus({doubleClickZoom:e})},this));this.Id.push(g.event.addListener(c,"rightclick",function(){if(f){var a=f.getPath();a.pop();f.setPath(a);2<f.getPath().length?(d.push(f),g.event.O(b,"draw",{obj:f})):f.setMap(null)}f=!1;c.setStatus({doubleClickZoom:e})},this))},rectangle:function(a){g.c.add(this,"rectangle");this.e.set("allBubble",!0);this.Xn();a=a||{};var b=this,c=this.e,d=this.Ea.Cua,e=c.getStatus().dragEnable,f,h;this.Id.push(g.event.addListener(c, "mousedown",function(b){f||(h=b.lnglat,f=new z.w.yc({path:[b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:void 0!==a.bubble?a.bubble:!0,innerOverlay:!0}),f.setMap(c),d.push(f));c.setStatus({dragEnable:!1})},this));this.Id.push(g.event.addListener(c, "mousemove",function(a){f&&(a=a.lnglat,a=[h,new g.T(a.Q,h.P),a,new g.T(h.Q,a.P)],f.setPath(a))},this));this.Id.push(g.event.addListener(c,"mouseup",function(){f&&(g.event.O(b,"draw",{obj:f}),f=!1);c.setStatus({dragEnable:e})},this))},circle:function(a){g.c.add(this,"circle");this.e.set("allBubble",!0);this.Xn();a=a||{};var b=this,c=this.e,d=this.Ea.Wla;c.getStatus();var e;this.Id.push(g.event.addListener(c,"mousedown",function(f){function h(a){c.getSize();c.getSize();a=m.re(a.lnglat);e.setRadius(a)} function k(){for(b.sW.axa();0<l.length;)g.event.removeListener(l.shift());d.push(e);g.event.O(b,"draw",{obj:e});e=null;c.setStatus({dragEnable:!0});c.G("mousemove",h,this);g.F.G(document,"mouseup",k,this);c.G("mouseup",k,this)}if(!e){c.setStatus({dragEnable:!1});var l=[],m=f.lnglat;e=new z.w.Ug({center:f.lnglat,radius:1,strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle|| "solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:void 0!==a.bubble?a.bubble:!0,innerOverlay:!0});b.sW.bxa();e.setMap(c);l.push(g.event.addListener(c,"mousemove",h,this));l.push(g.event.addListener(c,"mouseup",k,this));l.push(g.event.X(document,"mouseup",k,this))}},this))},rule:function(a){function b(a){g.event.O(this,"draw",{obj:a.polyline})}g.c.add(this,"rule");this.e.set("allBubble",!0);this.Xn();this.cfa=!0;this.zl?(a&&this.zl.Db(a),this.zl.turnOn(), this.kO||(this.kO=g.event.addListener(this.zl,"end",b,this))):g.event.yx(this,"rangingtool-loaded",function(){this.cfa&&(a&&this.zl.Db(a),this.zl.turnOn(),this.kO||(this.kO=g.event.addListener(this.zl,"end",b,this)))},this);return this.zl},measureArea:function(a){function b(a){var b=document.createElement("div");b.style.cssText="position:relative;background-color:#FFFFFF;border:1px solid #4B4B4B;border-radius:3px 3px 3px 3px;box-shadow:2px 2px 8px #999999;padding:2px 7px;white-space:nowrap;";var f= a.getArea();b.innerHTML=1E5<f?(1E-6*f).toFixed(2)+"\\u5e73\\u65b9\\u516c\\u91cc":f.toFixed(1)+"\\u5e73\\u65b9\\u7c73";a=new z.w.rb({position:a.getPath()[0],content:b,offset:new g.H(8,8),bubble:!0,innerOverlay:!0});a.za=!0;a.id=c.ng();e[a.id]=a;a.setMap(d)}g.c.add(this,"measureArea");this.e.set("allBubble",!0);this.Xn();a=a||{};var c=this,d=this.e,e,f=d.getStatus().doubleClickZoom,h=!1;this.Id.push(g.event.addListener(d,"click",function(b){if(!1===h)h=new z.w.yc({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor|| "#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:!0,innerOverlay:!0}),h.za=!0,h.id=c.ng(),d.setStatus({doubleClickZoom:!1}),e=c.Qn[h.id]={},e[h.id]=h,h.setMap(d);else{var f=h.getPath(),m=f.pop();f.push(b.lnglat,m);h.setPath(f)}},this));this.Id.push(g.event.addListener(d,"mousemove", function(a){if(h){var b=h.getPath();b.pop();b.push(a.lnglat);h.setPath(b)}},this));this.Id.push(g.event.addListener(d,"dblclick",function(){if(h){var a=h.getPath();a.pop();h.setPath(a);2<h.getPath().length?(b(h),g.event.O(c,"draw",{obj:h})):h.setMap(null)}h=!1;d.setStatus({doubleClickZoom:f})},this));this.Id.push(g.event.addListener(d,"rightclick",function(){if(h){var a=h.getPath();a.pop();h.setPath(a);2<h.getPath().length?(b(h),g.event.O(c,"draw",{obj:h})):h.setMap(null)}h=!1;d.setStatus({doubleClickZoom:f})}, this))},rectZoomIn:function(a){g.c.add(this,"rectZoomIn");this.e.set("allBubble",!0);this.Xn();a=a||{};var b=this.e,c=b.getStatus().dragEnable,d,e,f;this.Id.push(g.event.addListener(b,"mousedown",function(c){d=f=null;e=c.lnglat,f=c.pixel,d=new z.w.yc({path:[c.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,dragEnable:!1,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray|| [10,5],zIndex:a.zIndex||10,bubble:!0,innerOverlay:!0}),d.za=!0,b.setStatus({dragEnable:!1}),d.setMap(b)},this));this.Id.push(g.event.X(document,"mousemove",function(a){d&&(a=g.F.Sl(a,b.K),b.wp(a),a=b.wp(a),a=[e,new g.T(a.Q,e.P),a,new g.T(e.Q,a.P),e],d.setPath(a))},this));this.Id.push(g.event.X(document,"mouseup",function(a){b.setStatus({dragEnable:c});d&&1<d.getPath().length&&(a=g.F.Sl(a,b.K),b.wp(a),b.wp(a),(3<Math.abs(a.x-f.x)||3<Math.abs(a.y-f.y))&&b.setFitView([d]));d&&d.setMap(null);d=null}, this))},rectZoomOut:function(a){g.c.add(this,"rectZoomOut");this.e.set("allBubble",!0);this.Xn();a=a||{};var b=this.e,c=b.getStatus().dragEnable,d,e,f,h,k,l;this.Id.push(g.event.addListener(b,"mousedown",function(c){k||(e=c.lnglat,l=c.pixel,k=new z.w.yc({path:[c.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray|| [10,5],zIndex:a.zIndex||10,bubble:!0,innerOverlay:!0}),k.za=!0,b.setStatus({dragEnable:!1}),k.setMap(b))},this));this.Id.push(g.event.addListener(b,"mousemove",function(a){k&&(f=a.lnglat,h=new g.T(f.Q,e.P),d=new g.T(e.Q,f.P),k.setPath([e,h,f,d,e]))},this));this.Id.push(g.event.X(document,"mouseup",function(a){b.setStatus({dragEnable:c});if(k&&1<k.getPath().length&&(a=g.F.Sl(a,b.K),b.wp(a),b.wp(a),!a.cb(l))){b.getBounds();a=(e.Q+h.Q)/2;var d=(e.P+h.P)/2;b.setZoomAndCenter(b.get("zoom")-1,new g.T(a, d))}k&&k.setMap(null);k=l=null},this))},close:function(a){g.c.add(this,"close");this.e.set("allBubble",!1);this.Xn();var b;if(a){for(b in this.Ea)if(this.Ea.hasOwnProperty(b))for(;0<this.Ea[b].length;)a=this.Ea[b].shift(),a.setMap(null);for(b in this.Qn)if(this.Qn.hasOwnProperty(b)){for(var c in this.Qn[b])this.Qn[b].hasOwnProperty(c)&&(a=this.Qn[b][c],a.setMap(null),this.Qn[b][c]=null,delete this.Qn[b][c]);this.Qn[b]=null;delete this.Qn[b]}this.zl&&this.zl.turnOff(!0)}}});window.AMap.MouseTool=g.A$; ')